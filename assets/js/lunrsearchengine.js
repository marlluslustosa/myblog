
var documents = [{
    "id": 0,
    "url": "http://localhost:4000/404.html",
    "title": "404",
    "body": "404 Page does not exist!Please use the search bar at the top or visit our homepage! "
    }, {
    "id": 1,
    "url": "http://localhost:4000/about",
    "title": "About me",
    "body": "I am a Bachelor in Computer Science at the Federal University of Piau√≠ (UFPI) and master‚Äôs degree in Public Policies and Management of Higher Education at the Federal University of Cear√° (UFC). I work as an IT Analyst in this same institution (UFC) working in the areas of virtualization and cloud. I have acted (and still work) as a teacher in the area of computing. But for some time now I am immersing myself in agroecology, ecology, data science, connectivism, cryptocoins, blockchain, social capital, political activism and free and open source software, as well as contributing to projects and ideas that really matter for a democratic internet. I‚Äôm a Tor, ZeroNet, Subutai, XCP-ng and federated networks enthusiast. Currently, my newest hobby are Generative Adversary Networks (GANs) as a tool for generating art. Check out my Instagram. 	Skills*   PHP/JS/Python/C* Digital art * 	  Neural Networks*   Network computer	* 	Data science* DevOps*   Containers*   Virtualization/Cloud* Blockchain* Teaching * Writing  "
    }, {
    "id": 2,
    "url": "http://localhost:4000/busca",
    "title": "Busca",
    "body": " T√≠tulo, tag, descri√ß√£o, conte√∫do ou data de publica√ß√£o (2020, 2016-02, 2016-07-21).  "
    }, {
    "id": 3,
    "url": "http://localhost:4000/categories",
    "title": "Categories",
    "body": ""
    }, {
    "id": 4,
    "url": "http://localhost:4000/contact",
    "title": "Secure Message",
    "body": "Send me a secure message using my PGP Public Key. Type the message below and click Encrypt. After that, copy the generated text and send it to me by e-mail, telegram, instagram or any other form of textual communication. Only i will be able to open the message. Encrypt Copy		The above encryption was performed through the library OpenPGP. js, maintained by ProtonMail. 						 "
    }, {
    "id": 5,
    "url": "http://localhost:4000/contato",
    "title": "Secure Message",
    "body": "Me envie uma mensagem segura, usando minha chave P√∫blica PGP. Digite a mensagem abaixo e clique em Encrypt.  	Ap√≥s isso, copie o texto gerado e me envie por e-mail, telegram, instagram ou qualquer outra forma de comunica√ß√£o textual. 	Somente eu conseguirei abrir a mensagem. 	Encrypt Copy		A cifragem acima foi realizada atrav√©s da biblioteca OpenPGP. js, mantida pelo ProtonMail. 						 "
    }, {
    "id": 6,
    "url": "http://localhost:4000/index-pt_BR.html",
    "title": "Home",
    "body": "      Todas as hist√≥rias:             "
    }, {
    "id": 7,
    "url": "http://localhost:4000/",
    "title": "Home",
    "body": "        Destaque:                                                                                                                                                                                                                                                                                                 P2V / V2V ‚Äì Convers√£o de ambientes ‚Äì XenServer 6. 5                                                                                  tecnologia                                                                	                              :               Bem, P2V e V2V s√£o termos que remetem √† migra√ß√£o de sistemas. E migra√ß√£o (desde antes de cristo ‚Äì 40 anos de migra√ß√£o dos hebreus. . . :                                                                                                                                                                                       Marllus                                                17 Feb 2016                                                                                                                                                                                                                                                                                                                                                                                                                      Quando o WhatsApp acabou                                                                                  poesia                                                                	                              :               De manh√£ cedo, acordei‚Ä¶ Peguei no celular, nenhuma notifica√ß√£o. Verifiquei o link de internet acessando um site qualquer. Estava beleza. O mito ent√£o era mesmo. . . :                                                                                                                                                                                       Marllus                                                18 Dec 2015                                                                                                                                          Todas as hist√≥rias:                                                                                                         S√≥ me resta o grito                                                            arte                                                              :       Assim como as inquieta√ß√µes de Edvard Munch, que caminham entre doen√ßas, vida e morte, tento descrever o momento √∫nico dessa ilustra√ß√£o a partir de suas pinceladas, onde podemos suscitar a. . . :                                                                                       Marllus                        15 May 2020                                                                                                                                             Meu pequeno xote                                                            poesia                                                              :       N√£o fa√ßo para crer, n√£o digo para me sentir. √â certo que a boca falao que n√£o quero ver,mas enfia goela a dentro os devaneios alheios. :                                                                                       Marllus                        04 May 2020                                                                                                                                             Instalar Xenserver Tools (xen-tools) em Debian 5 (Lenny) (HVM para PV)                                                            tecnologia                                                              :       O tutorial de hoje √© sobre como intalar o XenTools em uma VM Debian 5. 0 (Lenny) em um Xenserver que n√£o tem suporte a mesma (support guests), como ocorre a. . . :                                                                                       Marllus                        21 Jul 2016                                                                                                                                             V√©spera                                                            poesia                                                              :       Em p√© nesse caminhoMe vejo insano e famintoO grito da catraca me atracaA ter vontade de esperar. :                                                                                       Marllus                        03 Jul 2016                                                                                                                                             XenMotion no XenServer 6. 5                                                            tecnologia                                                              :       XenMotion √© um recurso bem interessante e muito importante dentro de ambiente de virtualiza√ß√£o do XenServer. √â com ele que o HA (High Availability), WLB (Work Load Balancing ‚Äì Vers√£o. . . :                                                                                       Marllus                        17 Feb 2016                                                                                                                                             Xencenter                                                            tecnologia                                                              :        O assunto agora √© sobre gerenciamento do XenServer. Neste caso, falaremos sobre XenCenter, que √© o software OFICIAL de ger√™ncia do XenServer. :                                                                                       Marllus                        17 Feb 2016                                                       &laquo; Prev       1        2        3        4        5      Next &raquo; "
    }, {
    "id": 8,
    "url": "http://localhost:4000/search.json",
    "title": "",
    "body": "[ {% for post in site. posts %}  {   ‚Äútitle‚Äù  : ‚Äú{{ post. title | escape }}‚Äù,   ‚Äúcategory‚Äù : ‚Äú{{ post. category }}‚Äù,   ‚Äútags‚Äù   : ‚Äú{{ post. tags | join: ‚Äò, ‚Äò }}‚Äù,   ‚Äúurl‚Äù   : ‚Äú{{ site. baseurl }}{{ post. url }}‚Äù,   ‚Äúdate‚Äù   : ‚Äú{{ post. date }}‚Äù,   ‚Äúcontent‚Äù : ‚Äú{{ post. content | markdownify | strip_html | strip_newlines | escape_once }}‚Äù  } {% unless forloop. last %},{% endunless %} {% endfor %}] "
    }, {
    "id": 9,
    "url": "http://localhost:4000/search",
    "title": "Busca",
    "body": " Title, tag, description, content or publication date (2020, 2016-02, 2016-07-21).  "
    }, {
    "id": 10,
    "url": "http://localhost:4000/sobre",
    "title": "Sobre mim",
    "body": "Sou bacharel em Ci√™ncia da Computa√ß√£o pela Universidade Federal do Piau√≠ (UFPI) e mestre em Pol√≠ticas P√∫blicas e Gest√£o do Ensino Superior pela Universidade Federal do Cear√° (UFC). Trabalho como analista de TI nessa mesma institui√ß√£o. Paralelamente, atuo como professor universt√°rio em cursos de tecnologia da informa√ß√£o.  Mergulho sempre em tudo que achar interessante, como agroecologia, ci√™ncia de dados, conectivismo, criptomoedas, blockchain, capital social, ativismo pol√≠tico e software livre e de c√≥digo aberto, al√©m de contribuir para projetos e id√©ias que realmente importam para uma internet democr√°tica. Sou entusiasta do Tor, ZeroNet, Subutai, XCP-ng e redes federadas. Atualmente, meu hobbie s√£o as Redes Advers√°rias Generativas (GANs) como ferramenta para gera√ß√£o de arte. Confira meu Instagram. 	Habilidades*   PHP/JS/Python/C* Digital art * 	  Neural Networks*   Network computer	* 	Data science* DevOps*   Containers*   Virtualization/Cloud* Blockchain* Doc√™ncia * Escrita "
    }, {
    "id": 11,
    "url": "http://localhost:4000/robots.txt",
    "title": "",
    "body": "      Sitemap: {{ ‚Äúsitemap. xml‚Äù   absolute_url }}   "
    }, {
    "id": 12,
    "url": "http://localhost:4000/page2/",
    "title": "Home",
    "body": "{% if page. url == ‚Äú/‚Äù %}       {% if site. lang ==  en  %}    Featured:   {% else %}  Destaque:   {% endif %}      {% for post in site. posts %}    {% if post. featured == true %}      {% include featuredbox. html %}    {% endif %}  {% endfor %}  {% endif %}       {% if site. lang ==  en  %}    All stories:   {% else %}    Todas as hist√≥rias:   {% endif %}          {% for post in paginator. posts %}    {% include postbox. html %}    {% endfor %}    {% include pagination. html %}"
    }, {
    "id": 13,
    "url": "http://localhost:4000/page3/",
    "title": "Home",
    "body": "{% if page. url == ‚Äú/‚Äù %}       {% if site. lang ==  en  %}    Featured:   {% else %}  Destaque:   {% endif %}      {% for post in site. posts %}    {% if post. featured == true %}      {% include featuredbox. html %}    {% endif %}  {% endfor %}  {% endif %}       {% if site. lang ==  en  %}    All stories:   {% else %}    Todas as hist√≥rias:   {% endif %}          {% for post in paginator. posts %}    {% include postbox. html %}    {% endfor %}    {% include pagination. html %}"
    }, {
    "id": 14,
    "url": "http://localhost:4000/page4/",
    "title": "Home",
    "body": "{% if page. url == ‚Äú/‚Äù %}       {% if site. lang ==  en  %}    Featured:   {% else %}  Destaque:   {% endif %}      {% for post in site. posts %}    {% if post. featured == true %}      {% include featuredbox. html %}    {% endif %}  {% endfor %}  {% endif %}       {% if site. lang ==  en  %}    All stories:   {% else %}    Todas as hist√≥rias:   {% endif %}          {% for post in paginator. posts %}    {% include postbox. html %}    {% endfor %}    {% include pagination. html %}"
    }, {
    "id": 15,
    "url": "http://localhost:4000/page5/",
    "title": "Home",
    "body": "{% if page. url == ‚Äú/‚Äù %}       {% if site. lang ==  en  %}    Featured:   {% else %}  Destaque:   {% endif %}      {% for post in site. posts %}    {% if post. featured == true %}      {% include featuredbox. html %}    {% endif %}  {% endfor %}  {% endif %}       {% if site. lang ==  en  %}    All stories:   {% else %}    Todas as hist√≥rias:   {% endif %}          {% for post in paginator. posts %}    {% include postbox. html %}    {% endfor %}    {% include pagination. html %}"
    }, {
    "id": 16,
    "url": "http://localhost:4000/arte/2020/05/15/so-me-resta-grito.html",
    "title": "S√≥ me resta o grito",
    "body": "2020/05/15 - Assim como as inquieta√ß√µes de Edvard Munch, que caminham entre doen√ßas, vida e morte, tento descrever o momento √∫nico dessa ilustra√ß√£o a partir de suas pinceladas, onde podemos suscitar a fragilidade e a transitoriedade da vida. Ao vigiar essa rua da cidade, temporariamente deserta, descobri um homem, arrastando seu objeto de trabalho, como se fosse em uma dire√ß√£o que nunca ter√° fim, um horizonte invis√≠vel. A loucura toma conta do ar, entremeada por agonia, rezas e rasga mortalhas, em um c√©u silencioso e de sangue. Estamos vivendo a passagem do pr√≥prio tempo. O sinal de pare pouco importa. S√≥ me resta o grito. "
    }, {
    "id": 17,
    "url": "http://localhost:4000/poesia/2020/05/04/meu-pequeno-xote.html",
    "title": "Meu pequeno xote",
    "body": "2020/05/04 - N√£o fa√ßo para crer, n√£o digo para me sentir. √â certo que a boca falao que n√£o quero ver,mas enfia goela a dentro os devaneios alheios. Ser o jeito que seria, se tivesse cr√©dito,era a melhor coisa. Mas a vida √© feito de regras. M√°s ou boas, sempre estar√£o l√°,com o mesmo desafio de enterpret√°-las,como que um farol, na tentativa de ver um homem urinando em sua base. O dif√≠cil est√° l√°, mas tamb√©m o f√°cil. J√° falei da laranja e da faca e do Jo√£o a cortando. A for√ßa, a leveza e a vontade √© que v√£o dar o destino do ferimento. S√≥ sei q nada sei, j√° falava S√≥crates. Mas ser√° q ele mesmo poderia ou j√° teria feito a pergunta: Ser√° quando? "
    }, {
    "id": 18,
    "url": "http://localhost:4000/tecnologia/2016/07/21/instalar-xenserver-tools-xen-tools-em-debian-5-lenny-hvm-para-pv.html",
    "title": "Instalar Xenserver Tools (xen-tools) em Debian 5 (Lenny) (HVM para PV)",
    "body": "2016/07/21 - O tutorial de hoje √© sobre como intalar o XenTools em uma VM Debian 5. 0 (Lenny) em um Xenserver que n√£o tem suporte a mesma (support guests), como ocorre a partir da vers√£o 6. 2. Bem, instalar o xen-tools vai habilitar o administrador a realizar diversas opera√ß√µes com a VM, como gerenciar a network da mesma, monitorar o uso de mem√≥ria RAM, realizar Xen Motion al√©m de fornecer drivers para otimiza√ß√£o de I/O de disco e rede. As vezes, ocorre de voc√™ ter um sistema legado (ex. Debian 5. 0), exportado de um outro hypervisor ou de uma m√°quina f√≠sica, no seu ambiente de virtualiza√ß√£o. Baseado nesse tipo de situa√ß√£o, deixo aqui um tutorial de como facilmente voc√™ pode instalar o xen-tools nessa VM e de quebra realizar a paravirtualiza√ß√£o da mesma (HVM para PV). Os passos a seguir mostram como instalar o xen-tools em um Debian 5 estando em um XenServer 7 ‚Äì Dundee. Pode ser feito tamb√©m em outras vers√µes do XenServer, como 6. 2 e 6. 5. Primeiro, vamos baixar o xen tools do XenServer 6. 0 (N√£o √© f√°cil encontr√°-lo separado na internet, ent√£o instalei o mesmo e o peguei da pasta /opt/xensource/packages/iso/) e o coloquei em uma pasta p√∫blica para donwload. O link est√° abaixo: https://dl. dropboxusercontent. com/u/4912938/xentools6. 0. iso Com a VM ligada, baixe o arquivo para dentro da mesma. Abaixo cito um exemplo usando wget: # wget¬†https://dl. dropboxusercontent. com/u/4912938/xentools6. 0. iso Ap√≥s isso, monte o arquivo . iso: # mount -o loop xentools6. 0. iso /mnt OBS: O diret√≥rio /mnt foi colocado como exemplo. Se tiver outro diret√≥rio onde queira montar, altere-o. Entre no diret√≥rio de execu√ß√£o do script do xen-tools e execute-o: # cd /mnt/Linux/ # . /install O script vai gerar um informa√ß√£o na tela relatando que reconheceu o sistema operacional Debian 5. 0 e que vai atualizar diversos arquivos, incluindo o kernel do sistema (que √© um kernel paravirtualizado). Pressione a tecla ‚Äòy‚Äô para confirmar a instala√ß√£o e configura√ß√£o. Aguarde um instante e logo terminar√° a instala√ß√£o. No final do relat√≥rio o testo ir√° relatar para reiniciar a VM. N√ÉO REINICIE AINDA. N√ÉO REINICIE AINDA. N√ÉO REINICIE AINDA. Se voc√™ reiniciar, o sistema n√£o vai iniciar, pois ainda faltam configura√ß√µes adicionais para o boot conseguir ser realizado. Primeiro, entre no arquivo de configura√ß√£o da inicializa√ß√£o do grub. # vim /boot/grub/menu. lst No meu caso, o script do xen-tools instalou o kernel 2. 6. 32-5-amd64, ¬†e o mesmo adicionou como parti√ß√£o do arquivo initrd e kernel a /dev/hda1. A forma que o XenServer utiliza para gerenciar dispositivos de bloco virtuais de VMs √© a xvda/xvdb‚Ä¶ ao inv√©s de hda/hdb‚Ä¶ ou sda/sdb‚Ä¶. √â a√≠ que surge o problema. Se voc√™ deixar /dev/hda, quando o boot da VM ocorrer ele tentar√° iniciar o kernel paravirtualizado 2. 6. 32-5-amd64 e n√£o ir√° conseguir, pois o mesmo est√° referenciado por /dev/xvd*, por isso, temos que alterar no arquivo do grub. A imagem abaixo √© para mostrar como ficar√° o arquivo menu. lst. Percebam o ‚Äòroot=/dev/xvda1‚Äô para mostrar que o novo dispositivo de bloco que cont√©m o kernel e initrd est√£o nesse dispositivo de bloco.  ¬† No kernel antigo (2. 6. 26-2-amd64) podem deixar como est√°, pois n√£o mais precisaremos dele. Saia e salve o arquivo: Tecle Esc e digite: :w! Agora v√° para o arquivo padr√£o de montagem de parti√ß√µes para atualizar o novo nome: # vim /etc/fstab Altere todas as linhas que cont√©m /dev/hdx* por /dev/xvdx*. OBS: Substitua o ‚Äòx‚Äô pela letra correspondente ao dispositivo de bloco correspondente e o * pelo n√∫mero referente a parti√ß√£o. No meu caso exemplo, o arquivo ficou dessa forma: Salve e saia do arquivo: Tecle esc e digite: :w! Agora, iremos alterar o console padr√£o do sistema (tty) para o padr√£o do XenServer (hvc): Entre no arquivo /etc/inittab: # vim /etc/inittab Adicione a linha: co:2345:respawn:/sbin/getty hvc0 9600 linux antes da linha: 1:2345:respawn:/sbin/getty/ 38400 tty1 Agora tenha em m√£os o uuid da VM (voc√™ pode v√™-lo atrav√©s do xencenter na aba _General¬†_da VM no canto inferior. ) Abra o console do XenServer e digite os comandos abaixo: Setar o novo kernel e initrd da VM: _# xe vm-param-set uuid= PV-bootloader-args=&#8221;&#8211;kernel &#8211;ramdisk &#8221; _ No meu caso ficou assim: #¬†_xe vm-param-set uuid= PV-bootloader-args=&#8221;&#8211;kernel /boot/vmlinuz-2. 6. 32-5-amd64 &#8211;ramdisk¬†/boot/initrd. img-2. 6. 32-5-amd64&#8243;_ Setar o local dos arquivos do kernel e initrd da VM: #¬†xe vm-param-set uuid=_ PV-args=&#8221;root=/dev/xvdx* ro quiet console=hvc0&#8243; _ No meu caso ficou assim: _# xe vm-param-set uuid=____ PV-args=&#8221;root=/dev/xvda1 ro quiet console=hvc0&#8243;_ Setar o novo bootloader (grub) da VM: _#¬†xe vm-param-set uuid= PV-bootloader=pygrub_ Setar em branco o boot antigo (HVM): #¬†_xe vm-param-set uuid= HVM-boot-policy=&#8221;&#8221;_ Pronto, ap√≥s todos os comandos sem nenhum erro, voc√™ pode reinicializar a VM. Caso ocorra tudo bem, quando a mesma estiver ativa, no xencenter na aba General veja seu estado de virtualiza√ß√£o¬†¬†(Virtualization state) e veja se est√° com status¬†Optimized. Isso quer dizer que o xen-tools est√° instalado. Para saber se a VM est√° rodando em modo PV, no campo ‚ÄúVirtualization mode‚Äù vai estar escrito PV. Caso esteja utilizando o XenServer 6. 5 ou 6. 2 digite o comando abaixo dentro da VM:       # dmesg   egrep -i ‚Äúxen   front‚Äù   Se ela estiver em PV (paravirtualizada), as seguintes linhas aparecer√£o, dentre outras informa√ß√µes: ‚Ä¶ Booting paravirtualized kernel on Xen ‚Ä¶ blkfront: xvda: barriers enable Initialising Xen virtual ethernet drive Abaixo deixo o print da tela de op√ß√µes que ser√£o habilitadas com o xen-tools instalado: Chegamos ao fim, enfim. Grande abra√ßo e qualquer d√∫vida poste nos coment√°rios ou mande e-mail (marlluslustosa@gmail. com). Se quiser ter acesso a uma s√©rie de tutorias sobre diversas funcionalidades do XenServer, acesse a p√°gina inicial do projeto: http://www. marllus. com/xenserver Refer√™ncias: http://discussions. citrix. com/topic/307891-paravirtualizing-debian/ http://discussions. citrix. com/topic/151259-howto-convert-hvm-to-paravirtmanual-p2v-rhel5sles10sp1/ http://support. citrix. com/article/CTX121875 http://discussions. citrix. com/topic/259891-tut-debian-lenny-paravirtualization-with-xentools-updated/ "
    }, {
    "id": 19,
    "url": "http://localhost:4000/poesia/2016/07/03/vespera.html",
    "title": "V√©spera",
    "body": "2016/07/03 - Em p√© nesse caminhoMe vejo insano e famintoO grito da catraca me atracaA ter vontade de esperar. Jo√£os e MariasNa esperan√ßa da fina endorfinaSe na Ter√ßa vem pa√ßocaSe na quarta vem lingui√ßa. Os meios s√£o nexosO caminho √© certoA multid√£o √© limpaDepois das 12, encrenca. Mas que n√£o falte a comida. E ao chegar perto a tripa aperta. Com os olhos l√° dentro,A saliva acomete e a vontade √© certa,Na v√©spera. Os meios sao nexosO caminho √© certoA multid√£o √© limpaDepois das 12, encrenca. Mas que n√£o falte a comida. Eita q eu vou entrar, ser√°?Tem mais um bolinho ali. Que horas me farto? Que fardo!Vamo sim, √© agora! Vamo que √© hora! "
    }, {
    "id": 20,
    "url": "http://localhost:4000/tecnologia/2016/02/17/xenmotion-no-xenserver-6-5.html",
    "title": "XenMotion no XenServer 6.5",
    "body": "2016/02/17 - XenMotion √© um recurso bem interessante e muito importante dentro de ambiente de virtualiza√ß√£o do XenServer. √â com ele que o HA (High Availability), WLB (Work Load Balancing ‚Äì Vers√£o paga do XenServer ‚Äì üôÅ ¬†) e Rolling Pool Upgrade funcionam direitinho, habilitando a possibilidade de mover as VMs entre hosts do mesmo pool sem (ou quase sem) downtime (geralmente 1 ou 2 pings perdidos). O XenMotion j√° vem habilitado no XenServer na vers√£o gratuita. E ele serve, basicamente (e como falei acima), para voc√™ poder movimentar VMs ‚Äú√† quente‚Äù entre hosts xen em um mesmo pool, ou seja, o storage (SR) t√™m de ser compartilhado entre as VMs (Geralmente um storage, adicionado em um pool, do tipo iscsi, fc, nfs). Mas, quais os requisitos mais espec√≠ficos para utilizar o XenMotion? ‚Äì O XenServer tools deve estar instalado na VM; ‚Äì O host xen destino t√™m de ter a mesma ou vers√£o superior do XenServer do host de origem; ‚Äì O host xen destino t√™m que ter mem√≥ria suficiente para o provisionamento¬†da VM, caso contr√°rio a VM n√£o completar√° o processo de migra√ß√£o (isso √© meio l√≥gico, rs); ‚Äì O drive de DVD deve estar setado como empty (n√£o deve ter nenhuma . iso anexada ou nenhum cd/dvd dentro do drive do host f√≠sico); ‚Äì Ter um SR compartilhado no pool (NFS, iSCSI/FC SAN); Mas, e em quais situa√ß√µes voc√™ vai usar o XenMotion (fora ficar brincando de jogar uma VM de um host pra outro s√≥ pra ver como √© lindo isso funcionando, rs)? Voc√™ pode usar isso, por exemplo, quando for atualizar um host xen, migrando¬†as VMs nele contidas para um outro host xen. Al√©m disso, voc√™ pode usar pra migrar VMs enquanto faz manuten√ß√£o em um host ou at√© planejar um script balanceador de carga entre hosts f√≠sicos (o que o Work Loading Balancig faz ‚Äì na vers√£o do Xenserver com lince√ßa). Enfim, as possibilidades s√£o muitas. S√≥ a produ√ß√£o e o dia a dia que vai te desafiar com situa√ß√µes como estas. √â s√≥ pensar sobre os benef√≠cios e planej√°-los bem! Para saber como migrar uma VM atrav√©s do XenCenter, acesse esse tutorial (http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-manage/xs-xc-vms-relocate. html). Tutoriais/ explica√ß√µes em v√≠deo: https://www. youtube. com/watch?v=hTlwlNjc86M https://www. youtube. com/watch?v=05Zc0ze5CpQ https://www. youtube. com/watch?v=vcPzrnrnYCU At√© breve! Abra√ßo! ¬† Refer√™ncias: http://support. citrix. com/article/CTX115813 http://www. amazon. com. br/Mastering-Citrix-Xenserver-Martez-Reed/dp/178328739X http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-manage/xs-xc-vms-relocate. html https://msinhore. wordpress. com/2012/09/20/storage-xenmotion/ https://www. youtube. com/watch?v=hTlwlNjc86M https://www. youtube. com/watch?v=05Zc0ze5CpQ https://www. youtube. com/watch?v=vcPzrnrnYCU https://www. citrix. com/content/dam/citrix/en_us/documents/products-solutions/storage-xenmotion-live-storage-migration-with-citrix-xenserver. pdf?accessmode=direct ¬†  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. "
    }, {
    "id": 21,
    "url": "http://localhost:4000/tecnologia/2016/02/17/xencenter.html",
    "title": "Xencenter",
    "body": "2016/02/17 -  O assunto agora √© sobre gerenciamento do XenServer. Neste caso, falaremos sobre XenCenter, que √© o software OFICIAL de ger√™ncia do XenServer.  Antes de come√ßar a falar sobre ele, muita gente (principalmente os #linuxUsers) tem a seguinte d√∫vida: Existe alguma ferramenta de ger√™ncia do XenServer que rode na web ou que rode em Linux, j√° que o XenCenter s√≥ funciona por padr√£o no Windows?  Resposta: Sim! Existem in√∫meras ferramentas que fazem esse tipo de gerenciamento do Xen¬†(assim como outros hypervisors [esxi, kvm. . ]) e que funcionam tanto na plataforma web como vers√£o desktops.  Ex:  Web:  &#8211; XenOrcherstra;  &#8211; XAC;  &#8211; Archipel;  GNU/Linux / Windows:  OpenXenManager; OpenXenCenter; Libvirt; Explicando:  Por√©m, caro usu√°rio, a bola da vez √© o seguinte dilema: Como ter efic√°cia/efici√™ncia junto com estabilidade? Se queres o primeiro, significa que voc√™ quer ter uma rela√ß√£o perfeita, al√©m de harmoniosa, entre que tipo de cliente (Web/Desktop) voc√™ ir√° usar para acessar sua infra-estrutura de virtualiza√ß√£o e as a√ß√µes que voc√™ espera o mesmo retornar a partir de seus comandos. Nem sempre √© padr√£o a estabilidade vir com a utiliza√ß√£o de ferramentas recomendadas oficialmente (como por muitos anos o internet explorer, arg‚Ä¶), mas, neste caso o que o ocorre √© que v√°rias ferramentas de terceiros (muito boas) como Xen Orcherstra e Archipel, em fase de crescimento na comunidade open source, ainda n√£o atingiram a maturidade suficiente para ATESTAR que podem realizar, com sucesso, todos os comandos para a√ß√µes realizadas em um ambiente de produ√ß√£o.  No ano de 2014 vi a oportunidade de pesquisa nesta √°rea (ainda) obscura, ent√£o, comecei a escrever minha monografia (especializa√ß√£o) sobre o tema, entitulada &#8220;An√°lise de ferramentas open-source de administra√ß√£o de ambientes heterog√™neos de virtualiza√ß√£o&#8221;. Defendi com sucesso a mesma em 2015.  Como resultados desta pesquisa, conclu√≠ que, a menos que voc√™ utilize estas ferramentas para medidas de montagem de ambientes futuros e testes, n√£o √© recomendado, em ambientes de alta criticidade. Imagine a seguinte situa√ß√£o: Acontece um congelamento da tela do programa (ou janela), por causa de um erro interno, no momento de uma opera√ß√£o de migra√ß√£o ou c√≥pia de uma VM. Voc√™ n√£o consegue mais visualizar os processos nem utiliza√ß√£o dos recursos do XenServer e nem os logs e n√£o sabe ver, rapidamente, se o processo travou, se o XAPI caiu ou se a VM est√° no ar ou se foi desligada.  Resultado: Os transtornos podem ser enormes. Fora a busca por problemas, em f√≥runs oficiais da ferramenta, que se torna limitada pelo fato de voc√™ j√° estar utilizando uma ferramenta para gerenciamento do XenServer que n√£o a oficial.  Aten√ß√£o: N√£o estou promovendo o uso do Windows nem desmotivando a colabora√ß√£o para com a comunidade cada vez mais livre. No entanto, preste bem aten√ß√£o no que voc√™ ir√° colocar em produ√ß√£o na infra-estrutura de seu trabalho (nas suas costas!). Teste bem e crie uma documenta√ß√£o sobre todos os testes que fizer com ela (listando o que est√° dando bugs e o que funciona &#8220;redondinho&#8221;).  Para saber como instalar o XenCenter, deixo aqui os procedimentos da documenta√ß√£o oficial:  http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-intro-welcome/xs-xc-intro-start. html  http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/installation. html#center_installation  Espero que tenham gostado da explica√ß√£o e das vantagens/desvantagens de utiliza√ß√£o de ferramentas n√£o oficiais.  Abra√ßos e at√© a pr√≥xima!  Refer√™ncias:  http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-intro-welcome/xs-xc-intro-start. html  http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/installation. html#center_installation  http://xenserver. org/open-source-virtualization-download. html "
    }, {
    "id": 22,
    "url": "http://localhost:4000/tecnologia/2016/02/17/upgradeupdate-no-xenserver-6-5.html",
    "title": "Upgrade/Update no XenServer 6.5",
    "body": "2016/02/17 - Segue abaixo uma descri√ß√£o resumida sobre a conceitua√ß√£o dos seguintes termos. Update: Atualiza√ß√£o (hotfixes) de procedimentos cr√≠ticos e n√£o cr√≠ticos de seguran√ßa, adi√ß√£o de drivers ou corre√ß√£o de bugs em pacotes ‚Üí Trivial; Upgrade: Atualiza√ß√£o de vers√£o do sistema de virtualiza√ß√£o XenServer, o que pode aglomerar melhorias nos drivers de dispositivos, adicionar funcionalidades, alterar vers√µes de SO usado (neste caso, o GNU/Linux CentOS) e aumento na capacidade de processamento do pr√≥prio sistema operacional ‚Üí (Geralmente cr√≠tica e menos trivial [l√™-se: trabalhosa]); O que ocorre? Muito sysadmin deixa o seu ambiente funcional, perfeitinho e redondinho e enquanto ele estiver funcionando n√£o meche nele porque ‚Äún√£o se meche com quem t√° queto‚Äù. Nos meus tempos usando XenServer e GNU/Linux aprendi uma coisa: Sempre tente deixar seus sistemas com as √∫ltimas vers√µes de atualiza√ß√£o. Updates s√£o lan√ßados para serem usados, eles cont√©m novos drivers, patches de seguran√ßa, novas vers√µes de softwares com bugs, otimiza√ß√£o de c√≥digo, enfim, n√£o ache que porque seu sistema est√° no ar que ele n√£o pode cair amanh√£ por um erro que voc√™ j√° devia t√™-lo imunizado. Te garanto que √© doloroso voc√™ ter que atualizar o seu ambiente com v√°rios hotfixes na fila de espera, pois cada update vai gerar um mini ataque card√≠aco em voc√™. Para realizar procedimento de update at√© a vers√£o 6. 2 do xenserver open source voc√™ teria que ir para a CLI (Linha de comando) e aplicar os passos mostrados neste tutorial: http://support. citrix. com/article/CTX132791 Curiosidade: Na √©poca em que t√≠nhamos que ir para a linha de comando na vers√£o sem licen√ßa paga, v√°rios usu√°rios da comunidade elaboraram suas pr√≥prias solu√ß√µes para realiza√ß√£o de update do ambiente. E √© disso que estou sempre falando: Compartilhamento de conhecimento!! Olhem os links: http://discussions. citrix. com/topic/310573-script-to-update-xenserver-with-powershell/ https://www. citrix. com/blogs/2014/09/10/scripting-automating-vm-operations-on-xenserver-using-powershell/ https://www. virtualexperience. no/2012/11/30/ctxupdate-a-powershell-script-to-download-any-citrix-updates/ Felizmente hoje, a partir da vers√£o 6. 5 (vers√£o atual at√© a √∫ltima atualiza√ß√£o deste tutorial), como o c√≥digo do XenCenter foi liberado (assim como o c√≥digo de quase todas as partes do XenServer), foi inevit√°vel liberar¬†a op√ß√£o no GUI do pr√≥prio XenCenter para realizar opera√ß√µes de update. Isso te d√° a possibilidade de deixar a cargo do¬†XenCenter baixar as atualiza√ß√µes e automaticamente aplicar e reiniciar (quando for o caso) o host, sem que se precise fazer de forma manual (apesar de ele tamb√©m disponibilizar a op√ß√£o de reiniciar o servidor manualmente). Por padr√£o, o XenCenter j√° vem configurado para sempre checar se existem atualiza√ß√µes dispon√≠veis para hosts xen nele conectados. Quando for tornada dispon√≠vel a update, ela vai aparecer na aba de notifica√ß√µes do seu XenCenter, e clicando com o bot√£o direito do mouse em cima dela voc√™ pode baixar ou obter informa√ß√µes sobre ela. Antes de atualizar, leia o m√°ximo poss√≠vel sobre a mesma afim de reconhecer os impactos esperados na pr√© e p√≥s atualiza√ß√£o do ambiente. Antes disso, realize backup de suas informa√ß√µes como metadados do pool, hosts, e VM. Saiba como realizar backup disso tudo neste aqui: Eu criei um desenho do fluxo processual que me baseio sempre na hora de realizar procedimentos de update em ambientes XenServer, o qual disponibilizo abaixo: ¬† ¬† Nele, mostro que devemos sempre checar a criticidade e impactos institucionais e t√©cnicos antes do procedimento de update, ap√≥s isso ser√° agendada a atualiza√ß√£o (se tiver paradas no servidor, dever√£o ser previamente relatadas), realizar backups do pool, Vms e xen host (quando houver recurso para o √∫ltimo), desabilitar o HA (requisito t√©cnico) e s√≥ depois iniciar a atualiza√ß√£o. Alguns procedimentos minuciosos, bem como todo o passo a passo e pr√© requisitos de configura√ß√£o necess√°rios para a realiza√ß√£o de um processo de update¬†podem ser conferidos neste link da documenta√ß√£o oficial: http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-updates/xs-xc-updates-applying. html Com rela√ß√£o √† Upgrades (atualiza√ß√£o de vers√£o) no Xenserver, existe a possibilidade de realiza√ß√£o do procedimento de maneira live, sem que as Vms parem, claro, se voc√™ tiver storage compartilhado. As Vms podem ser migradas de um Xenserver para outro com uma vers√£o igual ou superior da de origem, por exemplo de um xenserver 6. 2 para um 6. 5. Isso √© vantajoso neste tipo de atualiza√ß√£o, onde a troca das vers√µes √© crucial. Procedimentos e detalhes t√©cnicos de realiza√ß√£o de upgrade em um pool (Rolling Pool Upgrade) voc√™ pode continuar a leitura do link que passei anteriormente, at√© chegar nessa parte: http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-updates/xs-xc-upgrade. html E a mesma imagem para guiar voc√™ no processo de update (colocada acima) pode ser usada no processo de upgrade, claro, alterando os detalhes de ordem t√©cnica (na fase de ‚Äúinstall update‚Äù), mas, o fluxo geral √© o mesmo. Espero que tenha ficado claro para voc√™s a import√¢ncia e os procedimentos da documenta√ß√£o oficial que disponibilizei para voc√™. Grande abra√ßo. Refer√™ncias: http://support. citrix. com/article/CTX132791 http://discussions. citrix. com/topic/310573-script-to-update-xenserver-with-powershell/ https://www. citrix. com/blogs/2014/09/10/scripting-automating-vm-operations-on-xenserver-using-powershell/ https://www. virtualexperience. no/2012/11/30/ctxupdate-a-powershell-script-to-download-any-citrix-updates/ http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-updates/xs-xc-updates-applying. html http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-updates/xs-xc-upgrade. html ¬†  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. "
    }, {
    "id": 23,
    "url": "http://localhost:4000/tecnologia/2016/02/17/troubleshooting-resolucao-de-problemas-xenserver-6-5.html",
    "title": "Troubleshooting ‚Äì Resolu√ß√£o de problemas ‚Äì XenServer 6.5",
    "body": "2016/02/17 - Hoje, o assunto √© sobre troubleshooting, ou, para os menos familiarizados (adeptos do ‚Äúse est√° funcionando, est√° bom‚Äù rs) sobre resolu√ß√£o de PROBLEMAS!! At√© porque s√≥ tem problemas aqueles que fu√ßam na coisa! De acordo com a wikipedia: ‚ÄúTroubleshooting √© uma forma de resolver problemas, muitas vezes aplicada na repara√ß√£o de produtos ou processos falhados. √â uma busca sistem√°tica e l√≥gica pela raiz de um problema, de modo a que possa ser resolvido e o produto ou processo possa ficar novamente operacional. ‚Äù Portanto, partindo do princ√≠pio da busca sistem√°tica e l√≥gica, utilizarei sempre diagramas sist√™micos e fluxogramas para descrever processos de troubleshooting. Mas, porque trabalhar com fluxogramas em troubleshooting? Bem, a literatura educacional j√° tem uma muita pesquisa sobre isso ([1], [2], [3], por exemplo), mas em resumo e tomando como quest√µes tamb√©m pessoais: Entendeu ou quer que eu desenhe? Sim, esta frase, muitas vezes tratada de professor para uma sala de aula ou de um amigo que √© o ‚Äúsabich√£oz√£o‚Äù para com os outros, √© lembrada com um tom arrogante. O que quero √© tirar este r√≥tulo. No sentido literal, acredito que tudo deveria ser ‚Äúdesenhado‚Äù. A simples forma de uma desenho e a capacidade que ele tem de armazenar v√°rias informa√ß√µes em uma √∫nica imagem torna a imers√£o no conhecimento mais divertida e muito menos enfadonha. Para mim, este √© o verdadeiro papel do professor. Aquele que guia e consegue tornar trivial um conte√∫do complexo. Ler slides e livros at√© o google voice faz. Voc√™ pode perceber que na maioria dos meus tutoriais eu encaixo um desenho que tenta generalizar um processo ou a arquitetura de um sistema que estou explicando. Sempre com uma √∫nica imagem. Acredito neste tipo de imers√£o educacional. S√≥ n√£o esque√ßamos que as refer√™ncias escritas, mesmo que muitas vezes chatas, tem de ser levadas em suma considera√ß√£o. Desenhos s√£o generaliza√ß√µes que quase sempre n√£o s√£o perfeitas. A ideia dele √© fazer com que o leitor desperte um interesse ou que o processo de melhoria/releitura de um conte√∫do ocorra de forma mais eficiente (em menos tempo). Bem, em processos de resolu√ß√£o de problemas n√£o seria diferente. Na comunidade do xenserver temos muito pouca (ou nenhuma) documenta√ß√£o de troubleshooting atrav√©s de fluxogramas. Claro que usu√°rios do f√≥rum oficial (Discussion Citrix) e comunidades (xen-br, gc-br, Telegram Xenserver) ajudam bastante, mas, √© como se o conhecimento estivesse espalhado e disperso em f√≥runs e d√∫vidas de usu√°rios. N√£o h√° algo conciso, neste caso. Bem, uma vez fui aplicar 5 hotfixes em um xenserver 6. 2 (desculpe, me atrasei). Seguindo a documenta√ß√£o oficial era como roubar doce de crian√ßa (mil maravilhas), mas, na pr√°tica n√£o √© bem esse carnaval n√£o. √â como voc√™ recompilar um kernel Linux achando que ele n√£o vai dar pelo menos um bug. Inoc√™ncia. Ca√≠ em v√°rias armadilhas e situa√ß√µes adversas neste processo e sempre resolvia tentando encontrar solu√ß√µes naquele momento. Resultado: Sanei os problemas, atualizei meu ambiente e o trabalh√£o que deu n√£o foi documentado. POOFF na cara da comunidade (e na minha)! A partir da√≠, resolvi documentar, no estilo de fluxogramas, os processos de troubleshooting do xenserver em determinadas fases de manuten√ß√£o. Atualmente, realizei a cria√ß√£o de um fluxograma do processo referente ao troubleshooting de erros na aplica√ß√£o de updates no XenServer 6. 5. Disponibilizo este documento logo abaixo: Troubleshooting update ‚Äì XenServer 6. 5: Para muitos que sofrem com bugs quando v√£o atualizar seu ambiente, creio que este processo ir√° ser de grande ajuda. Meu objetivo √© fazer com que usu√°rios contribuam com processos que podem ser melhorados/otimizados no fluxograma. Remodelando o documento atrav√©s do perfil da comunidade, por meio de cr√≠ticas e sugest√µes de usu√°rios, poderemos compilar uma documenta√ß√£o ainda mais concisa do que disponibilizo aqui para voc√™. Com o passar do tempo creio que este post vai crescer bastante, pois novos fluxogramas ir√£o sendo disponibilizados por mim e pela comunidade. √â o que quero. Um abra√ßo! At√© mais. Refer√™ncias: https://pt. wikipedia. org/wiki/Troubleshooting https://discussions. citrix. com/ https://groups. google. com/forum/#!forum/xen-br https://groups. google. com/forum/#!forum/gc-br ¬†  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. "
    }, {
    "id": 24,
    "url": "http://localhost:4000/tecnologia/2016/02/17/storage-xenmotion-no-xenserver-6-5.html",
    "title": "Storage XenMotion no XenServer 6.5",
    "body": "2016/02/17 - Falei, anteriormente aqui sobre ‚ÄúXenMotion‚Äù. Hoje irei falar sobre ‚ÄúStorage XenMotion‚Äù. Storage XenMotion nos remete a ideia de ‚ÄúXenMotion entre storages‚Äù, e √© exatamente isso que este recurso (fascinante) faz. A partir dele, a VM pode ser transferida entre storages distintos, ou seja, os discos da VM (VDIs) podem ser migrados entre pools diferentes (entre dois sites XenServer). Tudo isso com o m√≠nimo de downtime poss√≠vel, pois geralmente se perde alguns pings quando se √© re-setado a placa de rede virtual e a rota √© alterada. E n√£o √© propaganda Tekpix, o recurso existe e √© dispon√≠vel com c√≥digo fonte liberado (a√™√™√™√™√™√™)!!! OBS: Convido voc√™ a ir no site da VMware e ver a bagatela que √© a licen√ßa com o recurso equivalente (VMware Storage vMotion) habilitado. Muitos dos requisitos necess√°rios para utilizar Storage XenMotion s√£o do pr√≥prio XenMotion. A lista com todos √© essa: ‚Äì O XenServer tools deve estar¬†instalado na VM; ‚Äì O host xen destino t√™m de ter a mesma ou vers√£o superior do XenServer do host de origem; ‚Äì O host xen destino t√™m que ter mem√≥ria suficiente para provisionar¬†a VM, caso contr√°rio a VM n√£o completar√° o processo de migra√ß√£o (isso √© meio l√≥gico, rs); ‚Äì O drive de DVD deve estar setado como empty (n√£o deve ter nenhuma . iso anexada ou nenhum cd/dvd dentro do drive do host); ‚Äì Se as CPUs dos hosts de origem e destino forem diferentes, ent√£o a CPU do servidor de destino deve suportar todos os recursos da do servidor de origem, o que, por consequ√™ncia, √© muito improv√°vel que as CPUs sejam de fabricantes diferentes, ou seja, √© muito recomend√°vel voc√™ trabalhar mesmo com o mesmo fabricante de processador (por exemplo, Intel ou AMD). ‚Äì N√£o √© poss√≠vel migrar VMs que tenham mais de um snapshot (leia aqui meu outro tutorial sobre snapshots e saiba o porqu√™ disso); OBS: Se a VM conter um snapshot, planeje a aloca√ß√£o de seu espa√ßo no storage do host destino. Caso n√£o entenda, o link acima sobre snapshots explica tudo isso. ‚Äì N√£o √© poss√≠vel migrar VMs que tenham mais que 6 VDIs anexados (como somente um VDI √© transferido por vez, creio que 7 VDIs iria comprometer bastante a VM em caso de um poss√≠vel falha na migra√ß√£o). Limita√ß√µes do Storage XenMotion: ‚Äì N√£o deve ser usado em ambientes com XenDesktop (Virtual Desktop Infrastructure); ‚Äì VMs que usam PCI pass-thru n√£o podem ser migradas; ‚Äì A perfomance da VM ir√° ser reduzida no processo de migra√ß√£o, ent√£o, cuidado com o hor√°rio de rush; ‚Äì Deve ser desabilitado qualquer HA ou WLB configurado no pool de origem ou destino; Storage XenMotion √© bastante utilizado em casos de Upgrade de Xenserver Standalone (hosts xen sem pool). Para saber como migrar uma VM atrav√©s do XenCenter, acesse esse tutorial (http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-manage/xs-xc-vms-relocate. html). V√≠deo demonstra√ß√£o do Storage XenMotion: https://www. youtube. com/watch?v=YWGu3tT6Z18 At√© breve! Abra√ßo! ¬† Refer√™ncias: http://www. amazon. com. br/Mastering-Citrix-Xenserver-Martez-Reed/dp/178328739X http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-manage/xs-xc-vms-relocate. html https://msinhore. wordpress. com/2012/09/20/storage-xenmotion/ https://www. youtube. com/watch?v=YWGu3tT6Z18 https://www. citrix. com/content/dam/citrix/en_us/documents/products-solutions/storage-xenmotion-live-storage-migration-with-citrix-xenserver. pdf?accessmode=direct http://ports. marllus. com/2016/02/15/xenmotion-no-xenserver-6-5 http://store. vmware. com/store/vmware/en_US/pd/productID. 284281000?src=WWW_eBIZ_productpage_vSphere_EnterprisePlus_Buy_US https://en. wikipedia. org/wiki/Desktop_virtualization ¬†  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. "
    }, {
    "id": 25,
    "url": "http://localhost:4000/tecnologia/2016/02/17/snapshots-no-xenserver-6-5.html",
    "title": "Snapshots no XenServer 6.5",
    "body": "2016/02/17 - E a√≠, tranquilo? Mas o que s√£o snapshots? S√£o arquivinhos (vou cham√°-los assim) que possuem informa√ß√µes a respeito de um ponto na vida de uma VM. Essa informa√ß√£o serve para o administrador XenServer, por exemplo, voltar para um momento em que ele fez uma altera√ß√£o na VM, como em uma p√≥s configura√ß√£o de um servi√ßo PHP ou antes de uma tr√°gica atualiza√ß√£o de sistema (kernel panic, huuuuuuu). Lembre do ponto de restaura√ß√£o presente no Windows. √â praticamente a mesma l√≥gica. Os snapshots ajudam bastante em tarefas como estas, como ‚Äúvoltar‚Äù uma VM no tempo (de volta para o futuro e mart macflein) al√©m de ser uma m√£o-na-roda para a realiza√ß√£o de backups completos dela. Para o caso de backups, eles s√£o usados para complementar o processo de backup √† quente (sem desligar a VM). Um dos m√©todos seria: Primeiro √© tirado o snapshot da VM, depois a partir do snapshot √© realizado uma c√≥pia completa para um arquivo √∫nico de backup (. xva). Por√©m, Snapshot, como muita gente acha, n√£o √© backup, de fato. Snapshot √© informa√ß√£o da VM em um momento, ou seja, esse arquivinho grava os metadados da VM (cpu, ram, network, etc. ) e o ponteiro que aponta para uma regi√£o do vDisk da VM naquele instante de tempo em que foi tirado o snapshot. Esse arquivo √© realmente pequenininho. Se voc√™ excluir sem querer um vDisk de uma VM e tentar recuper√°-lo por meio de um snapshot, sinto muito meu amigo, ele n√£o vai voltar no tempo trazendo o disco de volta, pois neste caso o pr√≥prio disco foi exclu√≠do. Como falei: Snapshot n√£o √© backup. Ele pode complementar um. Ent√£o, voc√™ deve estar pensando, como esse arquivinho √© pequeno, vou tirar v√°rios snaphots a cada 2 segundos para ter todos os instantes de tempo da minha VM e voltar na hora que eu precisar!! ahahah Maninho, n√£o fa√ßa isso. O motivo? Quando voc√™ tira um snapshot, outro disco (VDI ‚Äì Virtual Disk Image) √© criado na sequ√™ncia, gerando uma esp√©cie de √°rvore (com pai, filho, neto‚Ä¶), e caso o seu SR (Storage Repository) seja baseado em volume (LVM) esse novo disco ocupar√° um espa√ßo bem relevante! Para melhor explicar, desenhei o que acontece no SR (espa√ßo consumido) em um ambiente XenServer quando se cria um snapshot de uma VM, quando o SR √© iSCSI/FC ou Local LVM (onde os VDIs guardados est√£o em uma estrutura LVM) e quando √© NFS ou Local EXT (onde os VDIs s√£o guardados como arquivos VHD sem LVM). Para SR‚Äôs baseado em volume (iSCSI/FC, Local LVM): Para SR‚Äôs baseado em arquivo (NFS, Local EXT): ¬† Destas representa√ß√µes gr√°ficas, podemos deduzir, de forma clara, que: ‚Äì Voc√™ deve se preocupar com o espa√ßo alocado ao criar um snapshot quando estiver utilizando SR‚Äôs baseados em volume (Local LVM, iSCSI/FC). Fique sempre ligado na seguinte f√≥rmula do custo para se criar um snapshot: Custo (espa√ßo gerado no SR ap√≥s snapshot) = Dados escritos no disco atual + Tamanho do disco; Informa√ß√µes a respeito de cria√ß√£o, gerenciamento, exclus√£o, importa√ß√£o e exporta√ß√£o de snapshots voc√™ pode conferir nestes links: (Xencenter GUI) http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-snapshots/xs-xc-vms-snapshots-take. html (Linha de comando) http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/reference. html#id555786 Bem, de forma r√°pida expliquei qual o impacto da cria√ß√£o de snapshots em determinados tipos SR‚Äôs. Com essa informa√ß√£o, voc√™ j√° vai ter uma boa no√ß√£o t√©cnica para trabalhar com esses ‚Äúarquivinhos‚Äù. Por√©m, o assunto n√£o acaba por aqui. Se voc√™ quiser aprender mais sobre eles, como o que acontece quando snapshots s√£o exclu√≠dos (coalescing) e o espa√ßo gerado por esta opera√ß√£o, o limite de cria√ß√£o de snapshots e o porqu√™ disso, al√©m de outras informa√ß√µes ‚Äúninjas‚Äù (como o porque de n√£o ser poss√≠vel excluir um snapshot por falta de espa√ßo no xen host) voc√™ pode conferir nos links da refer√™ncia (principalmente aqui e aqui). At√© mais e grande abra√ßo! ¬† Refer√™ncias: http://avpaul. blogspot. com. br/2012/05/xenserver-losing-space-on-sr-and. html https://techblog. jeppson. org/2015/02/reclaim-lost-space-xenserver-6-5/ https://community. spiceworks. com/topic/319881-citrix-xenserver-6-0-2-out-of-disk-space http://pt. slideshare. net/davidmcg/top-troubleshooting-tips-and-techniques-for-citrix-xenserver-deployments http://discussions. citrix. com/topic/355832-how-to-reclaim-disk-space-from-deleted-snapshots-on-xenserver-62/ https://support. citrix. com/servlet/KbServlet/download/21626-102-714437/XenServer_Understanding_Snapshots. pdf http://xapi-project. github. io/features/snapshots/snapshots. html http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/reference. html#id555786 http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-snapshots/xs-xc-vms-snapshots-take. html ¬†  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. "
    }, {
    "id": 26,
    "url": "http://localhost:4000/tecnologia/2016/02/17/resizing-vdisks-vdis-xenserver-6-5.html",
    "title": "Resizing vDisks (VDIs) ‚Äì XenServer 6.5",
    "body": "2016/02/17 - Ol√°, tudo bem? Bem, o tema discutido de hoje ser√° redimensionamento de disco virtual no XenServer. Muitas vezes, por falta de planejamento ou fatos inesperados, o tamanho do disco de uma VM precisa ser aumentado. Por conta deste problema, alguns administradores, com a vis√£o est√°tica de sistemas n√£o virtualizados, n√£o conseguem compreender com clareza como redimensionar um disco virtual. Se voc√™ prestar aten√ß√£o, o XenServer deixa voc√™ alterar o tamanho de um¬†disco de uma VM. Para isso, √© s√≥ ir na aba configura√ß√µes do storage da VM e alterar o valor do tamanho dele. Mas, calma que o tamanho da parti√ß√£o la n√° VM n√£o vai alterar automaticamente! rs. (assim voc√™ quer demais). Primeiro vamos entender o que √© um disco de uma VM. A partir das imagens abaixo, explicarei sucintamente. O conjunto do relacionamento de objetos de storage do XenServer: Desenhado pela Citrix: Desenhado por¬†Gohar Ahmed: ¬† Desenhado por¬†Martez Reed: ¬† As tr√™s imagens demonstram os mesmos relacionamentos, s√≥ que com representa√ß√µes diferentes (para uma melhor did√°tica). Todo dispositivo relacionado com armazenamento (um disco r√≠digo, por exemplo) que √© conectado ao XenServer ser√° reconhecido como um PBD (dispositivo de bloco f√≠sico). Ent√£o, quando voc√™ cria um SR (reposit√≥rio de storage ‚Äì storage repository) dentro do XenServer, est√° justamente configurando este(s) PBD(s) para ser(em) o armazenamento deste SR. Dentro deste SR eu posso ter v√°rios VDI (imagem de disco virtual ‚Äì virtual disk image), que √© um objeto criado pelo XenServer que fornece uma abstra√ß√£o de um HDD (Disco F√≠sico) e cont√©m informa√ß√µes sobre a m√≠dia f√≠sica no qual se encontra (tipo de SR, se √© compartilh√°vel, se a m√≠dia f√≠sica √© somente leitura, etc. ). O VBD (Dispositivo de Bloco Virtual), por sua vez, √© uma abstra√ß√£o necess√°ria para fazer a ponte entre a VM e o VDI. Ele representa o conte√∫do do VDI. Caso n√£o existisse o VBD, a VM n√£o conseguiria utilizar o espa√ßo que o VDI oferece dentro do SR. O VBD d√° a possibilidade de a VM enxerg√°-lo como um dispositivo de bloco (neste caso um disco r√≠gido) que pode ser formatado em um tipo de sistemas de arquivos. Por fim, o VBD cont√©m atributos que ligam o VDI a VM, como QoS, atributos de leitura/escrita, se o disco √© boot√°vel, etc. Ainda n√£o entendeu? Deixa eu explicar melhor: Imagine um PC f√≠sico com um disco r√≠gido e voc√™ instalando um debian 8 nele. Blz n√©? Pois bem, analogicamente, temos uma VM sendo criada no XenServer com um disco virtual. Esse disco virtual √© o nosso VBD. Por tr√°s dele teremos o VDI correspondente, que por sua vez est√° dentro de um SR e este SR √© composto por um ou v√°rios PBDs. Agora, continuando o objetivo do tutorial, segue a pergunta: Como fa√ßo pra aumentar o tamanho de um disco de uma VM? Bem, como sabemos agora, um disco de uma VM √© um VBD, que por sua vez tem um correspondente VDI. At√© agora beleza! Os procedimentos gen√©ricos padr√£o para aumentar (expandir) um vDisk s√£o: 1- Ir no xencenter, configura√ß√µes do storage da VM e aumentar o tamanho do disco especificado (neste ponto, voc√™ aumentou o tamanho do VDI); 2 ‚Äì A partir deste ponto, o VBD ir√° ter um espa√ßo adicional (n√£o alocado) dentro dele, referente a esse aumento do VDI. Com qualquer ‚Äúfdisk -l‚Äù ou ‚Äúparted‚Äù voc√™ poder√° ver esse espa√ßo adicional; 3 ‚Äì Agora, voc√™ ter√° que fazer a expans√£o em n√≠vel de SO (sistema de arquivo) na VM, para fazer com que a parti√ß√£o que voc√™ quer aumentar (ou adicionar) tenha um novo tamanho, utilizando para isso do espa√ßo que foi inserido. 4 ‚Äì Ap√≥s os comandos de expans√£o, que podem variar se o disco tiver uma estrutura LVM (mais simples) ou sem LVM (um pouco mais de trabalho), voc√™ deve realizar um comando, em n√≠vel de SO, que vai redimensionar a parti√ß√£o para utilizar a nova quantidade de blocos. Geralmente em GNU/Linux o comando final √© o ‚Äúresize2fs /dev/particao‚Äù; OBS1:Caso a estrutura de parti√ß√µes esteja organizada na forma de LVM, voc√™ poder√° expandir um disco tamb√©m criando um novo disco para a VM (com o espa√ßo que quer utilizar). Quando a VM reconhecer esse novo VBD, voc√™ o formata e o transforma em PV (Volume f√≠sico ‚Äì estrutura LVM) e junta o mesmo ao PV existente na VM. O LVM tr√°s a grande vantagem (al√©m de simular um RAID 0) de tornar mais f√°cil e dar novas possibilidades √† manipula√ß√£o dos LVs (Volumes l√≥gicos ‚Äì pontos de montagem do SO ‚Äì /home, /usr, etc. . ) e o redimensionamento do tamanho deles. Bem, partindo destes passos listo abaixo uma s√©rie de tutoriais que poder√£o ser seguidos por voc√™ para redimensionar vDisks de Vms. Aumentando o espa√ßo de um vDisk com uma parti√ß√£o nativa Linux (sem LVM): https://www. rootusers. com/use-gparted-to-increase-disk-size-of-a-linux-native-partition/ Aumentando o espa√ßo de um vDisk com uma estrutura LVM atrav√©s da expans√£o do VDI: https://www. rootusers. com/how-to-increase-the-size-of-a-linux-lvm-by-expanding-the-virtual-machine-disk/ Aumentando o espa√ßo de um vDisk com uma estrutura LVM atrav√©s da adi√ß√£o de um outro VDI (como exemplificado no OBS1): https://www. rootusers. com/how-to-increase-the-size-of-a-linux-lvm-by-adding-a-new-disk/ Para expandir o tamanho de vDisks com SO MS Windows: http://support. citrix. com/article/CTX117630 Outros tutoriais e formas de expans√£o de vDisk: https://maanasroyy. wordpress. com/2012/06/03/resize-a-linux-vm-lvm-disk-in-xenserver/ https://codesilence. wordpress. com/2013/03/14/live-resizing-of-an-ext4-filesytem-on-linux/ OBS2 : Ainda n√£o √© poss√≠vel diminuir (shrink) o tamanho de um VDI dentro do Xenserver. O motivo eu creio que deva ser porque na redu√ß√£o de um VDI, a probabilidade de afetar uma √°rea com dados do sistema do usu√°rio seria bem alta. Mesmo com LVM, um algoritmo que analisasse as √°reas n√£o alocadas para serem liberadas do disco, al√©m de muito minucioso, poderia vir a corromper o sistema em uma exclus√£o errada, al√©m do que o usu√°rio teria que desalocar aquela regi√£o que seria liberada. Considero um problema tanto trabalhoso para resolver, mas n√£o imposs√≠vel. H√° um meio de realizar esse processo (n√£o muito ‚Äúortodoxo‚Äù ‚Äì pra n√£o dizer gambiarra). Os passos s√£o listados abaixo: ‚Äì Anexar um novo VDI na VM em quest√£o e criar uma parti√ß√£o em toda sua extens√£o (o tamanho do VDI deve ser de pelo menos do tamanho dos dados do disco); ‚Äì Utilizar algum programa de clone de disco e dar o boot via ISO (exceto o clonezilla, pois ele tem uma limita√ß√£o que j√°j√° explicarei); ex: HD clone, fsarchiver, FOG project, etc. ‚Äì Clonar o disco da VM jogando a imagem no VDI anexado na mesma; ‚Äì Criar uma nova VM no Xenserver com um disco menor do tamanho que voc√™ quer diminuir; ‚Äì Iniciar o programa de clonagem e anexar na VM o VDI que cont√©m a imagem exportada e restaurar a imagem do disco antigo para o novo disco; OBS3: O clonezilla t√™m a limita√ß√£o que na restaura√ß√£o de um disco, o tamanho do disco de origem t√™m de ser maior ou igual ao do disco de destino, o que √© √© invi√°vel na hora de um shrink. OBS4: Alguns usu√°rios na internet disseram que conseguiram shrink de discos como Clonezilla (mas somente quando o disco de destino era um pouco menor de tamanho que a origem). Voc√™ pode conferir os relatos aqui. Perceba que v√°rios tutorias utilizam o hypervisor Vmware, mas, n√£o se preocupe. O entendimento que voc√™ tem que ter √© de como funcionam as rela√ß√µes de PBDs, VDIs e VBDs com Vms. O processo de cria√ß√£o de disco ou aumento do tamanho usando Xenserver (Xencenter) ou Vmware (vCenter) √© s√≥ interface. Os passos gen√©ricos padr√£o (citados acima) s√£o os mesmos para qualquer hypervisor. Espero que tenha gostado! Grande abra√ßo. ¬† Refer√™ncias: https://www. schirmacher. de/display/INFO/How+to+increase+XenServer+virtual+machine+root+or+swap+ partition https://thewiringcloset. wordpress. com/2013/01/09/extending-a-root-filesystem-in-linux-without-lvm/ http://kb. vmware. com/selfservice/microsites/search. do?language=en_US&amp;cmd=displayKC&amp;externalId=1007907 http://discussions. citrix. com/topic/237812-extend-vm-disk-size-debian-guest/ https://www. rootusers. com/use-gparted-to-increase-disk-size-of-a-linux-native-partition/ https://www. rootusers. com/how-to-increase-the-size-of-a-linux-lvm-by-expanding-the-virtual-machine-disk/ https://www. rootusers. com/how-to-increase-the-size-of-a-linux-lvm-by-adding-a-new-disk/ https://www. rootusers. com/lvm-resize-how-to-decrease-an-lvm-partition/ http://support. citrix. com/article/CTX117630 https://maanasroyy. wordpress. com/2012/06/03/resize-a-linux-vm-lvm-disk-in-xenserver/ https://codesilence. wordpress. com/2013/03/14/live-resizing-of-an-ext4-filesytem-on-linux/ http://cleriston. com. br/post/110578666928/identificando-vdi-no-xenserver-via-command-line https://discussions. citrix. com/topic/361767-convert-vm-from-hyper-v-2012-to-xenserver-62/ https://www. miray. de/products/sat. hdclone. html http://www. fsarchiver. org/Fsarchiver_vs_partimage https://fogproject. org/ http://clonezilla. org/ https://community. spiceworks. com/topic/225979-clonezilla-restore-to-smaller-hard-drive http://clonezilla. org/clonezilla-live/doc/02_Restore_disk_image/advanced/09-advanced-param. php http://docs. vmd. citrix. com/XenServer/5. 5. 0/1. 0/en_gb/images/sr-diagram. png http://www. amazon. com/Implementing-Citrix-XenServer-Quickstarter-Gohar/dp/1849689822 http://www. amazon. com. br/Mastering-Citrix-Xenserver-Martez-Reed/dp/178328739X ¬†  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. "
    }, {
    "id": 27,
    "url": "http://localhost:4000/tecnologia/2016/02/17/rede-no-xenserver.html",
    "title": "Rede no XenServer",
    "body": "2016/02/17 - Ol√°! Hoje estarei te guiando a criar e configurar redes virtuais no XenServer 6. 5. Mas, primeiro iniciarei conceituando os termos: NIC: Adaptador de Rede (Network Interface Card). A NIC √© a placa de rede f√≠sica, propriamente dita, instalada no host XenServer. PIF: Interface F√≠sica de rede (Physical Network Interface). Este termo refere-se a um objeto criado pelo XenServer para representar uma NIC f√≠sica. VIF: Interface de Rede Virtual (Virtual Network Interface). √â um termo para batizar redes virtuais criadas dentro do XenServer. As VIFs s√£o sempre associadas com NICs existentes no host XenServer. Por exemplo, voc√™ pode criar 3 VIFs associadas a uma mesma NIC e neste caso, todo tr√°fego destas interfaces virtuais sair√£o/entrar√£o pela mesma NIC. Network: √â um virtual switch ethernet. Esse tipo de objeto tem uma cole√ß√£o de VIFs e PIFs conectada a ele. Cada host XenServer tem uma ou mais networks. Networks que n√£o t√™m associa√ß√£o com PIFs s√£o consideradas ‚Äúinternal‚Äù (o gateway √© o pr√≥prio hypervisor) e s√£o geralmente usadas para prover conectividade entre VMs em um mesmo host XenServer. VLAN: Definidas pelo padr√£o IEEE 802. 1Q, as Redes Locais Virtuais, habilitam uma simples rede f√≠sica para suportar m√∫ltiplas redes l√≥gicas. VLANs operam na camada 2 do modelo OSI e s√£o bem usadas para segregar redes distintas utilizando o mesmo canal f√≠sico para transmiss√£o. BOND: Jun√ß√£o de duas ou mais NICs afim de realizar agrega√ß√£o/failover de links. Os modos dispon√≠veis de BOND s√£o: active-active: como o nome diz, √© realizada o aumento da ‚Äúlargura de banda‚Äù (l√™-se: Taxa de transmiss√£o) da rede da VM. Por√©m, vale lembrar que se um tr√°fego √© enviado pela VM, atrav√©s de uma NIC (do bond), somente um caminho vai ser eleito para este tr√°fego em espec√≠fico. O algoritmo de an√°lise de tr√°fego de rede do ambiente faz um teste, a cada 10 segundos, de quanto a VM est√° enviando/enviou pela rede. Resumindo, os tr√°fegos das VMs que est√£o com o bond conectados a elas s√£o espalhados entre as NICs agrupadas do bond, mas, um √∫nico tr√°fego de uma VM n√£o pode ser espalhado em v√°rias NICs. Diferentemente ocorre com o storage multipathing (tipo de balanceamento de links entre host xen e storage), onde um tr√°fego pode ser dividido entre dois ou mais caminhos para o storage (em n√≠vel de bloco) (mais informa√ß√µes [aqui]). active-passive: Uma NIC do bond falha, a outra assume. LACP baseado em IP e porta: Funciona da mesma forma do bondig active-active, s√≥ que o algoritmo desse tipo de bond vai eleger o caminho para um tr√°fego baseado no ip e porta de origem, ou seja, v√°rias aplica√ß√µes podem usar caminhos diferentes nas NICs reais do bond. Isso √© legal se voc√™ quer distribuir o tr√°fegos de v√°rias aplica√ß√µes que usam portas distintas na rede de uma VM entre NICs do bond. LACP baseado em MAC address: A mesma coisa do anterior, por√©m, baseado no endere√ßo MAC da VIF da VM, ou seja, o roteamento √© selecionado em fun√ß√£o da VM. Esse balanceamento √© legal quando se vai utilizar v√°rias VMs dentro de um mesmo host sem muitas aplica√ß√µes funcionando em portas distintas. A escolha desses modos ir√° se basear no tipo de aplica√ß√£o que funcionar√° no ambiente, que tipo de arquitetura de rede foi planejada (quantidade de NICs, throughput, topologia, etc), que tipo de storage vai ser conectado, enfim, h√° uma s√©rie de pontos a serem levados em considera√ß√£o para se dizer ‚Äúesse √© melhor do que aquele‚Äù. OBS: XenServer 6. 5 SP1 suporta o limite de 16 NICs por host xenserver e cada VM suporta at√© 7 VIFs associadas. Desenhando: Para cria√ß√£o e gerenciamento de BONDs e outros tipos de objetos no xenserver, siga o manual oficial: http://docs. citrix. com/en-us/xencenter/6-2/xs-xc-hosts-manage/xs-xc-hosts-network/xs-xc-hosts-nics. html Praticando: OBS: MTU significa Unidade M√°xima de Transmiss√£o e isso √© um fator crucial (se bem configurado ‚Äì Jumbo Frames) para uma maior efici√™ncia na transmiss√£o de dados para a VM, por√©m, existem certas limita√ß√µes no Xenserver. Estas e outras informa√ß√µes mais detalhadas, voc√™ pode consultar no t√≥pico ‚Äú4. 3. 4. Jumbo frames‚Äù do ‚ÄúCitrix XenServer 6. 5 SP1 Administrator‚Äôs Guide‚Äú. Caso n√£o saiba sobre MTU e nem o que colocar como valor no campo quando estiver criando um BOND ou VLAN, deixe o padr√£o 1500 e siga em frente. Espero que tenha sido claro neste tutorial! Qualquer d√∫vida s√≥ perguntar nos coment√°rios! Abra√ßo. ¬† Refer√™ncias: http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/reference. html http://support. citrix. com/article/CTX135690#LACP bonds http://docs. citrix. com/content/dam/docs/en-us/xenserver/xenserver-61/xs-design-iSCSI-multipathing-config. pdf http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/reference. html#lacp-bond http://docs. citrix. com/en-us/xencenter/6-2/xs-xc-hosts-manage/xs-xc-hosts-network/xs-xc-hosts-nics. html  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. "
    }, {
    "id": 28,
    "url": "http://localhost:4000/tecnologia/2016/02/17/pv-hvm-hvm-com-drivers-pv-pvhvm-pvh-no-xenserver-a-sopa-de-letrinhas-da-virtualizacao.html",
    "title": "PV, HVM, HVM com Drivers PV, PVHVM, PVH no XenServer (A sopa de letrinhas da virtualiza√ß√£o)",
    "body": "2016/02/17 - Ol√°. Hoje falarei sobre os termos PV, HVM e seus derivados. Sinceramente, esse assunto √© meio tenso, pois, na internet vejo muita confus√£o sobre isso. Modos, grupos, grupos de modos, melhorias, tipos de virtualiza√ß√£o, emula√ß√£o‚Ä¶ √© uma sopa de letras e que no final s√≥ machuca a cabe√ßa de quem tenta entender. Por isso, vou tentar (espero), da melhor forma poss√≠vel, explicar pra voc√™ qual a diferen√ßa entre estes modos, suas melhorias e as vantagens e desvantagens de usar um ou outro, parafraseando o xenwiki, sem que voc√™ sofra um aneurisma! rs Na verdade, tudo surgiu com o modo ‚ÄòTotalmente Virtualizado (Fully Virtualized ‚Äì FV) na IBM¬†em 1960‚Ä≤. Mas s√≥ era eficiente us√°-lo nos¬†mainframes da IBM, pois o mesmo era muito lento em arquiteturas x86. J√° em 2003, com o lan√ßamento do projeto Xen 1. 0, foi criado o modo: PV (Paravirtualization ou OS Assisted Virtualization): Quando uma VM √© executada neste modo, o seu kernel foi modificado na tentativa de proporcionar maior desempenho com utiliza√ß√£o de hypercalls. Hyper. . o qu√™? ‚ÄúSimples‚Äù, por meio deste kernel modificado a VM ‚Äúsabe‚Äù que est√° sendo virtualizada. Isto quer dizer que VMs podem realizar chamadas diretamente para o hypervisor (essa caracter√≠stica √© conhecida como hypercalls) e isso torna o acesso ao hardware muito mais eficiente. OBS: Essas modifica√ß√µes no kernel, descritas acima, geralmente s√£o referentes ao kernel Linux. O Windows hoje n√£o tem kernels paravirtualizados (at√© tentaram, em v√£o). Por√©m, o tempo foi passando e surgiram tecnologias de hardware na tentativa de melhorar e tornar poss√≠vel a ‚ÄúFull Virtualization ‚Äì FV‚Äù na arquitetura x86. Foi pelo advento destas tecnologias que o projeto Xen, em 2005, lan√ßou o suporte √† HVM Guests, que conhecemos como o modo: HVM (Hardware Virtual Machine ‚Äì tamb√©m chamado de ‚ÄòHardware Assisted Virtualization‚Äô e ‚ÄòHardware Extensions to Full Virtualization‚Äô): Neste modo, o hypervisor Xen usa o software ‚ÄúQemu‚Äù para emular (via software ‚Äì grande desvantagem)¬†v√°rias partes do host f√≠sico. Mas foi a partir das extens√µes HVM (criadas pela Intel e AMD e que fazem uma esp√©cie de emula√ß√£o de hardware) que foi poss√≠vel ‚Äúhabilitar‚Äù esse modo na arquitetura x86. Essas¬†extens√µes turbinam o acesso da VM √† CPU do host f√≠sico, justamente onde o modo FV era mais fraco. Hoje, praticamente qualquer processador de m√©dio porte j√° conta com este tipo de tecnologia (Intel VTx e AMD SVM). Muito se v√™ os termos HVM e Full Virtualization como sendo iguais ou que um √© a evolu√ß√£o do outro, mas, podemos dizer que as extens√µes HVM foram um meio para que fosse poss√≠vel a utiliza√ß√£o do FV na arquitetura x86. Como praticamente toda a literatura se refere a HVM como um modo, tamb√©m seguiremos a pr√°tica. S√≥ n√£o se engane nos conceitos. Pois bem, a partir daqui √© poss√≠vel perceber que existem vantagens e desvantagens na utiliza√ß√£o do modo PV bem como tamb√©m no modo HVM. Partindo desse princ√≠pio, por que n√£o tentar juntar o melhor dos dois mundos e gerar outras formas de virtualiza√ß√£o? Foi o que fizeram v√°rias pessoas interessadas nisso. E¬†ao longo dos anos, come√ßaram a surgir melhorias, que tentavam utilizar a vantangem dos dois mundos, ou seja, a paravirtualiza√ß√£o do modo PV com a extens√£o de virtualiza√ß√£o que pode ser usada no modo HVM. Dentre essas¬†melhorias (vou cham√°-las de derivados h√≠bridos), podemos citar: HVM com drivers PV: Modo HVM com os drivers de disco e rede paravirtualizados. Um exemplo disso, basicamente, √© uma VM Windows com o XenServer tools (xentools) instalado. Este XenServer tools √© um pacote de software que cont√©m os drivers de disco e rede paravirtualizados para a VM Windows. OBS: No caso de VM Linux, esses drivers j√° v√™m embutidos na instala√ß√£o. PVHVM: Modo HVM com a paravirtualiza√ß√£o dos drivers de disco e rede (xentools), controladores de interrup√ß√£o e temporizadores. Um exemplo disso s√£o as novas vers√µes dos sistema operacionais suportados pelo XenServer 6. 5 (RHEL 7, CentOS 7, Oracle Linux 7, Ubuntu 14. 04). De acordo com a Citrix, todas as novas VMs instanciadas a partir destas vers√µes ser√£o criadas em modo HVM, pois estes sistemas operacionais suportam, nativamente, alterna√ß√£o da execu√ß√£o entre HVM e PV em determinadas tarefas. OBS: Segundo Olivier, a vers√£o padr√£o do Debian 7 (Wheezy) tamb√©m √© compilado com estes drivers, ou seja, se voc√™ instal√°-lo como ‚ÄúOther media install‚Äù no XenServer 6. 5, ter√° uma VM PVHVM. PVH: Modo PV com a extens√£o de hardware em instru√ß√µes privilegiadas e tabelas de p√°ginas (ui ui ui, desculpa a√™). Esse modo com certeza √© o maior refinamento do modo PV (com a jun√ß√£o das sempres legais extens√µes HVM) e talvez seja o que ficar√° e se perpetuar√° por bastante tempo em ambientes de virtualiza√ß√£o com Hypervisor Xen. Mas, ainda n√£o est√° dispon√≠vel para ser testado no XenServer 6. 5, s√≥ na vers√£o do xen source 4. 4 (e ainda engatinhando). A imagem abaixo representa, no lado esquerdo, os modos existentes e suas respectivas melhorias (filhos h√≠bridos) e no lado direito um comparativo do que cada modo e melhoria tem em comum ou que difere do outro, se tornando mais perform√°tico ou pior. OBS: Como citado anteriormente, perceba que o Windows suporta somente os dois primeiros modos/derivados, ‚ÄúHVM‚Äù e ‚ÄúHVM com drivers PV‚Äù. Mas, por qu√™? Porque, para suportar a partir da melhoria ‚ÄúPVHVM‚Äù seria preciso a paravirtualiza√ß√£o do APIC (Controlador Avan√ßado de Interrup√ß√£o Program√°vel), consequentemente, seria necess√°rio que o kernel do windows fosse recompilado com essa nova caracter√≠stica (reclame para a microsoft, rs). Clique na imagem para aumentar o tamanho.  A partir destes modos e suas melhorias, pode-se formular algumas perguntas: Qual o melhor modo, PV ou HVM? Depende. Em arquiteturas x86 o mais r√°pido √© PV, j√° em x86_64, √© o HVM. Isso se deve a mudan√ßas realizadas em x86_64 pela AMD que acabaram deixando um pouco mais lenta a paravirtualiza√ß√£o nessa arquitetura. Por√©m, pela preocupa√ß√£o com a mem√≥ria extra despendida no ‚Äúqemu‚Äù para a emula√ß√£o da placa m√£e e dispositivos PCI, muitos usu√°rios preferem utilizar PV em VMs 64bits, mesmo que mais lento. Inclusive, a Citrix recomenda a utiliza√ß√£o de PV (quando n√£o h√° a possibilidade de PVHVM). Como escolher o modo ou melhoria para utilizar no meu ambiente XenServer 6. 5? Deixo aqui um fluxograma para lhe ajudar na escolha dos modos/derivados h√≠bridos para uma m√°quina virtual x86_64, que, segundo recomendado pelo pr√≥prio xen project, ir√° servir para a maioria dos casos: Exceto as distros RHEL 7, CentOS 7, Oracle Linux 7, Ubuntu 14. 04 e Debian 7 (que suportam PVHVM), e analisando o fluxograma acima, voc√™ poder√° cair no modo HVM com Drivers PV, certo? Pois bem, eu, particularmente, utilizo o modo PV, mesmo em VMs (Guests) 64 bits. Apesar da rapidez adicional que eu poderia ganhar utilizando HVM, alguns fatores me levaram a adotar o PV: Recomenda√ß√£o da Citrix na utiliza√ß√£o dos templates dela (PV), e vulnerabilidades importantes de seguran√ßa que afetavam somente VMs em HVM (como relatadas¬†aqui, aqui e aqui). Isso me fez repensar a import√¢ncia do uso do PV at√© que se tivesse um modo ou melhoria que fosse MUITO vantajoso em termos de efici√™ncia. √â o caso do aparecimento do PVHVM. A pr√≥pria Citrix fala isso na documenta√ß√£o oficial e diz que vai come√ßar a trabalhar com ele nos Guests que citei no in√≠cio do par√°grafo, apesar de n√£o falar o nome PVHVM (creio que para n√£o gerar um aneurisma no usu√°rio, rs). De forma r√°pida e direta (para a maioria dos casos): Se VM GNU/Linux e BSD: Use PVHVM, nos sistemas operacionais suportados. Caso cont√°rio, use PV. Se VM Windows: Use HVM com drivers PV, nos sistemas operacionais suportados. Se n√£o, use HVM. E o modo PVH, que √© melhor? Estou aguardando poder test√°-lo no XenServer. Mas, at√© agora s√≥ por gambiarras e ainda n√£o √© oficial, apesar de ele ter sido liberado na vers√£o do xen 4. 4, que o XenServer 6. 5 incorpora. Vamos ter que esperar um tempo at√© que comece a ser implementado de forma est√°vel nas distros. Bem, espero que tenha gostado do tutorial e da hist√≥ria de como surgiram os modos e suas melhorias e que saiba agora os benef√≠cios e malef√≠cios de cada um. O que n√£o lhe impede de realizar testes para a comprova√ß√£o destes dados (e contribuir para este tutorial). Para mais informa√ß√µes, consulte as refer√™ncias (espetaculares e que me ajudaram muito para a elabora√ß√£o desse texto). ¬† Refer√™ncias http://hostel. ufabc. edu. br/~marcelo. nascimento/BC1518Q3/arquivos/virtualizacao_cap4-v2. pdf https://xen-orchestra. com/blog/debian-pvhvm-vs-pv/ http://wiki. xenproject. org/wiki/Understanding_the_Virtualization_Spectrum https://blog. xenproject. org/2012/10/23/the-paravirtualization-spectrum-part-1-the-ends-of-the-spectrum/ https://blog. xenproject. org/2012/10/31/the-paravirtualization-spectrum-part-2-from-poles-to-a-spectrum/ http://xenserver. org/blog/entry/creedence-debian-7-x-and-pvhvm-testing. html http://xenproject. org/downloads/windows-pv-drivers. html https://wiki. xenproject. org/images/c/c2/Xen-mode-flow. png http://www. gossamer-threads. com/lists/xen/devel/363836 http://www. brendangregg. com/blog/2014-05-07/what-color-is-your-xen. html http://www. gta. ufrj. br/grad/09_1/versao-final/virtualizacao/xen. html http://ovmnaveia. blogspot. com. br/2012/09/pvm-paravirtualizado-ou-hvm. html http://www. informit. com/articles/article. aspx?p=2233978 https://pt. wikipedia. org/wiki/Advanced_Programmable_Interrupt_Controller http://www. vmware. com/files/pdf/VMware_paravirtualization. pdf https://en. wikipedia. org/wiki/IBM_CP-40 https://sourceforge. net/p/xen/mailman/message/5533663/ http://lwn. net/Articles/109789/ https://en. wikipedia. org/wiki/Full_virtualization https://www-950. ibm. com/events/wwe/grp/grp019. nsf/vLookupPDFs/7%20-%20VM-45-JahreHistory-EA-J-Elliott%20%5BKompatibilit%C3%A4tsmodus%5D/$file/7%20-%20VM-45-JahreHistory-EA-J-Elliott%20%5BKompatibilit%C3%A4tsmodus%5D. pdf http://lwn. net/Articles/52033/ https://sourceforge. net/p/xen/news/2003/10/xen-10-stable-released/ https://www. qnap. com/i/en/qa/con_show. php?op=showone&amp;cid=258 http://wiki. xenproject. org/wiki/Linux_PVH http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/guest. html#id533926 http://pt. slideshare. net/xen_com_mgr/performance-tuning-xen-18477250 https://xen-orchestra. com/blog/debian-pvhvm-vs-pv/ http://www. brendangregg. com/blog/2014-05-09/xen-feature-detection. html http://wiki. xen. org/old-wiki/xenwiki/XenLinuxPVonHVMdrivers. html ¬†  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. "
    }, {
    "id": 29,
    "url": "http://localhost:4000/tecnologia/2016/02/17/pools-no-xenserver-6-5.html",
    "title": "Pools no XenServer 6.5",
    "body": "2016/02/17 - Ol√°, Agora explicarei sobre pool de recursos, bem como citar sua defini√ß√£o e requisitos para ser implantando. Um pool de recursos √© um termo usado para designar um grupo de instala√ß√µes XenServer (hosts xen). Esse grupo pode ser um laborat√≥rio de hosts xen de teste, produ√ß√£o ou qualquer outro conjunto de servidores em opera√ß√£o para um determinado fim. Em todo e qualquer pool existir√° o membro master (host que roteia a comunica√ß√£o para outros membros do pool quando necess√°rio) e os restantes slaves. Cada membro t√™m consigo um base de dados que cont√©m informa√ß√µes a respeito de todos os membros existentes no pool, ou seja, qualquer host no pool sabe quem √© master e quem √© slave e quem est√° no pool. Quando neste pool existe um storage compartilhado, que √© um local onde todos os hosts xen t√™m acesso para leitura/escrita de dados, VMs podem ser migradas, (quase) sem dowtime, entre estes hosts. Essa migra√ß√£o √© o recurso no XenServer chamado XenMotion. Se a caracter√≠stica de Alta Disponibilidade (HA) estiver habilitada no pool e um host xen falhar/desligar/se perder/bugar, qualquer VM (definida por voc√™) ser√° movida automaticamente para outro host xen vivo, bem como um novo host membro master ser√° eleito, se este host perdido for o membro master do pool. O limite m√°ximo √© de 16 hosts xen em um mesmo pool. Existem dois tipos de pools, os homog√™neos e os heterog√™neos. Em um pool homog√™neo, as seguintes caracter√≠sticas s√£o necess√°rias: ‚Äì As CPU‚Äôs de todos os hosts xen no pool devem ser as mesmas (em modelo, marca e caracter√≠sticas); ‚Äì Todos os hosts xen devem ter a mesma vers√£o de software XenServer, bem como os mesmos hotfixes (updates) aplicados; J√° em um pool heterog√™neo: ‚Äì As CPU‚Äôs de todos os hosts xen precisam ter somente os mesmos fabricantes (ex. AMD, Intel). ‚Äì As CPU‚Äôs de todos os hosts xen devem ter suporte √† tecnologia Intel FlexMigration (em caso de CPU‚Äôs Intel) ou AMD Enhanced Migration (em caso de CPU‚Äôs AMD); ‚Äì Todos os hosts xen devem ter a mesma vers√£o de software XenServer, bem como os mesmos hotfixes aplicados; Voc√™ deve estar se perguntando qual tipo de pool utilizar, se homog√™neo ou heterog√™neo. O recomend√°vel √© usar CPU‚Äôs com o m√°ximo de equival√™ncia poss√≠vel, assim, a compatibilidade √© melhor aproveitada entre elas, possibilitando transtornos m√≠nimos em processo migrat√≥rios que possam vir a calhar no ambiente. Isso refor√ßa a ideia de hoje ainda n√£o ser trivial uma total compatibilidade entre CPU‚Äôs distintas. Estas tecnologias supracitadas, como FlexMigration (Intel), nada mais s√£o que ‚Äúgambiarras tecnol√≥gicas‚Äù criadas afim de resolverem parte destes problemas. ¬†No futuro, eu espero que a informa√ß√£o em tornos das CPU‚Äôs seja totalmente abstrata (de forma nativa) para o sistema operacional, consequentemente para a compila√ß√£o de aplica√ß√µes e VM‚Äôs em ambientes virtualizados. Sem d√∫vida isso facilitar√°, e muito, o processo de realoca√ß√£o de servi√ßos neste tipo de infra-estrutura, t√£o vol√°til que √©. Abaixo eu listo uma s√©rie de requisitos necess√°rios (e obrigat√≥rios) ao host xen para se criar um pool homog√™neo. ‚Äì Ele n√£o deve ser membro de um pool j√° existente; ‚Äì Ele n√£o deve ter nenhum storage compartilhado configurado; ‚Äì Caso o pool j√° tenha sido criado e voc√™ queira adicionar um host ao mesmo, este host n√£o deve ter nenhuma VM rodando ou em estado de suspens√£o ou nenhuma opera√ß√£o ativa em progresso na VM, como um desligamento, por exemplo; Outros requisitos bem importantes, que tamb√©m devem ser seguidos: ‚Äì Cheque se o servi√ßo de tempo est√° sincronizado entre todos os hosts (use algum servidor NTP confi√°vel, se poss√≠vel); ‚Äì N√£o configure bond na interface de rede de ger√™ncia (se for fazer isso, fa√ßa ap√≥s a cria√ß√£o do pool); ‚Äì Certifique-se que o ip de ger√™ncia do pool √© est√°tico (configurado manualmente ou ‚Äúamarrando‚Äù por DHCP); Passos para se criar um pool: Abra o XenCenter e siga os passos abaixo:    Abra a caixa de di√°logo ‚ÄúNew Pool‚Äù e depois clique na toolbar ‚ÄúNew Pool‚Äù.     Coloque um nome para o novo pool e uma descri√ß√£o opcional e selecione o servidor que ser√° o pool master. Adicione tamb√©m o restante dos servidores que compor√£o o pool, atrav√©s da lista de membros adicionais que aparecer√° ou adicionando um novo membro atrav√©s do bot√£o ‚ÄúAdd New Server‚Äù.     Clique em ‚ÄúCreate Pool‚Äù para criar o pool e feche a caixa de di√°logo     Pronto, pool criado!  Para adicionar um host a um pool j√° criado:    Clique com o bot√£o direito em cima do pool e v√° op√ß√£o ‚ÄúAdd Server‚Äù.     Na janela que abrir√°, digite o ip do servidor e as credenciais do mesmo e clique em ‚ÄúAdd‚Äù.     Pronto, servidor adicionado!  Informa√ß√£o adicional: A Citrix recomenda que voc√™ tenha um storage compartilhado em m√£os antes de criar um pool, pois este √© um pr√©-requisito para voc√™ poder utilizar a maioria dos recursos (al√©m de outros) que citei no in√≠cio do artigo. Refer√™ncias: http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-pools/xs-xc-pools-about. html http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/reference. html#hosts_and_pools  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. "
    }, {
    "id": 30,
    "url": "http://localhost:4000/tecnologia/2016/02/17/p2v-v2v-conversao-de-ambientes-xenserver-6-5.html",
    "title": "P2V / V2V ‚Äì Convers√£o de ambientes ‚Äì XenServer 6.5",
    "body": "2016/02/17 - Bem, P2V e V2V s√£o termos que remetem √† migra√ß√£o de sistemas. E migra√ß√£o (desde antes de cristo ‚Äì 40 anos de migra√ß√£o dos hebreus a Cana√£¬†rs) √© um processo doloroso e √†s vezes dispendioso (de tempo e recursos f√≠sicos). P2V (Physical to Virtual): √â usado quando voc√™ quer transformar uma m√°quina f√≠sica para virtual (Migra√ß√£o de um PC ou notebook para um virtualizador ‚Äì ex. Xenserver); V2V (Virtual to Virtual): √â usada quando voc√™ quer transformar uma m√°quina virtual em outra virtual (geralmente quando se vai migrar Vms entre Virtualizadores distintos ‚Äì ex. Vmware-&gt;Xenserver) Bem, em meus tutoriais gosto sempre de explicar o ‚Äúestado da arte‚Äù ou o ‚Äúalicerce‚Äù para constru√ß√£o de seu pr√≥prio conhecimento atrav√©s de informa√ß√µes precisas e minuciosas do ponto estudado. Na minha cabe√ßa, somente um how-to passo-a-passo, sem os porqu√™s, torna-se meramente um ‚Äúcale a boca e siga-me‚Äù. √â por isso que, em quase todos os tutoriais que fiz, quando chego na parte da ‚Äúm√£o na massa‚Äù posto links com os procedimentos. Se voc√™ consegue levantar quest√µes a respeito do que queres fazer e planejar as solu√ß√µes para tal, at√© um rob√¥ far√° o passo a passo. Te garanto que se sempre seguir este princ√≠pio, sua vida mudar√°, pois os porqu√™s se tornar√£o cada vez mais frequentes. Lembre-se disso. Bem, voltando, sem mais delongas, irei apresentar (em passos) como ocorre o processo de migra√ß√£o de uma m√°quina f√≠sica ou virtual para uma VM no Xenserver 6. 5. Estes procedimentos s√£o gen√©ricos. Os softwares utilizados para realizar as opera√ß√µes podem ser v√°rios. No final, colocarei tutoriais para voc√™ seguir que citam ferramentas √∫teis para a realiza√ß√£o dos procedimentos.  Criar uma imagem do disco r√≠gido da m√°quina;1. 1. Neste passo, geralmente se inicia um cd/usb de boot de algum programa de backup (clonezilla, G4L, etc) na m√°quina e √© copiado o disco r√≠gido inteiro, gerando uma imagem no final do processo. Essa imagem dever√° ser guardada.  Criar uma VM com as mesmas caracter√≠sticas de CPU, mem√≥ria RAM, disco r√≠gido e SO (caso tenha template para ela na lista de templates do XenServer ‚Äì caso contr√°rio utilizar o template other media install). 2. 1. Esse passo √© bem simples, s√≥ n√£o instale nenhum SO na VM. Somente crie-a e deixe l√° desligada.  Iniciar a VM por cd/usb de boot a partir do mesmo programa que fez backup da m√°quina de origem e restaurar essa imagem no novo disco que voc√™ acabou de criar para a VM. 3. 1. Quando o processo de restaura√ß√£o concluir, geralmente ocorre de a VM n√£o conseguir iniciar ainda, pois as informa√ß√µes do initrd/grub (caso a m√°quina seja GNU/Linux) ainda est√£o apontando para o kernel antigo. Se a VM em quest√£o n√£o for GNU/Linux, ent√£o pule para o passo 5.  Atualizar imagem initrd, grub e caminhos dos discos no /etc/fstab4. 1. Nesta etapa, basicamente, voc√™ ter√° que montar todos os diret√≥rios da VM em chroot a partir de um livecd/usb Linux e ent√£o criar uma nova imagem para o initrd.  Ap√≥s isso, voc√™ ter√° uma VM funcional dentro do seu ambiente de virtualiza√ß√£o Xenserver. Somente esses 5 passos s√£o necess√°rios para a migra√ß√£o V2V ou P2V Windows/GNU/Linux onde o destino √© o Xenserver 6. 5 Passos adicionais s√£o necess√°rios para a otimiza√ß√£o da VM, como a convers√£o da mesma de HVM para PV (modos de virtualiza√ß√£o ‚Äì se n√£o sabe o que √© isto clique aqui) e a instala√ß√£o do xentools (drivers xen para Network/disco ‚Äì se n√£o sabe o que √© clique aqui) Bem, como falei, esses s√£o os passos gen√©ricos para se subir uma VM em um ambiente de virtualiza√ß√£o Xenserver onde a origem era uma VM advinda de um outro sistema de virtualiza√ß√£o ou de uma m√°quina f√≠sica. O PDF a seguir, originado de um colega (Germano Dias) da institui√ß√£o onde trabalho (Universidade Federal do Cear√°) ir√° embasar a parte pr√°tica de todas as informa√ß√µes que repassei neste fluxo. Nele √© usado o software Clonezilla (GPL) para realizar o backup e restore dos discos. Baixe aqui o PDF. Outros tutoriais podem servir como complemento ou at√© alternativa para esse procedimento: Tutorial usando o comando dd: http://www. lewan. com/blog/2011/04/14/p2v-conversion-of-linux-virtual-machine-for-xenserver Outro tutorial usando o clonezilla: http://www. ibm. com/developerworks/br/library/l-clonezilla/ Voc√™ pode usar tamb√©m o programa G4L Ghost 4 Linux para backup do disco (em alternativa ao clonezilla) e que vem no pacote Hiren‚Äôs bootCD 15. 2: http://www. hiren. info/pages/bootcd Bom, espero que tenham gostado e at√© a pr√≥xima! D√∫vidas e sugest√µes ser√£o bem vindas! Abra√ßos! ¬† Refer√™ncias: http://www. ibm. com/developerworks/br/library/l-clonezilla/ http://www. lewan. com/blog/2011/04/14/p2v-conversion-of-linux-virtual-machine-for-xenserver http://www. ppgia. pucpr. br/~jamhour/RSS/TCCRSS08A/Diego%20Lima%20Santos%20-%20Artigo. pdf http://www. hiren. info/pages/bootcd http://clonezilla. org/lecture-materials/015_OSC_Tokyo_Spring_2014/slides/OSC2014-Tokyo-Spring. pdf http://ports. marllus. com/wp-content/uploads/2016/02/GNU-Linux-P2V-e-V2V-para-XenServer-6. 5. pdf http://ports. marllus. com/2016/02/12/o-xenserver-tools-xenserver-6-5 http://ports. marllus. com/2016/02/12/pv-hvm-hvm-com-drivers-pv-pvhvm-pvh-no-xenserver-a-sopa-de-letrinhas-da-virtualizacao http://www. webartigos. com/artigos/quarenta-anos-da-caminhada-do-povo-de-deus-no-deserto/77137/ ¬†  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. ¬† "
    }, {
    "id": 31,
    "url": "http://localhost:4000/tecnologia/2016/02/17/o-xenserver-tools-xenserver-6-5.html",
    "title": "O XenServer Tools ‚Äì XenServer 6.5",
    "body": "2016/02/17 - Ol√°. Td bem? Bem, o que √© o XenServer Tools? Xen Tools (carinhosamente apelidado) √© um pacote de drivers de rede e disco paravirtualizados. Existe tanto a vers√£o para Guests Windows quanto GNU/Linux e o XenServer j√° traz, por padr√£o, este pacote habilitado para ser instalado em uma VM com alguns destes sistemas operacionais instalados (e suportados). O Xen Tools √© importante? Sem d√∫vida. Neste t√≥pico¬†falei muito sobre virtualiza√ß√£o completa e paravirtualiza√ß√£o. Mas, complementando este assunto, o Xen Tools cont√©m drivers paravirtualizados de disco e rede, o que muito contribui no aumento de performance destas VMs no que diz respeito ao acesso ao disco virtual (vDisk) e transmiss√£o/recep√ß√£o de tr√°fego de rede. Tenho que instalar, obrigatoriamente, o Xen Tools? Voc√™, absolutamente, n√£o √© obrigado a instal√°-lo em uma VM rec√©m criada (e nem eu vou lhe denunciar √† Citrix porque voc√™ se recusa), mas, saiba que se esta VM tiver suporte para essa instala√ß√£o, voc√™ estar√° deixando de ganhar bastante performance. E quais SOs das VMs s√£o suportados para instalar o Xen Tools? Todas as vers√µes dos SOs que cont√©m na lista de templates dispon√≠veis no XenServer. A lista destes sistemas operacionais est√° dispon√≠vel aqui (http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/guest. html#creatingVMs_supported_OS_minimums) As instru√ß√µes para instala√ß√£o do Xen tools em Windows e GNU/Linux est√° dispon√≠vel aqui (http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-configuring/xs-xc-vms-installtools. html) ¬† Refer√™ncias http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/guest. html#creatingVMs_supported_OS_minimums http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-configuring/xs-xc-vms-installtools. html http://ports. marllus. com/2016/02/12/pv-hvm-hvm-com-drivers-pv-pvhvm-pvh-no-xenserver-a-sopa-de-letrinhas-da-virtualizacao "
    }, {
    "id": 32,
    "url": "http://localhost:4000/tecnologia/2016/02/17/instalacao-xenserver.html",
    "title": "Instala√ß√£o XenServer",
    "body": "2016/02/17 -  Ol√°!  Neste tutorial, guiarei voc√™ no processo de instala√ß√£o do XenServer.  Pois bem, primeiro de tudo √© preparar a m√≠dia de boot do XenServer. Voc√™ pode instal√°-la em um CD/DVD pendrive, basta baixar a imagem . iso de instala√ß√£o do mesmo e grav√°-la na m√≠dia em quest√£o. Neste tutorial, iniciarei os procedimentos como se estivesse gravando a m√≠dia em um pendrive atrav√©s de um sistema operacional GNU/Linux, como creio que hoje o acesso a esta m√≠dia √© muito mais facilitada do que as antigas (e dispensando o servi√ßo do estagi√°rio de ir comprar na esquina o CD/DVD virgem pra voc√™, rs).  Seguem os passos:  Pr√© requisitos e recomenda√ß√µes de hardware:  ¬† ¬† &#8211; Um ou mais CPU(s) 64-bit x86, m√≠nimo de 1. 5GHz. ¬† √â recomendado 2 GHz ou superior.  OBS:Para suporte de VMs Windows, CPU com suporte √†s tecnologias Intel VT or AMD-V 64-bit x86¬†√© requerido.  ¬† ¬† &#8211; RAM: M√≠nimo de 2GB. Recomendado 4GB ou mais.  ¬† ¬† &#8211; Disco r√≠gido: Armazenamento local (PATA, SATA, SCSI) de 16GB √© o m√≠nimo requerido. Recomenda-se um disco de tamanho a partir de 60GB local ou SAN HBA (exceto via software) se instalado com multipathing boot SAN. OBS: A instala√ß√£o do Xenserver no host produz duas parti√ß√µes de 4GB no disco onde ser√° instalado.  ¬† ¬† &#8211; Rede: M√≠nimo de 100Mbit/s ou superior. Uma ou mais NICs gigabit s√£o recomendadas para aumentar a velocidade de P2V, exporta√ß√£o/importa√ß√£o e migra√ß√µes ao vivo de VMs, etc.  Passo a passo da instala√ß√£o:  Baixe a imagem de instala√ß√£o do XenServer neste link: http://downloadns. citrix. com. edgesuite. net/10175/XenServer-6. 5. 0-xenserver. org-install-cd. iso  Ap√≥s baixar a imagem para o seu computador, conecte o pendrive e execute o passo abaixo:  OBS: onde voc√™ vai substituir o /dev/sdX pelo caminho do seu pendrive (ex: se voc√™ tiver dois discos na sua m√°quina e adicionar o pendrive, voc√™ provavelmente ter√° estes dispositivos: /dev/sda (primeiro disco), /dev/sdb (segundo disco), /dev/sdc (pendrive, a√™√™√™√™)). Confirme o caminho do seu pendrive e execute o seguinte comando no terminal:  # sudo dd if=XenServer-6. 5. 0-xenserver. org-install-cd. iso of=/dev/sdX  Deve demorar uns 4-5min (em um core i7) at√© completar a grava√ß√£o, aproveite para ir ao banheiro ou conversar um pouco na copa com as #amigas!  Pr√≥ximo passo: espete o pendrive na m√°quina onde ser√° instalada o XenServer e &#8220;mande brasa&#8221; no boot!  Brevemente voc√™ ver√° esta tela, quando o boot da m√≠dia come√ßar:  Ap√≥s alguns segundos de letras pretas descendo na tela, voc√™ ver√° esta tela:  OBS: Como estava sem tempo de fazer a instala√ß√£o do XenServer 6. 5 e n√£o achei na net nenhuma imagem do procedimento, coloquei prints da instala√ß√£o de um XenServer 6. 2 (que encontrei na net), mas, n√£o se preocupe pois s√£o as mesmas imagens de instala√ß√£o do XenServer 6. 5 (a n√£o ser pela frase &#8220;Version 6. 2. 0 (#70446c)&#8221; na parte de cima da imagem).  Escolha, ent√£o, o teclado &#8220;[qwerty] br-abnt2&#8221; e clique em &#8220;Ok&#8221;.  Ap√≥s isso aparecer√° a seguinte tela:  Explicando:  O texto diz que a ferramenta de instala√ß√£o pode ser usada tanto para instalar um XenServer ou atualizar (upgrade) uma instala√ß√£o de XenServer j√° existente e que a instala√ß√£o nova vai apagar todos os dados existentes no disco (novidade! tsc‚Ä¶) e que para sua seguran√ßa √© melhor ter um backup antes de proceder. O legal √© que voc√™ pode tamb√©m carregar drivers de algum perif√©rico &#8220;desconhecido&#8221; da m√°quina (isso pode acontecer caso n√£o tenha seguido os pr√© requisitos do HCL &#8211; Lista de Compatibilidade de Hardware).  Praticando:  Simplesmente, pressione a tecla &#8220;Ok&#8221;.  A seguinte tela √© mostrada:  Explicando:  O texto diz que ser√° criado um reposit√≥rio de armazenamento, e te d√° a op√ß√£o de criar agora ou n√£o. Em cen√°rios¬†de recupera√ß√£o de ambiente perdido, geralmente n√£o marcamos disco para ser reposit√≥rio de armazenamento, pois quando voc√™ faz isso, tudo dentro deste disco √© apagado.  A outra op√ß√£o quer saber se voc√™ quer habilitar o &#8220;thin provisioning&#8221; e que a mesma serve para otimizar o armazenamento para utiliza√ß√£o do XenDesktop (plataforma de virtualiza√ß√£o de desktops (VDI) da Citrix).  Praticando:  Como n√£o estamos (ainda, rsrs) fazendo nenhum teste de recupera√ß√£o de dados, marque a primeira op√ß√£o, habilitando o disco para ser o reposit√≥rio de armazenamento. Se tiver mais de um disco e quiser marc√°-lo tamb√©m, fica a seu crit√©rio, lembrando que como o XenServer utiliza LVM (Logical Volume Manager) (por padr√£o) para realizar a opera√ß√£o de cria√ß√£o e gerenciamento do armazenamento local, voc√™ pode adicionar ou remover discos facilmente depois de o sistema ser instalado, inclusive.  Explicando:  Se seu plano √© criar/salvar as VMs em reposit√≥rios de armazenamento do tipo externo (SAN (iSCSI, FC), NAS (NFS)) voc√™ s√≥ precisa se preocupar em utilizar um disco interno, que ser√° a instala√ß√£o do XenServer e SR local (reposit√≥rio de armazenamento ou Storage Repository).  Lembrando que √© neste passo que voc√™ vai ver os discos j√° em RAID (via hardware, se voc√™ tiver feito). Quanto ao software RAID, oficialmente o XenServer 6. 5 n√£o suporta a caracter√≠stica, mas, como o &#8220;por baixo&#8221; dele √© GNU/Linux (CentOS) voc√™ pode seguir, por sua conta e risco, diversos tutoriais ensinando como fazer raid via software ap√≥s a instala√ß√£o do XenServer. L√° em baixo coloquei uns links para alguns tutoriais desse tipo.  Praticando:  Desmarque a segunda op√ß√£o (Enable thin provisioning‚Ä¶), pois n√£o estamos aqui em um ambiente XenDesktop e habilit√°-la n√£o surtiria efeito algum.  Ap√≥s isso, clique no &#8220;Ok&#8221; e ver√° a pr√≥xima tela:  Explicando:  √â perguntado aqui onde est√° a m√≠dia de instala√ß√£o. Lembrando que voc√™ pode tamb√©m selecionar para instalar por HTTP ou FTP ou NFS (Servidor de rede em um PC com a imagem . iso do XenServer!).  Praticando:  Neste caso, voc√™ vai clicar em &#8220;Local media&#8221;, pois nosso sistema est√° no pendrive. Selecione a op√ß√£o e clique em &#8220;Ok&#8221;.  Pr√≥xima tela:  Explicando:  Aqui √© perguntado se voc√™ quer instalar algum &#8220;suplemental packs&#8221;. Exemplos de supplemental pack √© a integra√ß√£o do sistema de container Docker com o XenServer 6. 5 SP1. Supplemental packs geralmente s√£o fornecedos pela Citrix (drivers, ferramentas adicionais para o XenServer‚Ä¶) e por terceiros (geralmente plugins de monitoramento e gerenciamento do XenServer).  Praticando:  N√£o iremos instalar nenhum pack suplemental aqui, ent√£o clique em &#8220;No&#8221;.  Pr√≥xima tela:  Explicando:  Aqui √© perguntado se voc√™ quer testar a m√≠dia de instala√ß√£o. Geralmente, por pressa, selecionamos para pular esta verifica√ß√£o, mas, por experi√™ncia pr√≥pria, sempre √© bom testar a m√≠dia antes de instalar, pois alguns problemas podem acontecer com a p√≥s instala√ß√£o, fazendo com que voc√™ nem desconfie dela pr√≥pria (no nosso caso o pendrive). #ficadica  Praticando:  Clique em &#8220;Verify installation source&#8221;.  Ap√≥s isso teremos o teste se realmente a m√≠dia de instala√ß√£o est√° em perfeita ordem e vai copiar direitinho os arquivos (reduzindo o custo de um futuro troubleshooting).  Depois vem a tela para configura√ß√£o de acesso ao XenServer:  Praticando:  Aqui √© mais f√°cil ainda, defina a senha de root do sistema. Ela ser√° usada quando conectado diretamente ao XenServer via SSH ou via XenCenter.  Pr√≥xima tela:  Praticando:  Aqui voc√™ deve definir o nome do host XenServer e os campos de DNS. Tudo fica a seu crit√©rio. Atente para colocar nomes que v√£o lhe gerar uma poss√≠vel organiza√ß√£o, como xenprd01, xenhml02, etc.  Pr√≥xima tela:  Praticando:  Agora √© a fase de &#8220;batismo&#8221; do seu XenServer. Nesta primeira tela voc√™ pode escolher o continente onde voc√™ estar√° (America or not? rs) para efeito de fuso hor√°rio.  Na pr√≥xima tela:  Praticando:  Agora √© registrar a certid√£o de nascimento escolhendo o seu local! Escolha seu estado, caso n√£o tenha na lista, escolha um mais pr√≥ximo e com o mesmo fuso hor√°rio.  Pr√≥xima tela:  Explicando:  Atentai bem para esta tela, caro irm√£o(√£)!! De prefer√™ncia, sugiro adicionar um servidor NTP que realmente funcione! Cuidado com entradas manuais de tempo e servidores de tempo bugados! J√° tive problemas grandes em um XenServer em produ√ß√£o por conta disso! At√© descobrir o problema eu j√° tinha efetuado v√°rias atualiza√ß√µes e re-instala√ß√µes!  O problema em se ter hosts XenServer desatualizados √© porque afeta a sincroniza√ß√£o entre estes mesmos hosts em um pool. Por exemplo, se voc√™ tem um cen√°rio de hora desatualizada nos seus servidores XenServer e fizer uma altera√ß√£o simples no ip da placa de ger√™ncia ou storage em um deles pode comprometer a sincroniza√ß√£o da mudan√ßa entre os outros, gerando um efeito n√£o muito agrad√°vel para o seu ambiente (n√£o pague pra ver)!  Praticando:  Adicione algum servidor NTP que voc√™ tenha, caso n√£o saiba, use os servidores NTP do ntp. br:  a. ntp. br  b. ntp. br  Pr√≥xima tela:  Instalando o sistema base‚Ä¶. .  Pr√≥xima tela:  Caso veja esta tela, show, o sistema foi instalado com sucesso!  Praticando:  Clique em ok!  O computador agora vai reinicializar!  Pr√≥xima tela:  Tela de inicializa√ß√£o do XenServer‚Ä¶  Pr√≥xima tela:  Pronto, voc√™ est√° na tela padr√£o de entrada de console do XenServer! Aqui voc√™ pode encontrar v√°rias informa√ß√µes sobre a instala√ß√£o, como o menu &#8220;network and management interface&#8221;, &#8220;Disk and Storage Repositories&#8221;, &#8220;Hardware end Bios Information&#8221;, informa√ß√µes sobre as VMs rodando no servidor no menu &#8220;Virtual machies&#8221;. Na lateral direita voc√™ tem informa√ß√µes a respeito da placa de rede definida para a ger√™ncia, os IPs atribu√≠dos e caracter√≠sticas da m√°quina f√≠sica onde foi instalado o XenServer, neste caso est√° aparecendo &#8220;Vmware, Inc&#8221; pois o XenServer foi instalado j√° de forma virtualidade em um servidor Vmware (isso √© chamado de NESTED Virtualization [rodar um hypervisor dentro de uma VM] &#8211; Lembrando que o XenServer tamb√©m fornece esse tipo de virtualiza√ß√£o &#8211; voc√™ pode instalar um vmware dentro dele &#8211; e isso √© usado geralmente para testes pois neste modo o desempenho do hypervisor √© degradado).  At√© aqui √© isso!  Abra√ßos e qualquer coisa poste a√≠ nos coment√°rios que lhe respondo!  Refer√™ncias:  https://blog. trendelkamp. net/2015/02/configure-software-raid-xenserver-6-5/  http://djlab. com/2014/03/xenserver-6-2-with-software-raid/  http://docs. citrix. com/content/dam/docs/en-us/xenserver/xenserver-65/xenserver65sp1_installation_guide. pdf  http://docs. citrix. com/content/dam/docs/en-us/xenserver/xenserver-65/XenServer-6. 5. 0_QuickStartGuide. pdf  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. "
    }, {
    "id": 33,
    "url": "http://localhost:4000/tecnologia/2016/02/17/importacaoexportacao-de-vms-no-xenserver-6-5.html",
    "title": "Importa√ß√£o/Exporta√ß√£o de VMs no XenServer 6.5",
    "body": "2016/02/17 - Ol√°, td bem? Hoje o tema √© sobre exporta√ß√£o e importa√ß√£o de VMs no XenServer. Para exemplificar os formatos aceitos na exporta√ß√£o, vou colocar cada um como t√≥pico e logo abaixo as situa√ß√µes preferidas para utiliz√°-lo. OVA/OVF (Formatos abertos ‚Äì muitos hypervisors o utilizam):  ‚Äì Compartilhar vApps e VMs com outros plataformas de virtualiza√ß√£o que suportam OVF; ‚Äì Salvar mais que uma VM de uma vez; ‚Äì Garantir um vApp ou VM de corrup√ß√£o e falsifica√ß√£o; ‚Äì Simplificar a distribui√ß√£o de um vApp armazenando um pacote OVF em um arquivo OVA;XVA (Formato do pr√≥prio XenServer ‚Äì tamb√©m aberto):    ‚Äì Compartilhar VMs com vers√µes do XenServer anteriores √† 6. 0 (mas que tamb√©m funciona em vers√µes posteriores);   ‚Äì Importar/Exportar VMs por meio de scritps via linha de comando (CLI);  Importa√ß√£o e exporta√ß√£o de VMs pode ocorrer entre hypervisors XenServer bem como de outros hypervisors para o XenServer. Quando voc√™ for importar para o XenServer uma VM que foi exportada de um outro hypervisor (ex. VMware, Hyper-V, VirtualBox, etc. ) voc√™ ter√° que rodar um sistema de verifica√ß√£o e corre√ß√£o de erros de boot que vem por padr√£o oferecido pelo XenServer. Basicamente √© uma . iso chamada ‚ÄúOperating System Fixup tool‚Äù. √â ela que tentar√° garantir a interoperabilidade (compatibilidade) no boot de uma VM ‚Äúestrangeira‚Äù dentro do XenServer. Mas, que tipo de bruxaria essa ferramenta de Fixup faz com as VMs? ‚ÄúSimples‚Äù, quando a VM √© iniciada, arrancando a . iso no boot, a ferramenta Fixup vai ver qual o sistema operacional da VM, se Windows ou GNU/Linux. Caso seja Windows, a ferramenta vai selecionar drivers gen√©ricos cr√≠ticos de boot da pr√≥pria base de dados do sistema operacional e registrar para o boot da VM. Caso seja GNU/Linux, a ferramenta vai entrar no arquivo do GRUB e alterar as refer√™ncias para os discos de inicializa√ß√£o de SCSI para IDE (ex. /dev/sda1 -&gt; /dev/hda1). Outra coisa que a ferramenta faz √© retirar ou desabilitar ferramentas de boot ou virtualiza√ß√£o vindas de outros hypevisors e que podem comprometer o desempenho no XenServer. OBS: Neste caso do Fixup, a VM √© readequada, n√£o convertida. Outra informa√ß√£o importante √© que em cada processo de importa√ß√£o ou exporta√ß√£o de uma VM como OVF/OVA e/ou imagem de disco (VHD e VMDK) entre o Xenserver e o local onde est√£o os arquivos, √© feita uma intermedia√ß√£o entre a c√≥pia origem-destino. Como assim? Sempre que uma VM, neste caso citado, √© importada ou exportada, √© criada uma VM (chamada ‚ÄúTransferVM‚Äù) para receber os dados do(s) disco(s) dela, aos poucos estes dados v√£o sendo transferidos para o disco/arquivo de origem. Pense na TransferVM como um firewall que filtra tudo que est√° passando entre uma origem (que pode ser um SR no Xenserver) e destino (que pode ser um compartilhamento NFS). Para import/export de VMs entre reposit√≥rios remotos, voc√™ deve configurar os par√¢metros de network que aparecer√° na tela para TransferVM. Caso o import/export seja localmente (de uma VM para um repositor√≥rio local do XenServer) a TransferVM √© criada mas n√£o √© pedido nenhum IP. Ele j√° assume que est√° na mesma network. Para saber como realizar importa√ß√£o, exporta√ß√£o, conhecer detalhes dos formatos dispon√≠veis e configura√ß√µes extras, pode clicar neste link (http://docs. citrix. com/en-us/xencenter/6-1/xs-xc-vms-exportimport/xs-xc-vms-exportimport-about. html). V√≠deos sobre procedimentos: Citrix Xenserver VM Import and Export: https://www. youtube. com/watch?v=XcHbOF-D-l0 Citrix XenServer ‚Äì Step by Step ‚Äì 5. part -Import &amp; Export Virtual machine: https://www. youtube. com/watch?v=nZ4D0w0V8g8 Citrix XenServer 6 ‚Äì Copying, Importing, Exporting, and Moving VMs: https://www. youtube. com/watch?v=E5KnWR2JbrU Importando uma M√°quina Virtual (VM) no Citrix XenCenter: https://www. youtube. com/watch?v=qhtBQgy-vmA Citrix XenServer VM-Export: https://www. youtube. com/watch?v=OWaca8gEIJ8 ¬† Refer√™ncias: http://docs. citrix. com/en-us/xencenter/6-1/xs-xc-vms-exportimport/xs-xc-vms-exportimport-about. html http://support. citrix. com/article/CTX124961 https://www. youtube. com/watch?v=XcHbOF-D-l0 https://www. youtube. com/watch?v=nZ4D0w0V8g8 https://www. youtube. com/watch?v=E5KnWR2JbrU https://www. youtube. com/watch?v=qhtBQgy-vmA https://www. youtube. com/watch?v=OWaca8gEIJ8  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. "
    }, {
    "id": 34,
    "url": "http://localhost:4000/tecnologia/2016/02/17/fast-clone-e-full-copy-de-vms-no-xenserver-6-5.html",
    "title": "Fast clone e full copy de VMs no XenServer 6.5",
    "body": "2016/02/17 - Opa, e a√≠, td certo? Hoje explicarei sobre Fast Clone e Full Copy de VMs e templates. Meu papo ser√° focado no entendimento destes dois pontos. Se voc√™ nunca copiou uma VM ou template, a qualquer hora ir√° precisar fazer isto. VMs e templates s√£o copiados a fim de v√°rios motivos: Para realizar testes a partir de uma VM que est√° em produ√ß√£o, provisionar (subir) novas VMs rapidamente, criar templates a partir delas, etc. Mas, quando voc√™ vai copiar uma VM pelo XenCenter, sempre abre uma tela que te pergunta dois modos de c√≥pia para voc√™ escolher: O fast clone ou o full copy. Bem, quando voc√™ olha o nome fast clone d√° uma ideia de mais agilidade (rapidez). Creio que muitos administradores escolhem essa op√ß√£o por isso, sem saber que podem pagar caro no futuro‚Ä¶ Explicando mais detalhadamente: Quando uma VM ou template √© copiado pelo modo fast clone, o novo VDI da VM/template acessa os blocos antigos do VDI de origem. Por exemplo, se eu tenho uma VM com o GNU/Linux Ubuntu rec√©m instalado e copiar esta VM como fast clone, a nova VM criada vai usar os blocos antigos (neste caso a parti√ß√£o do sistema completo) do disco da VM original, todo arquivo criado ou alterado a partir desse momento ser√° gravado no novo disco. Em outras palavras, toda regi√£o do VDI da nova VM referente ao que foi gravado na VM original √© um ponteiro para o disco desta VM (n√£o h√° duplica√ß√£o de conte√∫do, em n√≠vel de bloco). Quando uma VM ou template √© copiado como full copy, o novo VDI da VM/template √© totalmente independente do VDI original (que foi copiado). Todo o conte√∫do √© copiado (literalmente) para o novo disco. D√° pra imaginar que essa c√≥pia √© um pouco mais demorada, por esse fato. Mas o pre√ßo a se pagar pela rapidez do fast clone, √© a quest√£o do encadeamento (acorrentamento) dos VDIs. Por padr√£o, o limite m√°ximo desta cadeia (chain) √© de 30 VDIs. Na pr√°tica, se voc√™ chegar em mais da metade desse limite, o acesso aos dados ser√° bastante degradado. Essa cadeia vai aumentado a partir do momento que voc√™ vai provisionando cada vez mais VMs e copiando templates como fast clone. Por contrapartida, isso n√£o ocorre com o m√©todo full copy, pois n√£o existir√° ponteiros entre VDIs novos e antigos nem encadeamento entre eles (chain=0). Vou explicar com imagens: O que acontece no fast clone: ¬† O que acontece no modo full copy: Para voc√™ analisar essas √°rvores que s√£o criadas e que crescem a partir do provisionamento de cada vez mais c√≥pias fast, entre no host xen em quest√£o e digite o comando: # vhd-util scan -f -m ‚ÄúVHD-*‚Äù -l VG_XenStorage- -p O resultado deste comando ser√° algo do tipo: Perceba que a seta indica que o VHD (VDI) mostrado na linha tem um parent (n√≥ de origem). Quando o par√¢metro ‚Äúparent‚Äù est√° como ‚Äúnone‚Äù quer dizer que o VHD n√£o tem um pai relacionado, ou seja, ele n√£o foi criado com fast clone. Assim como os snapshots, quando um VDI na cadeia √© exclu√≠do, um evento de aglutina√ß√£o (chamado coalescing) entre VDIs √© feito (em qualquer tempo ‚Äì ass√≠ncrono). Ap√≥s isso, algum espa√ßo em disco no SR dever√° ser liberado. Mas, se voc√™ n√£o quer excluir VMs encadeadas, existem tr√™s formas de resolver o problema do ‚Äúencadeamento infeliz‚Äù: ‚Äì Migrar a VM encadeada para outro SR no pool. Ap√≥s isso o par√¢metro parent ser√° resetado (=none). ‚Äì Setar a prioridade de IO de disco (QoS) da VM encadeada como n√≠vel alto (use isto como um paleativo). Mais detalhes aqui. ‚Äì Copiar a VM encadeada novamente (Xencenter ou ‚Äúvm-copy‚Äù na linha de comando), mas, desta vez como full copy (o parent tamb√©m ir√° resetar). Bem, creio que voc√™ agora deve entender mais sobre esses dois tipos de c√≥pias e seus pr√≥s e contras. Para saber como realizar os procedimenos de c√≥pia, clique neste link (http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms/xs-xc-vms-copy. html) ¬† Refer√™ncias: http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/reference. html#disk_qos http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms/xs-xc-vms-copy. html http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/reference. html#id541790 https://www. citrix. com/blogs/wp-content/uploads/2012/05/vhd-util-sample-1024√ó404. png ¬†  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. "
    }, {
    "id": 35,
    "url": "http://localhost:4000/tecnologia/2016/02/17/entendendo-templates-xenserver-6-5.html",
    "title": "Entendendo templates ‚Äì Xenserver 6.5",
    "body": "2016/02/17 - Ol√°, td bem? O assunto agora √© sobre templates. Template =&gt; modelo, padr√£o; Uma VM √© um recipiente de software (muitas vezes chamada de Guest) que cont√©m informa√ß√µes a respeito de CPU, sistema operacional, mem√≥ria RAM e recursos de rede. Esta VM funciona ‚Äúem cima‚Äù do hypervisor Xen. Pois bem, um template nada mais √© que uma VM encapsulada em um arquivo e que cont√©m todas as informa√ß√µes (metadados) para seu r√°pido provisionamento. Por exemplo, uma destas informa√ß√µes pode ser o tamanho padr√£o do disco r√≠gido que ir√° ser criado para ela, ou o m√°ximo de RAM que poder√° ser atribu√≠da a ela ou quantos CPUs a VM ter√°. com estas informa√ß√µes, a cria√ß√£o de VMs fica muito mais r√°pida para o administrador. Outro benef√≠cio √© que, al√©m dos templates padr√£o que o XenServer disponibiliza de v√°rios sistemas operacionais, voc√™ tamb√©m pode criar/deletar outros novos templates. Mas, por que devo criar templates se o XenServer j√° me disponbiliza v√°rios? Te respondo com um exemplo: Voc√™ criou uma VM e teve o maior trabalho para configurar certinho um LAMP (Linux+Apache+MySQL+PHP). Tempos depis, na empresa que voc√™ trabalha voc√™ foi solicitado para entregar uma m√°quina com estas mesmas configura√ß√µes. Neste caso, n√£o √© preciso criar a VM e configurar na unha todos os servi√ßos novamente. Basta gerar um template a partir da VM que voc√™ criou (e no momento ap√≥s a configura√ß√£o de todos os servi√ßos). Da√≠, a partir deste template, voc√™ criar√° (replicar√°) uma VM id√™ntica √† original, depois √© s√≥ alterar o nome dela, alterar o IP ou outras configura√ß√µes e entregar ao setor que a solicitou. Massa n√©? A figura abaixo mostra qual as caracter√≠sticas dos templates e como podem ser usados, com base no exemplo que usei. ¬† Existem 4 formas de se criar templates no XenServer, atrav√©s do XenCenter: ‚Äì Fazendo a c√≥pia de um template existente; ‚Äì Convertendo uma VM existente em um template (olha o exemplo que citei); ‚Äì Salvando uma c√≥pia de um snapshot de uma VM em um template; ‚Äì Importando um template de uma VM (em arquivo . xva) que foi exportado de um template existente ou snapshot de uma VM; Todo o procedimento de cada um dos passos √© descrito neste link (http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms/xs-xc-templates-new. html). Qualquer d√∫vida, s√≥ postar nos coment√°rios ou no f√≥rum xen-br@googlegroups. com. Existe como tamb√©m voc√™ editar templates existentes no XenServer (como os templates prontos que j√° vem por padr√£o no XenServer). Por exemplo, neste artigo da Citrix (http://support. citrix. com/article/CTX126320) √© descrito como voc√™ pode alterar o limite m√°ximo de mem√≥ria suportada para uma VM, que no caso do artigo, era de no m√°ximo 16GB. OBS: Um ponto importante para ser dito √© sobre a quest√£o da c√≥pia de um template ou de uma VM existente (primeira op√ß√£o na lista de ser criar templates que citei acima). Nesta c√≥pia existem dois mecanismos: A c√≥pia completa (full copy) e a clone r√°pido (fast clone). Muito cuidado ao copiar como fast clone. Eu recomendo antes de o fazer, saber us√°-lo e evitar futuras dores de cabe√ßa. Para complementar, recomendo a leitura deste tutorial, onde explico sobre os tipos de snapshots. Abra√ßos e at√©+! ¬† Refer√™ncias: http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms/xs-xc-templates-new. html http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/reference. html http://support. citrix. com/article/CTX126320 http://blogs. citrix. com/2012/05/03/creating-vms-from-templates-in-xenserver-creates-a-fast-clone/ ¬†  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. "
    }, {
    "id": 36,
    "url": "http://localhost:4000/tecnologia/2016/02/17/docker-no-xenserver-6-5.html",
    "title": "Docker no XenServer 6.5",
    "body": "2016/02/17 - Ol√°, td bem? Esse post √© sobre Docker, por√©m, como o objetivo desta s√©rie de tutoriais do ‚ÄúGuia Zen do XenServer‚Äù √© falar sobre XenServer e virtualiza√ß√£o n√£o vou explicar o porqu√™ de utilizar containers e a import√¢ncia de sua aplica√ß√£o em ambientes de desenvolvimentos de software, mesmo sabendo que docker (o ‚Äúboom‚Äù do momento) √© bem importante e cada vez mais utilizado por grandes empresas. Se voc√™ quiser entender o que √© Docker e containers, veja esse v√≠deo que explica sobre o assunto: https://www. youtube. com/watch?v=0cDj7citEjE √â importante ressaltar tamb√©m que o XenServer consegue gerenciar instala√ß√µes Docker em VMs dentro do seu ambiente de virtualiza√ß√£o. Consequentemente, o docker, neste caso, ainda vai ter o overhead do hypervisor, pois ele n√£o √© instalado direto no hardware, como exemplifica o conceito de container. Informa√ß√µes a respeito dos benef√≠cios de se gerenciar Docker pelo XenServer (diretamente pelo XenCenter) e o passo a passo sobre como instalar o ‚ÄúContainer Management Supplemental pack‚Äù (pack de software para gerenciar docker) para permitir todo o resto al√©m da instala√ß√£o do coreOS (e outros Guests), est√° dispon√≠vel nestes links: http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-configuring/xs-xc-vms-container-manage. html http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/guest. html#container_management Um v√≠deo interessante que demonstra a integra√ß√£o do Docker no Xenserver. https://www. youtube. com/watch?v=sUBluy3u3Mo Abra√ßos e at√©+! ¬† Refer√™ncias: https://www. youtube. com/watch?v=0cDj7citEjE http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-configuring/xs-xc-vms-container-manage. html http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/guest. html#container_management https://www. youtube. com/watch?v=sUBluy3u3Mo ¬†  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. "
    }, {
    "id": 37,
    "url": "http://localhost:4000/tecnologia/2016/02/17/dmc-dynamic-memory-control-xenserver-6-5.html",
    "title": "DMC ‚Äì Dynamic Memory Control ‚Äì XenServer 6.5",
    "body": "2016/02/17 - E a√≠, tb bem? Voc√™ j√° deve ter visto esse intervalo m√≠nimo e m√°ximo de mem√≥ria que √© mostrado no XenCenter (nas configura√ß√µes de mem√≥ria RAM de uma VM). Talvez, possa at√© ter imaginado que o XenServer vai disponibilizar mem√≥ria para uma VM de acordo com este intervalo, n√£o √© verdade? √â isso mesmo que acontece. Isso √© o controle din√¢mico de mem√≥ria (DMC ‚Äì Dynamic Memory Control). As vezes chamado de ‚Äúdynamic memory optimization‚Äù, ‚Äúmemory overcommit‚Äù ou ‚Äúmemory ballooning‚Äù. Quando o DMC √© habilitado nas VMs, acontece o seguinte: Se tiver muita mem√≥ria RAM sobrando no host xen f√≠sico, ele libera m√©moria m√°xima para cada VM, ou seja, o valor m√°ximo de mem√≥ria que voc√™ definiu no intervalo √© dado a ela (e as VMs ficam bem felizes com isso). Caso falte mem√≥ria no servidor, o SenServer neste caso faz um c√°lculo e distribui uma fatia de mem√≥ria (dentro do intervalo de mem√≥ria definido em cada VM) para cada VM, n√£o deixando nenhuma delas desamparada e tamb√©m abrindo oportunidades de novas VMs serem criadas, pois sempre o XenServer ir√° fazer essas otimiza√ß√µes com o objetivo de todas serem alimentadas com mem√≥ria suficiente para dar o boot (pelo menos). Bacana, n√£o √©? Show. Mas, como nem tudo s√£o flores, ter este recurso habilitado requer o dobro de aten√ß√£o na hora do planejamento de distribui√ß√£o de mem√≥ria entre as VMs de seu ambiente. Imagine a seguinte situa√ß√£o: Voc√™ tem 10 VMs com 1GB de ram funcionando no seu host xen (que tem 12GB de ram). Ou seja, at√© ent√£o voc√™ tem pouca mem√≥ria dispon√≠vel no seu Dom0 (Xen Hypervisor). Da√≠ voc√™ vai criar mais duas VMs de 1GB de ram, ent√£o, por causa do DMC ativado em cada VM, o XenServer vai reduzir a mem√≥ria de cada uma delas afim de ter mem√≥ria dispon√≠vel para essas duas VMs novas. Mas, esse ambiente pode entrar em colapso (elas travarem) se as VMs ficarem sem mem√≥ria suficiente para funcionar, al√©m da mem√≥ria reservada para o Dom0. Ent√£o, tenha bastante cuidado no limite m√≠nimo que voc√™ vai colocar para sempre sobrar mem√≥ria dispon√≠vel no servidor f√≠sico, e assim poder utilizar esse recurso t√£o bacana sem efeitos colaterais. Os passos para habilitar/desabilitar o DMC em uma VM, bem como definir um tamanho fixo de mem√≥ria para ela, est√° dispon√≠vel neste link (http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-configuring/xs-xc-vms-memory/xs-xc-dmc-edit. html) Refer√™ncias: http://www. thegenerationv. com/2010/04/xenserver-56-preview-part-1-dynamic. html http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-configuring/xs-xc-vms-memory/xs-xc-dmc-edit. html ¬†  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. "
    }, {
    "id": 38,
    "url": "http://localhost:4000/tecnologia/2016/02/17/criando-vms-maquinas-virtuais-no-xenserver-6-5.html",
    "title": "Criando VMs (M√°quinas Virtuais) no XenServer 6.5",
    "body": "2016/02/17 - Ol√°, Hoje guiarei voc√™ no processo de cria√ß√£o de uma m√°quina virtual no Xenserver. Para isso, utilizaremos o XenCenter. Vamos l√°. Abra o Xencenter, selecione o pool ou XenServer¬†onde voc√™ quer que a VM seja criada e v√° no menu ‚ÄúVM‚Äù e clique em ‚ÄúNew VM‚Äù. Ap√≥s isso, quando abrir a janela do ‚ÄúNew VM Wizard‚Äù, aparecer√° uma op√ß√£o para voc√™ escolher na lista um template dispon√≠vel. Escolha um template referente ao sistema operacional que voc√™ instalar√° e clique em ‚ÄúNext‚Äù. Para saber mais sobre templates, clique AQUI. Ap√≥s isso, digite um nome e descri√ß√£o para a VM e clique em ‚ÄúNext‚Äù. ex: Nome: GNU/Linux Ubuntu Banco Producao Descri√ß√£o: VM Linux ubuntu referente ao banco de produ√ß√£o da filial bla bla bla Agora, especifique qual m√≠dia de instala√ß√£o usar√° no processo. Voc√™ pode especificar um servidor NFS de rede com a ISO, usar o drive de CD/DVD do servidor f√≠sico, instalar atrav√©s da URL (nfs, ftp, http) ou usar boot de rede (PXE network boot). Ao final, clique em ‚ÄúNext‚Äù. Na pr√≥xima etapa, voc√™ pode nomear um servidor f√≠sico √† VM. Este servidor √© que liberar√° os recursos de hardware (ram, network e CPU) necess√°rios¬†ao funcionamento desta. Esse passo √© opcional quando voc√™ tem um pool, pois no final da cria√ß√£o o xenserver vai eleger um servidor ativo com recursos (hardware) dispon√≠veis para subir a VM. Se voc√™ estiver criando a VM em um servidor espec√≠fico, selecione o servidor e clique em ‚ÄúNext‚Äù. Caso queria deixar a escolha aleat√≥ria (pelo pr√≥prio Hypervisor), n√£o marque nenhum servidor e clique em ‚ÄúNext‚Äù. Nesta etapa, selecione a quantidade de CPUs virtuais (vCPUs) e a quantidade de mem√≥ria RAM da mesma. A partir da vers√£o 6. 5 o XenServer disponibilidade agora, de forma intuitiva, a possibilidade de voc√™ configurar a topologia das vCPUs, como a escolha de quantos cores por socket a VM ter√°. L√≥gico, sempre respeitando o limite f√≠sico dispon√≠vel, sob pena de perca de performance da VM. ex. 2 vCPUs com topologia 2 cores e um socket. 4 vCPUs com topologia 4 cores e 2 sockets ou 4 cores e 1 socket. Fica seu crit√©rio. Na pr√≥xima etapa, voc√™ ir√° realizar a configura√ß√£o dos discos virtuais que a VM ter√°. Crie o(s) disco(s) e clique em ‚ÄúNext‚Äù. O √∫ltimo passo √© configurar as placas de rede da VM. Por, padr√£o o xenserver j√° adicionar√° toda as placas dispon√≠veis √† VM. Voc√™ pode desvincular todas elas e deixar s√≥ a placa referente ao dhcp da sua rede, por exemplo. Pode realizar a customiza√ß√£o do endere√ßo MAC e definir QoS. Ent√£o, complete a configura√ß√£o da VM definindo no campo de sele√ß√£o abaixo se a mesma iniciar√° automaticamente ap√≥s criada. Em alguns instantes (geralmente na espera de cria√ß√£o dos vdisks) a VM estar√° criada e prontinha para uso. Existem outros m√©todos usados para cria√ß√£o de VMs. Eles tamb√©m s√£o descritos na documenta√ß√£o oficial da Citrix, neste link:¬†http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/guest. html#creatingVMs_overview √â isso! Refer√™ncias: http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/guest. html#creatingVMs_overview http://www. howtogeek. com/57601/what-is-network-booting-pxe-and-how-can-you-use-it/  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. "
    }, {
    "id": 39,
    "url": "http://localhost:4000/tecnologia/2016/02/17/criando-srs-storage-repository-no-xenserver-6-5.html",
    "title": "Criando SRs (Storage Repository) no XenServer 6.5",
    "body": "2016/02/17 - Ol√°, pessoa! Tudo bem com voc√™? Bem, hoje falarei sobre os reposit√≥rios de armazenamento (SR ‚Äì Storage Repository). Existem tr√™s tipos de mapeamentos de armazenamento f√≠sico (SR) para um VDI, s√£o eles: VHD baseado em volume l√≥gico (LVM) em uma LUN: Nesse caso, a LUN √© fornecida como um dispositivo de bloco para o XenServer. Nesta LUN ser√£o criados os VHDs que correspondem aos VDIs das VM‚Äôs. Os VDIs s√£o representado como volumes e guardados em formato VHD. A conex√£o para a LUN pode ser atrav√©s de Fiber Channel (SR do tipo LVMoHBA), iSCSI (SR do tipo LVMoiSCSI), SAS (SR do tipo LVMoHBA) ou ainda criada localmente no host XenServer (SR local do Tipo Local LVM). VHD baseado em arquivo em um sistema de arquivo: Nesse caso, o SR √© criado a partir de algum compartilhamento NFS ou local (do tipo EXT). Neste SR, as VMs s√£o criadas como VHDs, ocupando somente o espa√ßo de escrita ‚Äúnaquele momento‚Äù, ou seja, s√£o thin-provisioned. LUN por VDI: Neste caso, voc√™ espeta diretamente a LUN na VM. Ent√£o, a LUN ser√° o pr√≥prio VDI da VM. Ela escrever√° diretamente na LUN, que pode estar guardada em um storage SAN, por exemplo. Para resumir os tr√™s tipos de SR e em que casos s√£o utilizados: SR Volume-Based: Local LVM, iSCSI/FC/SAS. SR File-Based: Local EXT, NFS. VDI √© uma abstra√ß√£o de um Hard Disk Drive (Drive de disco r√≠gido). O formato padr√£o dessa abstra√ß√£o √© o VHD (Virtual Hard Disk), que √© o mesmo padr√£o que a Microsoft utiliza para os discos virtuais no Hyper-v (Hypervisor que ela mant√©m). Nesse VHD cont√©m tudo que um HDD conteria: tabelas de parti√ß√µes, metadados referentes ao tamanho do dispositivo de bloco, cilindros, etc. Como a Microsoft liberou as especifica√ß√µes desse padr√£o para a comunidade, o xensource (consequemente o Xenserver ‚Äì a partir da vers√£o 5. 5 update 2) o adotou para compor o formato padr√£o de VDI. Portanto, quando voc√™ criar um VDI ele ser√° gravado, por padr√£o, no formato VHD. Al√©m desse formato existe tamb√©m o RAW (pior performance) que voc√™ pode escolher utilizando a linha de comando (apenas) do pr√≥prio XenServer. A menos que seja um caso espec√≠fico, n√£o recomendo utilizar raw. Com rela√ß√£o ao LVM e File, vai depender do tipo de armazenamento f√≠sico que voc√™ usar√° para ser SR no seu ambiente. Como falei anteriormente, se for utilizar iSCSI/FC/SAS ou uma parti√ß√£o local como LVM, voc√™ ir√° utilizar VHD em formato LVM. Por√©m, se utilizar um compartilhamento NFS como seu SR ou uma parti√ß√£o local formatada como EXT, os VHDs guardados nesses locais ser√£o no formato de arquivo (File). Agora vem a pergunta: Qual a diferen√ßa do LVM para o File? Bem, se voc√™ n√£o leu meu artigo sobre snapshots, recomendo que leia aqui. Mas, a diferen√ßa √© que VDIs escritos em SR do tipo LVM s√£o thick-provisioned. J√° os escritos em SR do tipo File s√£o thin-provisioned. Para entender como funcionam esses dois ‚Äúmodelos‚Äù de escrita em disco, recomendo a leitura sobre isso no blog do Cleriston:¬†http://cleriston. com. br/post/19582513172/thick-or-thin-provisioning Quando eu estava escrevendo esse artigo, li sobre o lan√ßamento da nova vers√£o do Xenserver (7 ‚Äì Dundee). Descobri que o mesmo vai vir com a op√ß√£o de usar thin-provisioning em SR do tipo LVM. √â um avan√ßo, sem d√∫vidas (desde √† vers√£o 5. 5 a comunidade aguarda essa feature). Por√©m, muito cuidado ao utilizar thin-provisioning no lado do hypervisor, pois, lembre-se que o espa√ßo consumido no SR sempre √© o que est√° escrito nos discos virtuais do seu ambiente naquele momento, e nunca o tamanho total desses discos. Isso abre a possibilidade de voc√™ criar, sem problemas, discos de tamanhos que, se somados, podem passar do total da capacidade f√≠sica. Imagine isso acontecendo e todos os discos virtuais atingindo sua capacidade m√°xima. Dados v√£o para o ar! Ou melhor: pro limbo. Cuidado. A descri√ß√£o para a cria√ß√£o de v√°rios tipos de SR est√° dispon√≠vel na documenta√ß√£o oficial, a qual voc√™ pode conferir aqui: http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-storage/xs-xc-storage-pools-add. html Grande abra√ßo e espero que tenha ensinado de forma satisfat√≥ria sobre os pontos inerentes ao SR. Refer√™ncias: http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-storage/xs-xc-storage-pools-add. html http://support. citrix. com/article/CTX125884 https://en. wikipedia. org/wiki/Connectix http://serverfault. com/questions/277294/what-kvm-disk-type-to-use http://xenserver. org/discuss-virtualization/virtualization-blog/entry/xenserver-dundee-beta-1-available. html http://cleriston. com. br/post/19582513172/thick-or-thin-provisioning http://ports. marllus. com/2016/02/14/snapshots-no-xenserver-6-5 http://support. citrix. com/article/CTX138342 ¬†  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. "
    }, {
    "id": 40,
    "url": "http://localhost:4000/tecnologia/2016/02/17/configurando-vms-no-xenserver-6-5.html",
    "title": "Configurando VMs no XenServer 6.5",
    "body": "2016/02/17 - Ol√°, tudo bem? Bem, pra n√£o se tornar amb√≠guo postar como se faz modifica√ß√µes nas configura√ß√µes de uma VM (sobre disco, rede e mem√≥ria), coloco aqui os tutoriais oficiais Citrix para realizar diversas a√ß√µes, separados pelo tipo de altera√ß√£o. Configura√ß√£o de mem√≥ria: http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-configuring/xs-xc-vms-memory. html OBS: Explico sobre DMC (Controle din√¢mico de mem√≥ria) neste LINK Configura√ß√£o de armazenamento virtual: http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-configuring/xs-xc-vms-storage. html Configura√ß√£o da rede: http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-configuring/xs-xc-vms-network. html Configura√ß√£o das propriedades da VM (vCPU, boot options, alertas‚Ä¶): http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-configuring/xs-xc-vms-properties. html Gerenciamento de containers (Docker): http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-configuring/xs-xc-vms-container-manage. html OBS: Explico sobre containers (Docker) neste LINK Por hoje √© s√≥. t+! Refer√™ncias: [1] http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-configuring/xs-xc-vms-memory. html [2] http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-configuring/xs-xc-vms-storage. html [3] http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-configuring/xs-xc-vms-network. html [4] http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-configuring/xs-xc-vms-properties. html [5] http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-vms-configuring/xs-xc-vms-container-manage. html  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. "
    }, {
    "id": 41,
    "url": "http://localhost:4000/tecnologia/2016/02/17/backup-no-xenserver-6-5.html",
    "title": "Backup no XenServer 6.5",
    "body": "2016/02/17 - E a√≠, tudo certinho? Bem, hoje o tutorial ser√° sobre backup! T√£o falado, mas t√£o pouco usado, o backup no XenServer parece ser complicado, mas √© mais simples do que se imagina. Primeiro, existem tr√™s n√≠veis de backup no XenServer: Pool: Esse backup guarda informa√ß√µes a respeito do pool, ou seja, o arquivo gerado por esse backup geralmente √© bem pequeno e cont√©m informa√ß√µes a respeito de quais Vms est√£o em cada host do pool, quantas NICs e quais os Ips dessas NICs, se tem VLAN configurada e quais os storages conectados a ele. Se voc√™ ‚Äúcrashar‚Äù um pool e ele se perder, esse aquivo permite voc√™ criar outro pool id√™ntico novamente. Host: Esse backup geralmente √© bem grande e cont√©m os dados escritos no disco local do host xen. N√£o √© recomendado voc√™ guardar este backup dentro do pr√≥prio host, pois o mesmo √© bem grande (dependendo da quantidade de dados escritos no disco local do pr√≥prio host). Esse backup √© interessante quanto se quer ter a instala√ß√£o do XenServer com todos os patches, updates e altera√ß√µes em arquivos em diret√≥rios do SO Dom0, ou seja, quando se quer ter o mesmo host xen id√™ntico ao que era antes, sem maiores trabalhos. A desvantagem disso √© que o arquivo gerado ser√° bem maior que um backup de pool. VM: Esse √© o backup quando se quer tirar uma c√≥pia/clone de uma VM. Geralmente se utiliza esse backup quando se quer guardar uma VM completa para ser importada em outro ambiente xenserver ou guard√°-la para futuros backups. A vantagem desse procedimento √© que, se voc√™ quiser uma VM consistente, ter√° que realizar um backup em um intervalo bem pequeno de tempo. Muitos administradores realizam esse tipo de backup uma vez no ciclo de vida de uma VM e, ao longo do tempo, vai realizando backup do SO (Bacula, por exemplo). O ideal √© se planejar um backup utilizando todos esses n√≠veis, para compor uma solu√ß√£o onde eu tenho tanto a agilidade de recupera√ß√£o de uma VM, de um host e de um pool. Por√©m, muitas vezes por falta de recursos dispon√≠veis (l√™-se: espa√ßo de armazenamento), elaboramos abordagens que se focam mais em backups de pool e Vms, pois a partir desses dois, pode se construir novamente um pool falhado. A janela de recupera√ß√£o, nesse caso, ser√° um pouco menor, mas, dependendo do n√≠vel de criticidade do ambiente, tende a ser aceit√°vel. As possibilidades s√£o in√∫meras e se diferenciam para cada ambiente. O ‚Äúknow-how‚Äù do backup √© definir o planejamento dele. Ap√≥s isso, s√≥ passo-a-passo. Para compor sua solu√ß√£o open source de backup, sugiro pesquisar sobre o software Bacula: http://blog. bacula. org/about-bacula/what-is-bacula/ Os procedimentos para realiza√ß√£o dos diversos tipos de backup no Xenserver est√° dispon√≠vel na documenta√ß√£o oficial, a qual se encontra aqui: http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/reference. html#backups Abra√ßos e espero que tenham gostado da explica√ß√£o sobre os n√≠veis de backup existentes no Xenserver! Refer√™ncias: http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/reference. html#backups http://blog. bacula. org/about-bacula/what-is-bacula/ ¬†  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. "
    }, {
    "id": 42,
    "url": "http://localhost:4000/tecnologia/2016/02/17/alta-disponibilidade-ha-high-availability-no-xenserver-6-5.html",
    "title": "Alta disponibilidade (HA ‚Äì High Availability) no XenServer 6.5",
    "body": "2016/02/17 - E a√≠, leitor! Td bem? Bem, HA (High Availability ‚Äì Alta disponibilidade) √© um assunto bem procurado por administradores de infraestrutura, pois muitos o querem em seu ambiente (l√™-se: seu pesco√ßo), afim de deix√°-lo o mais seguro e resiliente poss√≠vel. Aliado a isto, o fato de esse recurso ser completamente open source (a√™√™√™√™√™) no XenServer 6. 5, contribui bastante para sua ado√ß√£o. A facilidade de configura√ß√£o de HA coloca este recurso na lista dos top 10 mais utilizados no XenServer. Mas, em qu√™ consiste o HA? Simples, este sistema tenta proteger seu ambiente (suas Vms) em caso de falhas f√≠sicas ou l√≥gicas no host xen. E o que ele faz para tentar garantir isso? Ele tentar√° migrar as VMs do host xen falhado para algum host vivo (e de bem com a vida). Para isso, o HA faz uso do recurso XenMotion (falo sobre XenMotion aqui). Explicando o HA de forma mais completa: Os alicerces para o funcionamento do HA em um pool de recursos s√£o: Planejamento da disponibilidade dos recursos, detec√ß√£o da falha e execu√ß√£o da recupera√ß√£o. Planejamento da disponibilidade dos recursos: Neste etapa, o HA ir√° planejar qual a toler√¢ncia de falha nos servidores (quantos servidores podem falhar) dentro do pool. Basicamente, baseado em quantas Vms voc√™ quer proteger dentro de cada host, o pr√≥prio HA emitir√° um aviso informando qual o limite de servidores que podem falhar no pool para que essas Vms sejam ligadas em outros servidores ativos. Portanto, se voc√™ quiser ter resili√™ncia total do seu ambiente, deixe sempre uma reserva de recurso (RAM e CPU) em cada host. Essa reserva ser√° utilizada para alocar Vms de hosts que podem vir a falhar. Claro, o tamanho desta reserva vai depender de quantos hosts e quanto de recurso (RAM e CPU) voc√™ ter√° e quantas Vms voc√™ vai querer ‚Äúsalvar‚Äù. O HA sempre calcular√°, automaticamente, a quantidade de recursos dispon√≠veis no pool para lhe dizer qual toler√¢ncia de falhas voc√™ tem naquele momento. Detec√ß√£o da falha: Quando voc√™ for configurar o HA em um pool, o Xenserver vai pedir para escolher um SR onde ele ir√° gravar o keep alive dos servidores. Este ser√° um SR compartilhado (no pool) chamado Heartbeat SR (que armazena o ‚Äúbatimento card√≠aco‚Äù dos servidores ‚Äì 356Mb tamanho). Ele nada mais armazena do que informa√ß√µes de status (vida [response] ou morte [timeout]) de cada servidor no pool. Em um intervalo de tempo, cada servidor fornece a informa√ß√£o que est√° vivo para este SR (keep alive). Se esta informa√ß√£o n√£o chegar, o HA reconhecer√° que o servidor morreu e tentar√° seguir o plano de recupera√ß√£o das Vms (de acordo com o que voc√™ planejou). Pode acontecer de um host perder as configura√ß√µes de rede, ou um bug no toolstack, ou um administrador descuidado retirar ou alterar o ip de ger√™ncia do host para uma faixa desconhecida. Nestes casos, a comunica√ß√£o do host para o storage n√£o foi perdida (ou seja, as Vms continuar√£o rodando normalmente), por√©m o host xen ficar√° inacess√≠vel. Para nossa alegria, o HA consegue detectar que houve falha na rede (sim, ele tamb√©m checa de tempos em tempos a rede do host). Quando ocorre isso, entra em cena um recurso chamado host fencing, que vai desligar o host, e tentar recuperar as Vms protegidas associadas a ele, migrando-as para outro host com recurso dispon√≠vel. Execu√ß√£o da recupera√ß√£o: Acontece o que expliquei em t√≥picos anteriores. Se o host deixar de mandar um keep-alive para o storage ou se a rede de ger√™ncia do host for perdida (por algum motivo) iniciar√° o processo de recupera√ß√£o das Vms, realizado pelo sistema de HA do XenServer. Nestes dois casos, o servidor estar√° indispon√≠vel e as Vms ser√£o migradas para outro host dispon√≠vel no pool de recursos. Resumindo (mais do que foi resumido): Na cria√ß√£o do HA, voc√™ seleciona quais Vms v√£o ser reiniciadas em caso de falhas (indicando qual a ordem de inicializa√ß√£o). Dinamicamente, o HA vai mostrando se ele tem condi√ß√µes de recuperar todas as Vms. √â perguntado tamb√©m qual a toler√¢ncia que voc√™ quer para falhas em servidores (configured failed capacity) e, automaticamente, o Xenserver vai te dizer se √© poss√≠vel ele garantir essa recupera√ß√£o (current failed capacity). Lembrando que o valor do ‚Äúcurrent failed capacity‚Äù vai alterando dinamicamente de acordo com o provisionamento ou altera√ß√£o de novas Vms no pool, pois, ao longo do tempo os recursos de RAM e CPU entram em escassez, podendo chegar no ponto em que os recursos de ‚Äúsobra‚Äù nos hosts n√£o sejam suficientes para garantir o plano de recupera√ß√£o configurado pelo administrador (esse ponto √© conhecido como overcomitted). N√£o se preocupe, o Xenserver enviar√° alertas automaticamente pelo Xencenter ou por e-mail (se configurado) quando o recurso f√≠sico dispon√≠vel n√£o suportar recuperar todas as Vms protegidas pelo HA. Ent√£o, fique atento! Resumindo (com imagens) com duas situa√ß√µes, uma com sucesso e outra sem sucesso no plano de recupera√ß√£o (por causa de overcommitting): ¬† ¬† Ciclo de vida do HA no Xenserver: ¬† ¬† Requisitos e recomenda√ß√µes:  ‚Äì Um pool de recursos, logicamente;   ‚Äì Recomenda-se pelo menos 3 hosts nesse pool;   ‚Äì Um SR compartilhado, sendo este do tipo NFS, iSCSI ou FC de pelo menos 356MB ou superior. ¬†Destes 356MB ser√£o: 4MB para dados do heartbeating e 256MB para metadados do membro master do pool, para os casos onde ele falhar√°.   A citrix recomenda que voc√™ utilize um SR dedicado para conter estes dados.   ‚Äì IP est√°tico para todos os hosts no pool;   Se o endere√ßo de IP de um host mudar, provavelmente o HA considerar√° que a sua rede falhou e ir√° ativar o host fencing. Para remediar isto, basta desabilitar o HA (comando # host-emergency-ha-disable) e resetar o membro master do pool (comando # pool-emergency-reset-master) e s√≥ ent√£o reabilitar o HA.   ‚Äì vDisks (discos virtuais) de VMs dever√£o estar em storages compartilhados;   ‚Äì Vms n√£o devem ter conex√£o ativas para unidades de DVD local do host xen;   ‚Äì Vms devem ter interfaces de rede virtuais dispon√≠veis em todo o pool;  Algumas considera√ß√µes: ‚Äì Update/Upgrade de Xenserver: Antes de qualquer procedimento deste tipo, desabilite o HA, pois, muito provavelmente seu servidor precisar√° ter seu XAPI ou kernel reinicializado. Voc√™ n√£o quer que o HA entenda isso como uma falha, n√©? ‚Äì Vms configuradas no plano de HA pela op√ß√£o de best-effort n√£o est√£o protegidas atrav√©s do plano de recupera√ß√£o de Vms do HA. Como o pr√≥prio nome j√° sugere (melhor esfor√ßo), o sistema do HA tentar√° alocar uma VM em um servidor onde haja espa√ßo em recursos. Por isso, as VM com prioridades de reinicializa√ß√£o 0, 1, 2 e 3 s√£o as √∫nicas que estar√£o no plano de recupera√ß√£o do HA. Ent√£o, fique de olho no que √© servi√ßo cr√≠tico em seu ambiente. ‚Äì No planejamento de reinicializa√ß√£o, sempre √© bom estabelecer tanto a prioridade quanto o delay das reinicializa√ß√µes. A primeira serve para definir quem ir√° rebootar primeiro (DHCP, AD, SAMBA, DNS, por exemplo) e o atraso entre estes reboots. Por exemplo, voc√™ n√£o vai querer que o servi√ßo de DHCP de sua rede entre depois de um servi√ßo SAMBA, ou que uma aplica√ß√£o que usa um compartilhamento do SAMBA ligue ap√≥s o pr√≥prio SAMBA, n√£o √©? Fora isso, ainda tem o problema da ‚Äúchuva de boots‚Äù que consiste no overhead do Dom0 para gerenciar o boot de muitas Vms ligando de uma vez. A ‚Äúchuva de boots‚Äù pode comprometer o desempenho de seu ambiente de virtualiza√ß√£o. ‚Äì Considere utilizar multipathing na comunica√ß√£o para seu(s) storages e configurar bond nas interfaces de rede de ger√™ncia de cada host no pool protegido por HA. Ter duplica√ß√£o de caminhos para rede e armazenamento melhora, consideravelmente, a capacidade que o(s) host(s) t√™m de ficarem ativos em caso de falha em uma NIC (placa de rede). Isso reduz a probabilidade de ativa√ß√£o do HA (pois √© isso que queremos, certo?). Bem, para finalizar, deixo aqui os passos (atrav√©s de documenta√ß√£o oficial) necess√°rios para habilitar o HA em um pool de Xenservers. http://support. citrix. com/article/CTX121708 Espero que tenha gostado do tutorial! At√© mais! Refer√™ncias: http://docs. citrix. com/en-us/xencenter/6-5/xs-xc-protection/xs-xc-pools-ha/xs-xc-pools-ha-enable. html http://support. citrix. com/article/CTX121708 https://xen-orchestra. com/blog/xenserver-and-vm-high-availability/ https://www. citrix. com/blogs/2011/05/18/so-what-is-xenserver-xapi/ http://wiki. xen. org/wiki/Choice_of_Toolstacks#XAPI_. 2F_XE ¬†  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. "
    }, {
    "id": 43,
    "url": "http://localhost:4000/tecnologia/2016/02/16/monitoramento-xenserver-6-5.html",
    "title": "Monitoramento ‚Äì XenServer 6.5",
    "body": "2016/02/16 - Ol√°, hoje o assunto √© sobre Monitoramento do ambiente de virtualiza√ß√£o XenServer. O assunto √© bem simples, mas pouca gente sabe o qu√£o ampla √© a gama de m√©tricas que o XenServer consegue capturar no seu funcionamento. Por padr√£o, √© mostrado no XenCenter, na aba ‚Äúperformance‚Äù do host ou VM, gr√°ficos de utiliza√ß√£o de mem√≥ria RAM, network e CPU. Por√©m, voc√™ pode querer capturar outras m√©ticas, como a quantidade de IOPS (Entra e sa√≠da por segundo) na escrita dos VDIs das VMs, a lat√™ncia do disco ou rede de um host, dentre v√°rios dados. Essas m√©tricas s√£o mostradas no Xencenter atrav√©s de RRDs (Base de dados Roud Robin), que s√£o arquivos que guardam diversos dados sobre as m√©tricas de rede, CPU, RAM, Storage, etc. Caso voc√™ queira pegar esses RRDs para utilizar em outras ferramentas, pode tamb√©m captur√°-los via HTTP. Como √© mostrado aqui: http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/reference. html#analyzing_rrds Voc√™ tamb√©m pode querer adicionar o monitoramento de seu ambiente de virtualiza√ß√£o em um software de monitoramento de ambiente, como o nagios ou cacti. Deixo um link aqui de um script para nagios para monitoramento de diversas informa√ß√µes em um pool de servidores XenServer. Ele √© totalmente adapt√°vel, abrindo facilmente a possibilidade de adi√ß√£o de novas m√©tricas. https://exchange. nagios. org/directory/Plugins/Operating-Systems/*-Virtual-Environments/Others/Check-XenServer/details O conjunto de m√©tricas dispon√≠veis no Xenserver para serem capturadas tanto no Host quanto nas VMs est√° dispon√≠vel na documenta√ß√£o oficial do XenServer, que pode ser vista aqui: http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/reference. html#performance_monitoring Espero que tenha gostado da breve explica√ß√£o. Qualquer d√∫vida, s√≥ chamar! Abra√ßo. Refer√™ncias: https://pt. wikipedia. org/wiki/RRDTool http://docs. vmd. citrix. com/XenServer/6. 5. 0/1. 0/en_gb/reference. html#performance_monitoring http://xenserver. org/partners/20-dev-hints/120-xs-pool-check-nagios. html https://exchange. nagios. org/directory/Plugins/Operating-Systems/*-Virtual-Environments/Others/Check-XenServer/details ¬†  Este trabalho de Marllus, est√° licenciado com uma Licen√ßa Creative Commons &#8211; Atribui√ß√£o-CompartilhaIgual 4. 0 Internacional. "
    }, {
    "id": 44,
    "url": "http://localhost:4000/tecnologia/2016/02/07/hcl-xenserver.html",
    "title": "HCL Xenserver",
    "body": "2016/02/07 - O assunto aqui √© sobre compatibilidade de hardware e XenServer. A Citrix mant√©m uma site (http://hcl. xenserver. org/) contendo todo o conjunto de hardware homologado por ela junto a diversos fabricantes de equipamentos, como Dell, HP, Supermicro, IBM. Todo equipamento que obteve √™xito nesse teste √© adicionado √† essa lista de compatibilidade (HCL). &lt;/p&gt;  Mas, o que √© essa tal de compatibilidade? Ela serve para oficializar que o XenServer vai conseguir &#8220;enxergar&#8221; (instalar os drivers) qualquer hardware que contenha na lista em quest√£o. ¬† ¬†  Pois bem, quando voc√™ estiver elaborando um projeto de especifica√ß√£o de equipamentos (servidores, storages, placas de rede (NICs), etc. ) e quiser utilizar o XenServer neste ambiente, o primeiro passo √© entrar no site (http://hcl. xenserver. org/) e procurar o hardware em quest√£o no campo de busca do mesmo. Voc√™ poder√° tamb√©m selecionar algum tipo de equipamento e fazer a listagem dos homologados. Observe a imagem¬† do site abaixo que mostra esses duas op√ß√µes que mencionei:  Mas, n√£o se preocupe se o servidor onde voc√™ ir√° instalar o seu XenServer n√£o est√° a√≠. Na verdade, necessariamente, isso n√£o √© um pr√© requisito para este fant√°stico virtualizador funcionar. Neste caso, ele poder√° at√© reconhecer e instalar todos os drivers do equipamento mas n√£o ter√° suporte oficial pela Citrix, se voc√™ tiver em mente de adquirir uma licen√ßa.  Recapitulando: Ter um hardware na HCL n√£o √© requisito para a total plenitude de funcionamento do XenServer neste ou conectado a este hardware (storages, servidores, NICs, etc. )!¬†¬†  Abra√ßos e at√© mais!  Refer√™ncias: http://hcl. xenserver. org/ "
    }, {
    "id": 45,
    "url": "http://localhost:4000/poesia/2015/12/18/quando-whatsapp-acabou.html",
    "title": "Quando o WhatsApp acabou",
    "body": "2015/12/18 - De manh√£ cedo, acordei‚Ä¶Peguei no celular, nenhuma notifica√ß√£o. Verifiquei o link de internet acessando um site qualquer. Estava beleza. O mito ent√£o era mesmo verdadeiro. Liguei pra um amigo, conversei sobre o projeto pra entregar e depois ele me contou uma est√≥ria que ocorrera com ele na noite anterior. Altos papos. Muitos risos para come√ßar o dia. Banhei, nenhuma notifica√ß√£o, me arrumei, nenhuma notifica√ß√£o, tomei caf√©, nenhuma notifica√ß√£o, assisti tv, nenhuma notifica√ß√£o, me preparei pra sair de casa e aquelea merda de notifica√ß√£o n√£o vinha. Droga. Cad√™ a galera? Peguei o carro e alavanquei no tr√¢nsito infernal, daqueles que a gente p√°ra a cada instante pra olhar o WhatsApp e trocar gaitadas nos grupos. Mas hoje n√£o tinha ningu√©m, uma alma viva sequer. Cheguei no servi√ßo e lembrei de um recado que precisava dar para minha m√£e que mora em outra cidade. Em sequ√™ncia, me veio o cancelamento do WhatsApp. Resolvi ligar e falar com ela. Fazia tempo que n√£o ouvia sua voz, meiga e cheia de saudades de mim. Aquilo foi revigorante, de fato. Passei a manh√£ visitando as salas dos amigos de outros departamentos, que faziam parte do grupo do WhatsApp do trabalho. Falamos sobre o cancelamento do aplicativo e ao mesmo tempo sobre a futura confraterniza√ß√£o da empresa. Aquele ambiente profissional, antes silencioso e quase sem nenhuma roda social (toc√°vel), estava alegre e prazeroso de se falar, ironicamente, quase como um grupo virtual. Aproveitei e conversei com um carinha que n√£o falava com ningu√©m (ou ningu√©m falava com ele). Aprendi seu nome e em qual projeto estava trabalhando. Ele j√° estava l√° h√° 3 anos. Putz. Fomos almo√ßar. Imagine a√≠ as brincadeiras e gargalhadas, os chats reais ativos‚Ä¶. que sensa√ß√£o aquela. Fazia anos que n√£o a sentia. Desde aquela √©poca em que sent√°vamos nas cal√ßadas do bairro memorare. Uma reflex√£o, fatalmente, veio √† tona. A comodidade de a√ß√µes toma conta de nosso modo em grupo. A rapidez de um p√°lido ‚Äúkkk‚Äù ou um emoticon chorando de rir nos emagrece socialmente. Todas aquelas pessoas com quem eu estava conversando pessoalmente, todos aqueles seres cheios de luz e energia olhando e mostrando verdadeiros ‚ÄúKKK‚Äôs‚Äù, era quase como n√£o acreditar que estivesse acontecendo. Que louco, que hil√°rio. Um tapa mais genu√≠no que j√° recebi na minha vida. E o mais interessante foi que me dei conta disso tudo em uma manh√£. Era a consci√™ncia pr√© trauma de uma p√≥s ultra r√°pida abstin√™ncia. De fato, revigorante. Tudo isso me fez repensar atitudes. Todo um turbilh√£o passava na minha cabe√ßa. Era a hora. Hora de me desfiliar de grupos virtuais que tomavam conta do meu precioso dia. Hora de rasgar as amarras. Voltar √† realidade t√£o bela. A conversar olho no olho. A sentir o choro do amigo molhando meu ombro. Olha a√≠, o Whats voltou. E a√≠ galeeeeeeeerraaaa!!Boa noite, grupo. "
    }];

var idx = lunr(function () {
    this.ref('id')
    this.field('title')
    this.field('body')

    documents.forEach(function (doc) {
        this.add(doc)
    }, this)
});
function lunr_search(term) {
    document.getElementById('lunrsearchresults').innerHTML = '<ul></ul>';
    if(term) {
        document.getElementById('lunrsearchresults').innerHTML = "<p>Search results for '" + term + "'</p>" + document.getElementById('lunrsearchresults').innerHTML;
        //put results on the screen.
        var results = idx.search(term);
        if(results.length>0){
            //console.log(idx.search(term));
            //if results
            for (var i = 0; i < results.length; i++) {
                // more statements
                var ref = results[i]['ref'];
                var url = documents[ref]['url'];
                var title = documents[ref]['title'];
                var body = documents[ref]['body'].substring(0,160)+'...';
                document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML = document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML + "<li class='lunrsearchresult'><a href='" + url + "'><span class='title'>" + title + "</span><br /><span class='body'>"+ body +"</span><br /><span class='url'>"+ url +"</span></a></li>";
            }
        } else {
            document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML = "<li class='lunrsearchresult'>No results found...</li>";
        }
    }
    return false;
}

function lunr_search(term) {
    $('#lunrsearchresults').show( 400 );
    $( "body" ).addClass( "modal-open" );
    
    document.getElementById('lunrsearchresults').innerHTML = '<div id="resultsmodal" class="modal fade show d-block"  tabindex="-1" role="dialog" aria-labelledby="resultsmodal"> <div class="modal-dialog shadow-lg" role="document"> <div class="modal-content"> <div class="modal-header" id="modtit"> <button type="button" class="close" id="btnx" data-dismiss="modal" aria-label="Close"> &times; </button> </div> <div class="modal-body"> <ul class="mb-0"> </ul>    </div> <div class="modal-footer"><button id="btnx" type="button" class="btn btn-danger btn-sm" data-dismiss="modal">Close</button></div></div> </div></div>';
    if(term) {
        document.getElementById('modtit').innerHTML = "<h5 class='modal-title'>Search results for '" + term + "'</h5>" + document.getElementById('modtit').innerHTML;
        //put results on the screen.
        var results = idx.search(term);
        if(results.length>0){
            //console.log(idx.search(term));
            //if results
            for (var i = 0; i < results.length; i++) {
                // more statements
                var ref = results[i]['ref'];
                var url = documents[ref]['url'];
                var title = documents[ref]['title'];
                var body = documents[ref]['body'].substring(0,160)+'...';
                document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML = document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML + "<li class='lunrsearchresult'><a href='" + url + "'><span class='title'>" + title + "</span><br /><small><span class='body'>"+ body +"</span><br /><span class='url'>"+ url +"</span></small></a></li>";
            }
        } else {
            document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML = "<li class='lunrsearchresult'>Sorry, no results found. Close & try a different search!</li>";
        }
    }
    return false;
}
    
$(function() {
    $("#lunrsearchresults").on('click', '#btnx', function () {
        $('#lunrsearchresults').hide( 5 );
        $( "body" ).removeClass( "modal-open" );
    });
});
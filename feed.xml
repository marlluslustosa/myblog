<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Lulu space</title>
    <description>Uma salada de ideias nossa de cada dia.</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Sun, 17 May 2020 21:27:16 -0300</pubDate>
    <lastBuildDate>Sun, 17 May 2020 21:27:16 -0300</lastBuildDate>
    <generator>Jekyll v3.8.5</generator>
    
      <item>
        <title>S√≥ me resta o grito</title>
        <description>&lt;p&gt;Assim como as inquieta√ß√µes de Edvard Munch, que caminham entre doen√ßas, vida e morte, tento descrever o momento √∫nico dessa ilustra√ß√£o a partir de suas pinceladas, onde podemos suscitar a fragilidade e a transitoriedade da vida.&lt;/p&gt;

&lt;p&gt;Ao vigiar essa rua da cidade, temporariamente deserta, descobri um homem, arrastando seu objeto de trabalho, como se fosse em uma dire√ß√£o que nunca ter√° fim, um horizonte invis√≠vel.
A loucura toma conta do ar, entremeada por agonia, rezas e rasga mortalhas, em um c√©u silencioso e de sangue.
Estamos vivendo a passagem do pr√≥prio tempo.
O sinal de pare pouco importa.
S√≥ me resta o grito.&lt;/p&gt;
</description>
        <pubDate>Fri, 15 May 2020 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/arte/2020/05/15/so-me-resta-grito.html</link>
        <guid isPermaLink="true">http://localhost:4000/arte/2020/05/15/so-me-resta-grito.html</guid>
        
        <category>arte</category>
        
        <category>poesia</category>
        
        <category>sociedade</category>
        
        <category>gan</category>
        
        <category>deeplearning</category>
        
        <category>ganart</category>
        
        
        <category>arte</category>
        
      </item>
    
      <item>
        <title>Meu pequeno xote</title>
        <description>&lt;p&gt;N√£o fa√ßo para crer, n√£o digo para me sentir.&lt;br /&gt;
√â certo que a boca fala&lt;br /&gt;
o que n√£o quero ver,&lt;br /&gt;
mas enfia goela a dentro os devaneios alheios.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Ser o jeito que seria, se tivesse cr√©dito,&lt;br /&gt;
era a melhor coisa.&lt;br /&gt;
Mas a vida √© feito de regras.&lt;br /&gt;
M√°s ou boas, sempre estar√£o l√°,&lt;br /&gt;
com o mesmo desafio de enterpret√°-las,&lt;br /&gt;
como que um farol, na tentativa de ver um homem urinando em sua base.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;O dif√≠cil est√° l√°, mas tamb√©m o f√°cil.&lt;br /&gt;
J√° falei da laranja e da faca e do Jo√£o a cortando.&lt;br /&gt;
A for√ßa, a leveza e a vontade √© que v√£o dar o destino do ferimento.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;S√≥ sei q nada sei, j√° falava S√≥crates.&lt;br /&gt;
Mas ser√° q ele mesmo poderia ou j√° teria feito a pergunta: Ser√° quando?&lt;br /&gt;&lt;/p&gt;
</description>
        <pubDate>Mon, 04 May 2020 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/poesia/2020/05/04/meu-pequeno-xote.html</link>
        <guid isPermaLink="true">http://localhost:4000/poesia/2020/05/04/meu-pequeno-xote.html</guid>
        
        <category>poesia</category>
        
        <category>sociedade</category>
        
        <category>socrates</category>
        
        
        <category>poesia</category>
        
      </item>
    
      <item>
        <title>Instalar Xenserver Tools (xen-tools) em Debian 5 (Lenny) (HVM para PV)</title>
        <description>&lt;p&gt;O tutorial de hoje √© sobre como intalar o XenTools em uma VM Debian 5.0 (Lenny) em um Xenserver que n√£o tem suporte a mesma (support guests), como ocorre a partir da vers√£o 6.2.&lt;/p&gt;

&lt;p&gt;Bem, instalar o xen-tools vai habilitar o administrador a realizar diversas opera√ß√µes com a VM, como gerenciar a network da mesma, monitorar o uso de mem√≥ria RAM, realizar Xen Motion al√©m de fornecer drivers para otimiza√ß√£o de I/O de disco e rede.&lt;/p&gt;

&lt;p&gt;As vezes, ocorre de voc√™ ter um sistema legado (ex. Debian 5.0), exportado de um outro hypervisor ou de uma m√°quina f√≠sica, no seu ambiente de virtualiza√ß√£o. Baseado nesse tipo de situa√ß√£o, deixo aqui um tutorial de como facilmente voc√™ pode instalar o xen-tools nessa VM e de quebra realizar a paravirtualiza√ß√£o da mesma (HVM para PV).&lt;/p&gt;

&lt;p&gt;Os passos a seguir mostram como instalar o xen-tools em um Debian 5 estando em um XenServer 7 ‚Äì Dundee. Pode ser feito tamb√©m em outras vers√µes do XenServer, como 6.2 e 6.5.&lt;/p&gt;

&lt;p&gt;Primeiro, vamos baixar o xen tools do XenServer 6.0 (N√£o √© f√°cil encontr√°-lo separado na internet, ent√£o instalei o mesmo e o peguei da pasta /&lt;em&gt;opt&lt;/em&gt;/&lt;em&gt;xensource&lt;/em&gt;/packages/iso/) e o coloquei em uma pasta p√∫blica para donwload. O link est√° abaixo:&lt;/p&gt;

&lt;p&gt;https://dl.dropboxusercontent.com/u/4912938/xentools6.0.iso&lt;/p&gt;

&lt;p&gt;Com a VM ligada, baixe o arquivo para dentro da mesma. Abaixo cito um exemplo usando wget:&lt;/p&gt;

&lt;p&gt;# &lt;em&gt;wget¬†https://dl.dropboxusercontent.com/u/4912938/xentools6.0.iso&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Ap√≥s isso, monte o arquivo .iso:&lt;/p&gt;

&lt;p&gt;# &lt;em&gt;mount -o loop xentools6.0.iso /mnt&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;OBS: O diret√≥rio /mnt foi colocado como exemplo. Se tiver outro diret√≥rio onde queira montar, altere-o.&lt;/p&gt;

&lt;p&gt;Entre no diret√≥rio de execu√ß√£o do script do xen-tools e execute-o:&lt;/p&gt;

&lt;p&gt;# &lt;em&gt;cd /mnt/Linux/&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;# &lt;em&gt;./install&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;O script vai gerar um informa√ß√£o na tela relatando que reconheceu o sistema operacional Debian 5.0 e que vai atualizar diversos arquivos, incluindo o kernel do sistema (que √© um kernel paravirtualizado).&lt;/p&gt;

&lt;p&gt;Pressione a tecla ‚Äòy‚Äô para confirmar a instala√ß√£o e configura√ß√£o.&lt;/p&gt;

&lt;p&gt;Aguarde um instante e logo terminar√° a instala√ß√£o. No final do relat√≥rio o testo ir√° relatar para reiniciar a VM.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;N√ÉO REINICIE AINDA.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;N√ÉO REINICIE AINDA.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;N√ÉO REINICIE AINDA.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Se voc√™ reiniciar, o sistema n√£o vai iniciar, pois ainda faltam configura√ß√µes adicionais para o boot conseguir ser realizado.&lt;/p&gt;

&lt;p&gt;Primeiro, entre no arquivo de configura√ß√£o da inicializa√ß√£o do grub.&lt;/p&gt;

&lt;p&gt;# &lt;em&gt;vim /boot/grub/menu.lst&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;No meu caso, o script do xen-tools instalou o kernel 2.6.32-5-amd64, ¬†e o mesmo adicionou como parti√ß√£o do arquivo initrd e kernel a /dev/hda1.&lt;/p&gt;

&lt;p&gt;A forma que o XenServer utiliza para gerenciar dispositivos de bloco virtuais de VMs √© a xvda/xvdb‚Ä¶ ao inv√©s de hda/hdb‚Ä¶ ou sda/sdb‚Ä¶. √â a√≠ que surge o problema. Se voc√™ deixar /dev/hda, quando o boot da VM ocorrer ele tentar√° iniciar o kernel paravirtualizado 2.6.32-5-amd64 e n√£o ir√° conseguir, pois o mesmo est√° referenciado por /dev/xvd*, por isso, temos que alterar no arquivo do grub.&lt;/p&gt;

&lt;p&gt;A imagem abaixo √© para mostrar como ficar√° o arquivo menu.lst.&lt;/p&gt;

&lt;p&gt;Percebam o ‚Äòroot=/dev/xvda1‚Äô para mostrar que o novo dispositivo de bloco que cont√©m o kernel e initrd est√£o nesse dispositivo de bloco.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://i567.photobucket.com/albums/ss113/marlluslustosa/arquivos_configuracaoboot_zps8we50omg.jpeg~original&quot;&gt;&lt;img class=&quot; alignnone&quot; src=&quot;http://i567.photobucket.com/albums/ss113/marlluslustosa/arquivos_configuracaoboot_zps8we50omg.jpeg~original&quot; alt=&quot;&quot; width=&quot;625&quot; height=&quot;344&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;¬†&lt;/p&gt;

&lt;p&gt;No kernel antigo (2.6.26-2-amd64) podem deixar como est√°, pois n√£o mais precisaremos dele.&lt;/p&gt;

&lt;p&gt;Saia e salve o arquivo:&lt;/p&gt;

&lt;p&gt;Tecle Esc e digite:&lt;/p&gt;

&lt;p&gt;:w!&lt;/p&gt;

&lt;p&gt;Agora v√° para o arquivo padr√£o de montagem de parti√ß√µes para atualizar o novo nome:&lt;/p&gt;

&lt;p&gt;# &lt;em&gt;vim /etc/fstab&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Altere todas as linhas que cont√©m /dev/hdx* por /dev/xvdx*.&lt;/p&gt;

&lt;p&gt;OBS: Substitua o ‚Äòx‚Äô pela letra correspondente ao dispositivo de bloco correspondente e o * pelo n√∫mero referente a parti√ß√£o.&lt;/p&gt;

&lt;p&gt;No meu caso exemplo, o arquivo ficou dessa forma:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://i567.photobucket.com/albums/ss113/marlluslustosa/fstab_zps6q8iwbro.jpeg~original&quot;&gt;&lt;img class=&quot;alignnone&quot; src=&quot;http://i567.photobucket.com/albums/ss113/marlluslustosa/fstab_zps6q8iwbro.jpeg~original&quot; alt=&quot;&quot; width=&quot;579&quot; height=&quot;201&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Salve e saia do arquivo:&lt;/p&gt;

&lt;p&gt;Tecle esc e digite:&lt;/p&gt;

&lt;p&gt;:w!&lt;/p&gt;

&lt;p&gt;Agora, iremos alterar o console padr√£o do sistema (tty) para o padr√£o do XenServer (hvc):&lt;/p&gt;

&lt;p&gt;Entre no arquivo /etc/inittab:&lt;/p&gt;

&lt;p&gt;# &lt;em&gt;vim /etc/inittab&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Adicione a linha:&lt;/p&gt;

&lt;p&gt;co:2345:respawn:/sbin/getty hvc0 9600 linux&lt;/p&gt;

&lt;p&gt;antes da linha:&lt;/p&gt;

&lt;p&gt;1:2345:respawn:/sbin/getty/ 38400 tty1&lt;/p&gt;

&lt;p&gt;Agora tenha em m√£os o uuid da VM (voc√™ pode v√™-lo atrav√©s do xencenter na aba _General¬†_da VM no canto inferior.)&lt;/p&gt;

&lt;p&gt;Abra o console do XenServer e digite os comandos abaixo:&lt;/p&gt;

&lt;p&gt;Setar o novo kernel e initrd da VM:&lt;/p&gt;

&lt;p&gt;_# xe vm-param-set uuid=&lt;vm uuid=&quot;&quot;&gt; PV-bootloader-args=&amp;#8221;&amp;#8211;kernel &lt;full path=&quot;&quot; to=&quot;&quot; xen=&quot;&quot; kernel=&quot;&quot;&gt; &amp;#8211;ramdisk &lt;full path=&quot;&quot; to=&quot;&quot; xen=&quot;&quot; initrd=&quot;&quot;&gt;&amp;#8221;&lt;/full&gt;&lt;/full&gt;&lt;/vm&gt;&lt;/p&gt;

&lt;p&gt;_ No meu caso ficou assim:&lt;/p&gt;

&lt;p&gt;#¬†_xe vm-param-set uuid=&lt;vm uuid=&quot;&quot;&gt; PV-bootloader-args=&amp;#8221;&amp;#8211;kernel /boot/vmlinuz-2.6.32-5-amd64 &amp;#8211;ramdisk¬†/boot/initrd.img-2.6.32-5-amd64&amp;#8243;_&lt;/vm&gt;&lt;/p&gt;

&lt;p&gt;Setar o local dos arquivos do kernel e initrd da VM:&lt;/p&gt;

&lt;p&gt;#¬†&lt;em&gt;xe vm-param-set uuid=&lt;/em&gt;&lt;vm uuid=&quot;&quot;&gt;_ PV-args=&amp;#8221;root=/dev/xvdx* ro quiet console=hvc0&amp;#8243;&lt;/vm&gt;&lt;/p&gt;

&lt;p&gt;_ No meu caso ficou assim:&lt;/p&gt;

&lt;p&gt;_# xe vm-param-set uuid=__&lt;vm uuid=&quot;&quot;&gt;__ PV-args=&amp;#8221;root=/dev/xvda1 ro quiet console=hvc0&amp;#8243;_&lt;/vm&gt;&lt;/p&gt;

&lt;p&gt;Setar o novo bootloader (grub) da VM:&lt;/p&gt;

&lt;p&gt;_#¬†xe vm-param-set uuid=&lt;vm uuid=&quot;&quot;&gt; PV-bootloader=pygrub_&lt;/vm&gt;&lt;/p&gt;

&lt;p&gt;Setar em branco o boot antigo (HVM):&lt;/p&gt;

&lt;p&gt;#¬†_xe vm-param-set uuid=&lt;vm uuid=&quot;&quot;&gt; HVM-boot-policy=&amp;#8221;&amp;#8221;_&lt;/vm&gt;&lt;/p&gt;

&lt;p&gt;Pronto, ap√≥s todos os comandos sem nenhum erro, voc√™ pode reinicializar a VM.&lt;/p&gt;

&lt;p&gt;Caso ocorra tudo bem, quando a mesma estiver ativa, no xencenter na aba &lt;em&gt;General&lt;/em&gt; veja seu estado de virtualiza√ß√£o¬†¬†(&lt;em&gt;Virtualization state&lt;/em&gt;) e veja se est√° com status¬†&lt;em&gt;Optimized&lt;/em&gt;. Isso quer dizer que o xen-tools est√° instalado.&lt;/p&gt;

&lt;p&gt;Para saber se a VM est√° rodando em modo PV, no campo ‚Äú&lt;em&gt;Virtualization mode&lt;/em&gt;‚Äù vai estar escrito PV. Caso esteja utilizando o XenServer 6.5 ou 6.2 digite o comando abaixo dentro da VM:&lt;/p&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;# dmesg&lt;/td&gt;
      &lt;td&gt;egrep -i ‚Äúxen&lt;/td&gt;
      &lt;td&gt;front‚Äù&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Se ela estiver em PV (paravirtualizada), as seguintes linhas aparecer√£o, dentre outras informa√ß√µes:&lt;/p&gt;

&lt;p&gt;&lt;em&gt;‚Ä¶&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Booting paravirtualized kernel on Xen&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;‚Ä¶&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;blkfront: xvda: barriers enable&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Initialising Xen virtual ethernet drive&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Abaixo deixo o print da tela de op√ß√µes que ser√£o habilitadas com o xen-tools instalado:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://i567.photobucket.com/albums/ss113/marlluslustosa/xen-tools_zpsd1fi5tkj.png~original&quot;&gt;&lt;img class=&quot;alignnone&quot; src=&quot;http://i567.photobucket.com/albums/ss113/marlluslustosa/xen-tools_zpsd1fi5tkj.png~original&quot; alt=&quot;&quot; width=&quot;303&quot; height=&quot;271&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Chegamos ao fim, enfim.&lt;/p&gt;

&lt;p&gt;Grande abra√ßo e qualquer d√∫vida poste nos coment√°rios ou mande e-mail (marlluslustosa@gmail.com).&lt;/p&gt;

&lt;p&gt;Se quiser ter acesso a uma s√©rie de tutorias sobre diversas funcionalidades do XenServer, acesse a p√°gina inicial do projeto: &lt;a href=&quot;http://www.marllus.com/xenserver&quot; target=&quot;_blank&quot;&gt;http://www.marllus.com/xenserver&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Refer√™ncias:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://discussions.citrix.com/topic/307891-paravirtualizing-debian/&quot; target=&quot;_blank&quot;&gt;http://discussions.citrix.com/topic/307891-paravirtualizing-debian/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://discussions.citrix.com/topic/151259-howto-convert-hvm-to-paravirtmanual-p2v-rhel5sles10sp1/&quot; target=&quot;_blank&quot;&gt;http://discussions.citrix.com/topic/151259-howto-convert-hvm-to-paravirtmanual-p2v-rhel5sles10sp1/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://support.citrix.com/article/CTX121875&quot; target=&quot;_blank&quot;&gt;http://support.citrix.com/article/CTX121875&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://discussions.citrix.com/topic/259891-tut-debian-lenny-paravirtualization-with-xentools-updated/&quot; target=&quot;_blank&quot;&gt;http://discussions.citrix.com/topic/259891-tut-debian-lenny-paravirtualization-with-xentools-updated/&lt;/a&gt;&lt;/p&gt;

</description>
        <pubDate>Thu, 21 Jul 2016 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/tecnologia/2016/07/21/instalar-xenserver-tools-xen-tools-em-debian-5-lenny-hvm-para-pv.html</link>
        <guid isPermaLink="true">http://localhost:4000/tecnologia/2016/07/21/instalar-xenserver-tools-xen-tools-em-debian-5-lenny-hvm-para-pv.html</guid>
        
        
        <category>tecnologia</category>
        
      </item>
    
      <item>
        <title>V√©spera</title>
        <description>&lt;p&gt;Em p√© nesse caminho&lt;br /&gt;
Me vejo insano e faminto&lt;br /&gt;
O grito da catraca me atraca&lt;br /&gt;
A ter vontade de esperar.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Jo√£os e Marias&lt;br /&gt;
Na esperan√ßa da fina endorfina&lt;br /&gt;
Se na Ter√ßa vem pa√ßoca&lt;br /&gt;
Se na quarta vem lingui√ßa.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Os meios s√£o nexos&lt;br /&gt;
O caminho √© certo&lt;br /&gt;
A multid√£o √© limpa&lt;br /&gt;
Depois das 12, encrenca.&lt;br /&gt;
Mas que n√£o falte a comida.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;E ao chegar perto a tripa aperta.&lt;br /&gt;
Com os olhos l√° dentro,&lt;br /&gt;
A saliva acomete e a vontade √© certa,&lt;br /&gt;
Na v√©spera.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Os meios sao nexos&lt;br /&gt;
O caminho √© certo&lt;br /&gt;
A multid√£o √© limpa&lt;br /&gt;
Depois das 12, encrenca.&lt;br /&gt;
Mas que n√£o falte a comida.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Eita q eu vou entrar, ser√°?&lt;br /&gt;
Tem mais um bolinho ali.&lt;br /&gt;
Que horas me farto? Que fardo!&lt;br /&gt;
Vamo sim, √© agora! Vamo que √© hora!&lt;br /&gt;&lt;/p&gt;
</description>
        <pubDate>Sun, 03 Jul 2016 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/poesia/2016/07/03/vespera.html</link>
        <guid isPermaLink="true">http://localhost:4000/poesia/2016/07/03/vespera.html</guid>
        
        <category>poesia</category>
        
        <category>sociedade</category>
        
        <category>reflexao</category>
        
        <category>pensamento</category>
        
        
        <category>poesia</category>
        
      </item>
    
      <item>
        <title>XenMotion no XenServer 6.5</title>
        <description>&lt;p&gt;XenMotion √© um recurso bem interessante e muito importante dentro de ambiente de virtualiza√ß√£o do XenServer. √â com ele que o HA (High Availability), WLB (Work Load Balancing ‚Äì Vers√£o paga do XenServer ‚Äì üôÅ ¬†) e Rolling Pool Upgrade funcionam direitinho, habilitando a possibilidade de mover as VMs entre hosts do mesmo pool sem (ou quase sem) downtime (geralmente 1 ou 2 pings perdidos).&lt;/p&gt;

&lt;p&gt;O XenMotion j√° vem habilitado no XenServer na vers√£o gratuita. E ele serve, basicamente (e como falei acima), para voc√™ poder movimentar VMs ‚Äú√† quente‚Äù entre hosts xen em um mesmo pool, ou seja, o storage (SR) t√™m de ser compartilhado entre as VMs (Geralmente um storage, adicionado em um pool, do tipo iscsi, fc, nfs).&lt;/p&gt;

&lt;p&gt;Mas, quais os requisitos mais espec√≠ficos para utilizar o XenMotion?&lt;/p&gt;

&lt;p&gt;‚Äì O XenServer tools deve estar instalado na VM;&lt;/p&gt;

&lt;p&gt;‚Äì O host xen destino t√™m de ter a mesma ou vers√£o superior do XenServer do host de origem;&lt;/p&gt;

&lt;p&gt;‚Äì O host xen destino t√™m que ter mem√≥ria suficiente para o provisionamento¬†da VM, caso contr√°rio a VM n√£o completar√° o processo de migra√ß√£o (isso √© meio l√≥gico, rs);&lt;/p&gt;

&lt;p&gt;‚Äì O drive de DVD deve estar setado como empty (n√£o deve ter nenhuma .iso anexada ou nenhum cd/dvd dentro do drive do host f√≠sico);&lt;/p&gt;

&lt;p&gt;‚Äì Ter um SR compartilhado no pool (NFS, iSCSI/FC SAN);&lt;/p&gt;

&lt;p&gt;Mas, e em quais situa√ß√µes voc√™ vai usar o XenMotion (fora ficar brincando de jogar uma VM de um host pra outro s√≥ pra ver como √© lindo isso funcionando, rs)?&lt;/p&gt;

&lt;p&gt;Voc√™ pode usar isso, por exemplo, quando for atualizar um host xen, migrando¬†as VMs nele contidas para um outro host xen. Al√©m disso, voc√™ pode usar pra migrar VMs enquanto faz manuten√ß√£o em um host ou at√© planejar um script balanceador de carga entre hosts f√≠sicos (o que o Work Loading Balancig faz ‚Äì na vers√£o do Xenserver com lince√ßa). Enfim, as possibilidades s√£o muitas. S√≥ a produ√ß√£o e o dia a dia que vai te desafiar com situa√ß√µes como estas. √â s√≥ pensar sobre os benef√≠cios e planej√°-los bem!&lt;/p&gt;

&lt;p&gt;Para saber como migrar uma VM atrav√©s do XenCenter, acesse esse tutorial (&lt;a href=&quot;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-vms-manage/xs-xc-vms-relocate.html&quot; target=&quot;_blank&quot;&gt;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-vms-manage/xs-xc-vms-relocate.html&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Tutoriais/ explica√ß√µes em v√≠deo:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=hTlwlNjc86M&quot; target=&quot;_blank&quot;&gt;https://www.youtube.com/watch?v=hTlwlNjc86M&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=05Zc0ze5CpQ&quot; target=&quot;_blank&quot;&gt;https://www.youtube.com/watch?v=05Zc0ze5CpQ&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=vcPzrnrnYCU&quot; target=&quot;_blank&quot;&gt;https://www.youtube.com/watch?v=vcPzrnrnYCU&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;At√© breve!&lt;/p&gt;

&lt;p&gt;Abra√ßo!&lt;/p&gt;

&lt;p&gt;¬†&lt;/p&gt;

&lt;p&gt;Refer√™ncias:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://support.citrix.com/article/CTX115813&quot; target=&quot;_blank&quot;&gt;http://support.citrix.com/article/CTX115813&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.amazon.com.br/Mastering-Citrix-Xenserver-Martez-Reed/dp/178328739X&quot; target=&quot;_blank&quot;&gt;http://www.amazon.com.br/Mastering-Citrix-Xenserver-Martez-Reed/dp/178328739X&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-vms-manage/xs-xc-vms-relocate.html&quot; target=&quot;_blank&quot;&gt;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-vms-manage/xs-xc-vms-relocate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://msinhore.wordpress.com/2012/09/20/storage-xenmotion/&quot; target=&quot;_blank&quot;&gt;https://msinhore.wordpress.com/2012/09/20/storage-xenmotion/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=hTlwlNjc86M&quot; target=&quot;_blank&quot;&gt;https://www.youtube.com/watch?v=hTlwlNjc86M&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=05Zc0ze5CpQ&quot; target=&quot;_blank&quot;&gt;https://www.youtube.com/watch?v=05Zc0ze5CpQ&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=vcPzrnrnYCU&quot; target=&quot;_blank&quot;&gt;https://www.youtube.com/watch?v=vcPzrnrnYCU&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.citrix.com/content/dam/citrix/en_us/documents/products-solutions/storage-xenmotion-live-storage-migration-with-citrix-xenserver.pdf?accessmode=direct&quot; target=&quot;_blank&quot;&gt;https://www.citrix.com/content/dam/citrix/en_us/documents/products-solutions/storage-xenmotion-live-storage-migration-with-citrix-xenserver.pdf?accessmode=direct&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;¬†&lt;/p&gt;

&lt;p style=&quot;text-align: center;&quot;&gt;
  &lt;a href=&quot;http://creativecommons.org/licenses/by-sa/4.0/&quot; rel=&quot;license&quot;&gt;&lt;img style=&quot;border-width: 0;&quot; src=&quot;https://i.creativecommons.org/l/by-sa/4.0/88x31.png&quot; alt=&quot;Licen√ßa Creative Commons&quot; /&gt;&lt;/a&gt;&lt;br /&gt; Este trabalho de &lt;a href=&quot;http://ports.marllus.com&quot;&gt;Marllus&lt;/a&gt;, est√° licenciado com uma Licen√ßa &lt;a href=&quot;http://creativecommons.org/licenses/by-sa/4.0/&quot; rel=&quot;license&quot;&gt;Creative Commons &amp;#8211; Atribui√ß√£o-CompartilhaIgual 4.0 Internacional&lt;/a&gt;.
&lt;/p&gt;
</description>
        <pubDate>Wed, 17 Feb 2016 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/tecnologia/2016/02/17/xenmotion-no-xenserver-6-5.html</link>
        <guid isPermaLink="true">http://localhost:4000/tecnologia/2016/02/17/xenmotion-no-xenserver-6-5.html</guid>
        
        
        <category>tecnologia</category>
        
      </item>
    
      <item>
        <title>Xencenter</title>
        <description>&lt;p class=&quot;p1&quot;&gt;
  O assunto agora √© sobre gerenciamento do XenServer. Neste caso, falaremos sobre XenCenter, que √© o software OFICIAL de ger√™ncia do XenServer.
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  Antes de come√ßar a falar sobre ele, muita gente (principalmente os #linuxUsers) tem a seguinte d√∫vida: Existe alguma ferramenta de ger√™ncia do XenServer que rode na web ou que rode em Linux, j√° que o XenCenter s√≥ funciona por padr√£o no Windows?
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  Resposta: Sim! Existem in√∫meras ferramentas que fazem esse tipo de gerenciamento do Xen¬†(assim como outros hypervisors [esxi, kvm..]) e que funcionam tanto na plataforma web como vers√£o desktops.
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  Ex:
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  Web:
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  &amp;#8211; XenOrcherstra;
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  &amp;#8211; XAC;
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  &amp;#8211; Archipel;
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  GNU/Linux / Windows:
&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;OpenXenManager;&lt;/li&gt;
  &lt;li&gt;OpenXenCenter;&lt;/li&gt;
  &lt;li&gt;Libvirt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;p1&quot;&gt;
  Explicando:
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  Por√©m, caro usu√°rio, a bola da vez √© o seguinte dilema: Como ter efic√°cia/efici√™ncia junto com estabilidade? Se queres o primeiro, significa que voc√™ quer ter uma rela√ß√£o perfeita, al√©m de harmoniosa, entre que tipo de cliente (Web/Desktop) voc√™ ir√° usar para acessar sua infra-estrutura de virtualiza√ß√£o e as a√ß√µes que voc√™ espera o mesmo retornar a partir de seus comandos. Nem sempre √© padr√£o a estabilidade vir com a utiliza√ß√£o de ferramentas recomendadas oficialmente (como por muitos anos o internet explorer, arg‚Ä¶), mas, neste caso o que o ocorre √© que v√°rias ferramentas de terceiros (muito boas) como Xen Orcherstra e Archipel, em fase de crescimento na comunidade open source, ainda n√£o atingiram a maturidade suficiente para ATESTAR que podem realizar, com sucesso, todos os comandos para a√ß√µes realizadas em um ambiente de produ√ß√£o.
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  No ano de 2014 vi a oportunidade de pesquisa nesta √°rea (ainda) obscura, ent√£o, comecei a escrever minha monografia (especializa√ß√£o) sobre o tema, entitulada &amp;#8220;An√°lise de ferramentas open-source de administra√ß√£o de ambientes heterog√™neos de virtualiza√ß√£o&amp;#8221;. Defendi com sucesso a mesma em 2015.
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  Como resultados desta pesquisa, conclu√≠ que, a menos que voc√™ utilize estas ferramentas para medidas de montagem de ambientes futuros e testes, n√£o √© recomendado, em ambientes de alta criticidade. Imagine a seguinte situa√ß√£o: Acontece um congelamento da tela do programa (ou janela), por causa de um erro interno, no momento de uma opera√ß√£o de migra√ß√£o ou c√≥pia de uma VM. Voc√™ n√£o consegue mais visualizar os processos nem utiliza√ß√£o dos recursos do XenServer e nem os logs e n√£o sabe ver, rapidamente, se o processo travou, se o XAPI caiu ou se a VM est√° no ar ou se foi desligada.
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  Resultado: Os transtornos podem ser enormes. Fora a busca por problemas, em f√≥runs oficiais da ferramenta, que se torna limitada pelo fato de voc√™ j√° estar utilizando uma ferramenta para gerenciamento do XenServer que n√£o a oficial.
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  Aten√ß√£o: N√£o estou promovendo o uso do Windows nem desmotivando a colabora√ß√£o para com a comunidade cada vez mais livre. No entanto, preste bem aten√ß√£o no que voc√™ ir√° colocar em produ√ß√£o na infra-estrutura de seu trabalho (nas suas costas!). Teste bem e crie uma documenta√ß√£o sobre todos os testes que fizer com ela (listando o que est√° dando bugs e o que funciona &amp;#8220;redondinho&amp;#8221;).
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  Para saber como instalar o XenCenter, deixo aqui os procedimentos da documenta√ß√£o oficial:
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  &lt;a href=&quot;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-intro-welcome/xs-xc-intro-start.html&quot; target=&quot;_blank&quot;&gt;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-intro-welcome/xs-xc-intro-start.html&lt;/a&gt;
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  &lt;a href=&quot;http://docs.vmd.citrix.com/XenServer/6.5.0/1.0/en_gb/installation.html#center_installation&quot; target=&quot;_blank&quot;&gt;http://docs.vmd.citrix.com/XenServer/6.5.0/1.0/en_gb/installation.html#center_installation&lt;/a&gt;
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  Espero que tenham gostado da explica√ß√£o e das vantagens/desvantagens de utiliza√ß√£o de ferramentas n√£o oficiais.
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  Abra√ßos e at√© a pr√≥xima!
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  Refer√™ncias:
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  &lt;a href=&quot;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-intro-welcome/xs-xc-intro-start.html&quot; target=&quot;_blank&quot;&gt;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-intro-welcome/xs-xc-intro-start.html&lt;/a&gt;
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  &lt;a href=&quot;http://docs.vmd.citrix.com/XenServer/6.5.0/1.0/en_gb/installation.html#center_installation&quot; target=&quot;_blank&quot;&gt;http://docs.vmd.citrix.com/XenServer/6.5.0/1.0/en_gb/installation.html#center_installation&lt;/a&gt;
&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;
  &lt;a href=&quot;http://xenserver.org/open-source-virtualization-download.html&quot; target=&quot;_blank&quot;&gt;http://xenserver.org/open-source-virtualization-download.html&lt;/a&gt;
&lt;/p&gt;
</description>
        <pubDate>Wed, 17 Feb 2016 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/tecnologia/2016/02/17/xencenter.html</link>
        <guid isPermaLink="true">http://localhost:4000/tecnologia/2016/02/17/xencenter.html</guid>
        
        
        <category>tecnologia</category>
        
      </item>
    
      <item>
        <title>Upgrade/Update no XenServer 6.5</title>
        <description>&lt;p&gt;Segue abaixo uma descri√ß√£o resumida sobre a conceitua√ß√£o dos seguintes termos.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Update&lt;/strong&gt;: Atualiza√ß√£o (hotfixes) de procedimentos cr√≠ticos e n√£o cr√≠ticos de seguran√ßa, adi√ß√£o de drivers ou corre√ß√£o de bugs em pacotes ‚Üí Trivial;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Upgrade&lt;/strong&gt;: Atualiza√ß√£o de vers√£o do sistema de virtualiza√ß√£o XenServer, o que pode aglomerar melhorias nos drivers de dispositivos, adicionar funcionalidades, alterar vers√µes de SO usado (neste caso, o GNU/Linux CentOS) e aumento na capacidade de processamento do pr√≥prio sistema operacional ‚Üí (Geralmente cr√≠tica e menos trivial [l√™-se: trabalhosa]);&lt;/p&gt;

&lt;p&gt;O que ocorre?&lt;/p&gt;

&lt;p&gt;Muito sysadmin deixa o seu ambiente funcional, perfeitinho e redondinho e enquanto ele estiver funcionando n√£o meche nele porque ‚Äún√£o se meche com quem t√° queto‚Äù.&lt;/p&gt;

&lt;p&gt;Nos meus tempos usando XenServer e GNU/Linux aprendi uma coisa: Sempre tente deixar seus sistemas com as √∫ltimas vers√µes de atualiza√ß√£o. Updates s√£o lan√ßados para serem usados, eles cont√©m novos drivers, patches de seguran√ßa, novas vers√µes de softwares com bugs, otimiza√ß√£o de c√≥digo, enfim, n√£o ache que porque seu sistema est√° no ar que ele n√£o pode cair amanh√£ por um erro que voc√™ j√° devia t√™-lo imunizado.&lt;/p&gt;

&lt;p&gt;Te garanto que √© doloroso voc√™ ter que atualizar o seu ambiente com v√°rios hotfixes na fila de espera, pois cada update vai gerar um mini ataque card√≠aco em voc√™.&lt;/p&gt;

&lt;p&gt;Para realizar procedimento de update at√© a vers√£o 6.2 do xenserver open source voc√™ teria que ir para a CLI (Linha de comando) e aplicar os passos mostrados neste tutorial:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://support.citrix.com/article/CTX132791&quot; target=&quot;_blank&quot;&gt;http://support.citrix.com/article/CTX132791&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Curiosidade: Na √©poca em que t√≠nhamos que ir para a linha de comando na vers√£o sem licen√ßa paga, v√°rios usu√°rios da comunidade elaboraram suas pr√≥prias solu√ß√µes para realiza√ß√£o de update do ambiente. E √© disso que estou sempre falando: Compartilhamento de conhecimento!!&lt;/p&gt;

&lt;p&gt;Olhem os links:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://discussions.citrix.com/topic/310573-script-to-update-xenserver-with-powershell/&quot; target=&quot;_blank&quot;&gt;http://discussions.citrix.com/topic/310573-script-to-update-xenserver-with-powershell/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.citrix.com/blogs/2014/09/10/scripting-automating-vm-operations-on-xenserver-using-powershell/&quot; target=&quot;_blank&quot;&gt;https://www.citrix.com/blogs/2014/09/10/scripting-automating-vm-operations-on-xenserver-using-powershell/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.virtualexperience.no/2012/11/30/ctxupdate-a-powershell-script-to-download-any-citrix-updates/&quot; target=&quot;_blank&quot;&gt;https://www.virtualexperience.no/2012/11/30/ctxupdate-a-powershell-script-to-download-any-citrix-updates/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Felizmente hoje, a partir da vers√£o 6.5 (vers√£o atual at√© a √∫ltima atualiza√ß√£o deste tutorial), como o c√≥digo do XenCenter foi liberado (assim como o c√≥digo de quase todas as partes do XenServer), foi inevit√°vel liberar¬†a op√ß√£o no GUI do pr√≥prio XenCenter para realizar opera√ß√µes de update.&lt;/p&gt;

&lt;p&gt;Isso te d√° a possibilidade de deixar a cargo do¬†XenCenter baixar as atualiza√ß√µes e automaticamente aplicar e reiniciar (quando for o caso) o host, sem que se precise fazer de forma manual (apesar de ele tamb√©m disponibilizar a op√ß√£o de reiniciar o servidor manualmente).&lt;/p&gt;

&lt;p&gt;Por padr√£o, o XenCenter j√° vem configurado para sempre checar se existem atualiza√ß√µes dispon√≠veis para hosts xen nele conectados.&lt;/p&gt;

&lt;p&gt;Quando for tornada dispon√≠vel a update, ela vai aparecer na aba de notifica√ß√µes do seu XenCenter, e clicando com o bot√£o direito do mouse em cima dela voc√™ pode baixar ou obter informa√ß√µes sobre ela. Antes de atualizar, leia o m√°ximo poss√≠vel sobre a mesma afim de reconhecer os impactos esperados na pr√© e p√≥s atualiza√ß√£o do ambiente.&lt;/p&gt;

&lt;p&gt;Antes disso, realize backup de suas informa√ß√µes como metadados do pool, hosts, e VM. Saiba como realizar backup disso tudo neste &lt;strong&gt;&lt;a href=&quot;http://ports.marllus.com/?p=164&quot; target=&quot;_blank&quot;&gt;aqui&lt;/a&gt;&lt;/strong&gt;:&lt;/p&gt;

&lt;p&gt;Eu criei um desenho do fluxo processual que me baseio sempre na hora de realizar procedimentos de update em ambientes XenServer, o qual disponibilizo abaixo:&lt;/p&gt;

&lt;p&gt;¬†&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://i567.photobucket.com/albums/ss113/marlluslustosa/update_xen_host_zpsp4q0deig.jpg~original&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;&quot; src=&quot;http://i567.photobucket.com/albums/ss113/marlluslustosa/update_xen_host_zpsp4q0deig.jpg~original&quot; alt=&quot;update&quot; width=&quot;818&quot; height=&quot;589&quot; border=&quot;0&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;¬†&lt;/p&gt;

&lt;p&gt;Nele, mostro que devemos sempre checar a criticidade e impactos institucionais e t√©cnicos antes do procedimento de update, ap√≥s isso ser√° agendada a atualiza√ß√£o (se tiver paradas no servidor, dever√£o ser previamente relatadas), realizar backups do pool, Vms e xen host (quando houver recurso para o √∫ltimo), desabilitar o HA (requisito t√©cnico) e s√≥ depois iniciar a atualiza√ß√£o.&lt;/p&gt;

&lt;p&gt;Alguns procedimentos minuciosos, bem como todo o passo a passo e pr√© requisitos de configura√ß√£o necess√°rios para a realiza√ß√£o de um processo de update¬†podem ser conferidos neste link da documenta√ß√£o oficial:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-updates/xs-xc-updates-applying.html&quot; target=&quot;_blank&quot;&gt;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-updates/xs-xc-updates-applying.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Com rela√ß√£o √† Upgrades (atualiza√ß√£o de vers√£o) no Xenserver, existe a possibilidade de realiza√ß√£o do procedimento de maneira live, sem que as Vms parem, claro, se voc√™ tiver storage compartilhado. As Vms podem ser migradas de um Xenserver para outro com uma vers√£o igual ou superior da de origem, por exemplo de um xenserver 6.2 para um 6.5. Isso √© vantajoso neste tipo de atualiza√ß√£o, onde a troca das vers√µes √© crucial.&lt;/p&gt;

&lt;p&gt;Procedimentos e detalhes t√©cnicos de realiza√ß√£o de upgrade em um pool (Rolling Pool Upgrade) voc√™ pode continuar a leitura do link que passei anteriormente, at√© chegar nessa parte:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-updates/xs-xc-upgrade.html&quot; target=&quot;_blank&quot;&gt;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-updates/xs-xc-upgrade.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;E a mesma imagem para guiar voc√™ no processo de update (colocada acima) pode ser usada no processo de upgrade, claro, alterando os detalhes de ordem t√©cnica (na fase de ‚Äúinstall update‚Äù), mas, o fluxo geral √© o mesmo.&lt;/p&gt;

&lt;p&gt;Espero que tenha ficado claro para voc√™s a import√¢ncia e os procedimentos da documenta√ß√£o oficial que disponibilizei para voc√™.&lt;/p&gt;

&lt;p&gt;Grande abra√ßo.&lt;/p&gt;

&lt;p&gt;Refer√™ncias:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://support.citrix.com/article/CTX132791&quot; target=&quot;_blank&quot;&gt;http://support.citrix.com/article/CTX132791&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://discussions.citrix.com/topic/310573-script-to-update-xenserver-with-powershell/&quot; target=&quot;_blank&quot;&gt;http://discussions.citrix.com/topic/310573-script-to-update-xenserver-with-powershell/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.citrix.com/blogs/2014/09/10/scripting-automating-vm-operations-on-xenserver-using-powershell/&quot; target=&quot;_blank&quot;&gt;https://www.citrix.com/blogs/2014/09/10/scripting-automating-vm-operations-on-xenserver-using-powershell/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.virtualexperience.no/2012/11/30/ctxupdate-a-powershell-script-to-download-any-citrix-updates/&quot; target=&quot;_blank&quot;&gt;https://www.virtualexperience.no/2012/11/30/ctxupdate-a-powershell-script-to-download-any-citrix-updates/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-updates/xs-xc-updates-applying.html&quot; target=&quot;_blank&quot;&gt;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-updates/xs-xc-updates-applying.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-updates/xs-xc-upgrade.html&quot; target=&quot;_blank&quot;&gt;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-updates/xs-xc-upgrade.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;¬†&lt;/p&gt;

&lt;p style=&quot;text-align: center;&quot;&gt;
  &lt;a href=&quot;http://creativecommons.org/licenses/by-sa/4.0/&quot; rel=&quot;license&quot;&gt;&lt;img style=&quot;border-width: 0;&quot; src=&quot;https://i.creativecommons.org/l/by-sa/4.0/88x31.png&quot; alt=&quot;Licen√ßa Creative Commons&quot; /&gt;&lt;/a&gt;&lt;br /&gt; Este trabalho de &lt;a href=&quot;http://ports.marllus.com&quot;&gt;Marllus&lt;/a&gt;, est√° licenciado com uma Licen√ßa &lt;a href=&quot;http://creativecommons.org/licenses/by-sa/4.0/&quot; rel=&quot;license&quot;&gt;Creative Commons &amp;#8211; Atribui√ß√£o-CompartilhaIgual 4.0 Internacional&lt;/a&gt;.
&lt;/p&gt;
</description>
        <pubDate>Wed, 17 Feb 2016 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/tecnologia/2016/02/17/upgradeupdate-no-xenserver-6-5.html</link>
        <guid isPermaLink="true">http://localhost:4000/tecnologia/2016/02/17/upgradeupdate-no-xenserver-6-5.html</guid>
        
        
        <category>tecnologia</category>
        
      </item>
    
      <item>
        <title>Troubleshooting ‚Äì Resolu√ß√£o de problemas ‚Äì XenServer 6.5</title>
        <description>&lt;p&gt;Hoje, o assunto √© sobre troubleshooting, ou, para os menos familiarizados (adeptos do ‚Äúse est√° funcionando, est√° bom‚Äù rs) sobre resolu√ß√£o de PROBLEMAS!! At√© porque s√≥ tem problemas aqueles que fu√ßam na coisa!&lt;/p&gt;

&lt;p&gt;De acordo com a &lt;a href=&quot;https://pt.wikipedia.org/wiki/Troubleshooting&quot; target=&quot;_blank&quot;&gt;wikipedia&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;‚ÄúTroubleshooting √© uma forma de resolver problemas, muitas vezes aplicada na repara√ß√£o de produtos ou processos falhados. √â uma busca sistem√°tica e l√≥gica pela raiz de um problema, de modo a que possa ser resolvido e o produto ou processo possa ficar novamente operacional.‚Äù&lt;/p&gt;

&lt;p&gt;Portanto, partindo do princ√≠pio da busca sistem√°tica e l√≥gica, utilizarei sempre diagramas sist√™micos e fluxogramas para descrever processos de troubleshooting.&lt;/p&gt;

&lt;p&gt;Mas, porque trabalhar com fluxogramas em troubleshooting?&lt;/p&gt;

&lt;p&gt;Bem, a literatura educacional j√° tem uma muita pesquisa sobre isso ([&lt;a href=&quot;http://www.fctl.ucf.edu/TeachingAndLearningResources/SelectedPedagogies/TeachingMethods/&quot; target=&quot;_blank&quot;&gt;1&lt;/a&gt;], [&lt;a href=&quot;http://www.beds.ac.uk/jpd/volume-4-issue-2/teaching-with-infographics&quot; target=&quot;_blank&quot;&gt;2&lt;/a&gt;], [&lt;a href=&quot;http://www.academia.edu/6192606/Effectiveness_of_Flowchart_Proof_on_Selected_Topics_in_Geometry&quot; target=&quot;_blank&quot;&gt;3&lt;/a&gt;], por exemplo), mas em resumo e tomando como quest√µes tamb√©m pessoais: Entendeu ou quer que eu desenhe?&lt;/p&gt;

&lt;p&gt;Sim, esta frase, muitas vezes tratada de professor para uma sala de aula ou de um amigo que √© o ‚Äúsabich√£oz√£o‚Äù para com os outros, √© lembrada com um tom arrogante. O que quero √© tirar este r√≥tulo.&lt;/p&gt;

&lt;p&gt;No sentido literal, acredito que tudo deveria ser ‚Äúdesenhado‚Äù. A simples forma de uma desenho e a capacidade que ele tem de armazenar v√°rias informa√ß√µes em uma √∫nica imagem torna a imers√£o no conhecimento mais divertida e muito menos enfadonha. Para mim, este √© o verdadeiro papel do professor. Aquele que guia e consegue tornar trivial um conte√∫do complexo.&lt;/p&gt;

&lt;p&gt;Ler slides e livros at√© o google voice faz.&lt;/p&gt;

&lt;p&gt;Voc√™ pode perceber que na maioria dos meus tutoriais eu encaixo um desenho que tenta generalizar um processo ou a arquitetura de um sistema que estou explicando. Sempre com uma √∫nica imagem.&lt;/p&gt;

&lt;p&gt;Acredito neste tipo de imers√£o educacional. S√≥ n√£o esque√ßamos que as refer√™ncias escritas, mesmo que muitas vezes chatas, tem de ser levadas em suma considera√ß√£o. Desenhos s√£o generaliza√ß√µes que quase sempre n√£o s√£o perfeitas. A ideia dele √© fazer com que o leitor desperte um interesse ou que o processo de melhoria/releitura de um conte√∫do ocorra de forma mais eficiente (em menos tempo).&lt;/p&gt;

&lt;p&gt;Bem, em processos de resolu√ß√£o de problemas n√£o seria diferente. Na comunidade do xenserver temos muito pouca (ou nenhuma) documenta√ß√£o de troubleshooting atrav√©s de fluxogramas. Claro que usu√°rios do f√≥rum oficial (&lt;a href=&quot;https://discussions.citrix.com/&quot; target=&quot;_blank&quot;&gt;Discussion Citrix&lt;/a&gt;) e comunidades (&lt;a href=&quot;https://groups.google.com/forum/#!forum/xen-br&quot; target=&quot;_blank&quot;&gt;xen-br&lt;/a&gt;, &lt;a href=&quot;https://groups.google.com/forum/#!forum/gc-br&quot; target=&quot;_blank&quot;&gt;gc-br&lt;/a&gt;, Telegram Xenserver) ajudam bastante, mas, √© como se o conhecimento estivesse espalhado e disperso em f√≥runs e d√∫vidas de usu√°rios. N√£o h√° algo conciso, neste caso.&lt;/p&gt;

&lt;p&gt;Bem, uma vez fui aplicar 5 hotfixes em um xenserver 6.2 (desculpe, me atrasei). Seguindo a documenta√ß√£o oficial era como roubar doce de crian√ßa (mil maravilhas), mas, na pr√°tica n√£o √© bem esse carnaval n√£o. √â como voc√™ recompilar um kernel Linux achando que ele n√£o vai dar pelo menos um bug. Inoc√™ncia.&lt;/p&gt;

&lt;p&gt;Ca√≠ em v√°rias armadilhas e situa√ß√µes adversas neste processo e sempre resolvia tentando encontrar solu√ß√µes naquele momento. Resultado: Sanei os problemas, atualizei meu ambiente e o trabalh√£o que deu n√£o foi documentado. POOFF na cara da comunidade (e na minha)!&lt;/p&gt;

&lt;p&gt;A partir da√≠, resolvi documentar, no estilo de fluxogramas, os processos de troubleshooting do xenserver em determinadas fases de manuten√ß√£o.&lt;/p&gt;

&lt;p&gt;Atualmente, realizei a cria√ß√£o de um fluxograma do processo referente ao troubleshooting de erros na aplica√ß√£o de updates no XenServer 6.5. Disponibilizo este documento logo abaixo:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://marllus.com/xenserver/trouble_update.html&quot; target=&quot;_blank&quot;&gt;Troubleshooting update ‚Äì XenServer 6.5&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;Para muitos que sofrem com bugs quando v√£o atualizar seu ambiente, creio que este processo ir√° ser de grande ajuda.&lt;/p&gt;

&lt;p&gt;Meu objetivo √© fazer com que usu√°rios contribuam com processos que podem ser melhorados/otimizados no fluxograma. Remodelando o documento atrav√©s do perfil da comunidade, por meio de cr√≠ticas e sugest√µes de usu√°rios, poderemos compilar uma documenta√ß√£o ainda mais concisa do que disponibilizo aqui para voc√™.&lt;/p&gt;

&lt;p&gt;Com o passar do tempo creio que este post vai crescer bastante, pois novos fluxogramas ir√£o sendo disponibilizados por mim e pela comunidade. √â o que quero.&lt;/p&gt;

&lt;p&gt;Um abra√ßo! At√© mais.&lt;/p&gt;

&lt;p&gt;Refer√™ncias:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://pt.wikipedia.org/wiki/Troubleshooting&quot; target=&quot;_blank&quot;&gt;https://pt.wikipedia.org/wiki/Troubleshooting&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://discussions.citrix.com/&quot; target=&quot;_blank&quot;&gt;https://discussions.citrix.com/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://groups.google.com/forum/#!forum/xen-br&quot; target=&quot;_blank&quot;&gt;https://groups.google.com/forum/#!forum/xen-br&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://groups.google.com/forum/#!forum/gc-br&quot; target=&quot;_blank&quot;&gt;https://groups.google.com/forum/#!forum/gc-br&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;¬†&lt;/p&gt;

&lt;p style=&quot;text-align: center;&quot;&gt;
  &lt;a href=&quot;http://creativecommons.org/licenses/by-sa/4.0/&quot; rel=&quot;license&quot;&gt;&lt;img style=&quot;border-width: 0;&quot; src=&quot;https://i.creativecommons.org/l/by-sa/4.0/88x31.png&quot; alt=&quot;Licen√ßa Creative Commons&quot; /&gt;&lt;/a&gt;&lt;br /&gt; Este trabalho de &lt;a href=&quot;http://ports.marllus.com&quot;&gt;Marllus&lt;/a&gt;, est√° licenciado com uma Licen√ßa &lt;a href=&quot;http://creativecommons.org/licenses/by-sa/4.0/&quot; rel=&quot;license&quot;&gt;Creative Commons &amp;#8211; Atribui√ß√£o-CompartilhaIgual 4.0 Internacional&lt;/a&gt;.
&lt;/p&gt;
</description>
        <pubDate>Wed, 17 Feb 2016 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/tecnologia/2016/02/17/troubleshooting-resolucao-de-problemas-xenserver-6-5.html</link>
        <guid isPermaLink="true">http://localhost:4000/tecnologia/2016/02/17/troubleshooting-resolucao-de-problemas-xenserver-6-5.html</guid>
        
        
        <category>tecnologia</category>
        
      </item>
    
      <item>
        <title>Storage XenMotion no XenServer 6.5</title>
        <description>&lt;p&gt;Falei, anteriormente &lt;a href=&quot;http://ports.marllus.com/2016/02/17/xenmotion-no-xenserver-6-5/&quot; target=&quot;_blank&quot;&gt;aqui&lt;/a&gt; sobre ‚ÄúXenMotion‚Äù. Hoje irei falar sobre ‚ÄúStorage XenMotion‚Äù.&lt;/p&gt;

&lt;p&gt;Storage XenMotion nos remete a ideia de ‚ÄúXenMotion entre storages‚Äù, e √© exatamente isso que este recurso (fascinante) faz. A partir dele, a VM pode ser transferida entre storages distintos, ou seja, os discos da VM (VDIs) podem ser migrados entre pools diferentes (entre dois sites XenServer). Tudo isso com o m√≠nimo de downtime poss√≠vel, pois geralmente se perde alguns pings quando se √© re-setado a placa de rede virtual e a rota √© alterada.&lt;/p&gt;

&lt;p&gt;E n√£o √© propaganda Tekpix, o recurso existe e √© dispon√≠vel com c√≥digo fonte liberado (a√™√™√™√™√™√™)!!!&lt;/p&gt;

&lt;p&gt;OBS: Convido voc√™ a ir no site da VMware e ver a bagatela que √© a licen√ßa com o recurso equivalente (&lt;a href=&quot;http://store.vmware.com/store/vmware/en_US/pd/productID.284281000?src=WWW_eBIZ_productpage_vSphere_EnterprisePlus_Buy_US&quot; target=&quot;_blank&quot;&gt;VMware Storage vMotion&lt;/a&gt;) habilitado.&lt;/p&gt;

&lt;p&gt;Muitos dos requisitos necess√°rios para utilizar Storage XenMotion s√£o do pr√≥prio XenMotion.&lt;/p&gt;

&lt;p&gt;A lista com todos √© essa:&lt;/p&gt;

&lt;p&gt;‚Äì O XenServer tools deve estar¬†instalado na VM;&lt;/p&gt;

&lt;p&gt;‚Äì O host xen destino t√™m de ter a mesma ou vers√£o superior do XenServer do host de origem;&lt;/p&gt;

&lt;p&gt;‚Äì O host xen destino t√™m que ter mem√≥ria suficiente para provisionar¬†a VM, caso contr√°rio a VM n√£o completar√° o processo de migra√ß√£o (isso √© meio l√≥gico, rs);&lt;/p&gt;

&lt;p&gt;‚Äì O drive de DVD deve estar setado como empty (n√£o deve ter nenhuma .iso anexada ou nenhum cd/dvd dentro do drive do host);&lt;/p&gt;

&lt;p&gt;‚Äì Se as CPUs dos hosts de origem e destino forem diferentes, ent√£o a CPU do servidor de destino deve suportar todos os recursos da do servidor de origem, o que, por consequ√™ncia, √© muito improv√°vel que as CPUs sejam de fabricantes diferentes, ou seja, √© muito recomend√°vel voc√™ trabalhar mesmo com o mesmo fabricante de processador (por exemplo, Intel ou AMD).&lt;/p&gt;

&lt;p&gt;‚Äì N√£o √© poss√≠vel migrar VMs que tenham mais de um snapshot (leia &lt;a href=&quot;http://ports.marllus.com/2016/02/17/snapshots-no-xenserver-6-5/&quot; target=&quot;_blank&quot;&gt;aqui&lt;/a&gt; meu outro tutorial sobre snapshots e saiba o porqu√™ disso);&lt;/p&gt;

&lt;p&gt;OBS: Se a VM conter um snapshot, planeje a aloca√ß√£o de seu espa√ßo no storage do host destino. Caso n√£o entenda, o link acima sobre snapshots explica tudo isso.&lt;/p&gt;

&lt;p&gt;‚Äì N√£o √© poss√≠vel migrar VMs que tenham mais que 6 VDIs anexados (como somente um VDI √© transferido por vez, creio que 7 VDIs iria comprometer bastante a VM em caso de um poss√≠vel falha na migra√ß√£o).&lt;/p&gt;

&lt;p&gt;Limita√ß√µes do Storage XenMotion:&lt;/p&gt;

&lt;p&gt;‚Äì N√£o deve ser usado em ambientes com XenDesktop (&lt;a href=&quot;https://en.wikipedia.org/wiki/Desktop_virtualization&quot; target=&quot;_blank&quot;&gt;Virtual Desktop Infrastructure&lt;/a&gt;);&lt;/p&gt;

&lt;p&gt;‚Äì VMs que usam PCI pass-thru n√£o podem ser migradas;&lt;/p&gt;

&lt;p&gt;‚Äì A perfomance da VM ir√° ser reduzida no processo de migra√ß√£o, ent√£o, cuidado com o hor√°rio de rush;&lt;/p&gt;

&lt;p&gt;‚Äì Deve ser desabilitado qualquer HA ou WLB configurado no pool de origem ou destino;&lt;/p&gt;

&lt;p&gt;Storage XenMotion √© bastante utilizado em casos de Upgrade de Xenserver Standalone (hosts xen sem pool).&lt;/p&gt;

&lt;p&gt;Para saber como migrar uma VM atrav√©s do XenCenter, acesse esse tutorial (&lt;a href=&quot;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-vms-manage/xs-xc-vms-relocate.html&quot; target=&quot;_blank&quot;&gt;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-vms-manage/xs-xc-vms-relocate.html&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;V√≠deo demonstra√ß√£o do Storage XenMotion:&lt;/p&gt;

&lt;p&gt;https://www.youtube.com/watch?v=YWGu3tT6Z18&lt;/p&gt;

&lt;p&gt;At√© breve!&lt;/p&gt;

&lt;p&gt;Abra√ßo!&lt;/p&gt;

&lt;p&gt;¬†&lt;/p&gt;

&lt;p&gt;Refer√™ncias:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.amazon.com.br/Mastering-Citrix-Xenserver-Martez-Reed/dp/178328739X&quot; target=&quot;_blank&quot;&gt;http://www.amazon.com.br/Mastering-Citrix-Xenserver-Martez-Reed/dp/178328739X&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-vms-manage/xs-xc-vms-relocate.html&quot; target=&quot;_blank&quot;&gt;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-vms-manage/xs-xc-vms-relocate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://ports.marllus.com/2016/02/17/xenmotion-no-xenserver-6-5/&quot; target=&quot;_blank&quot;&gt;https://msinhore.wordpress.com/2012/09/20/storage-xenmotion/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=YWGu3tT6Z18&quot; target=&quot;_blank&quot;&gt;https://www.youtube.com/watch?v=YWGu3tT6Z18&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.citrix.com/content/dam/citrix/en_us/documents/products-solutions/storage-xenmotion-live-storage-migration-with-citrix-xenserver.pdf?accessmode=direct&quot; target=&quot;_blank&quot;&gt;https://www.citrix.com/content/dam/citrix/en_us/documents/products-solutions/storage-xenmotion-live-storage-migration-with-citrix-xenserver.pdf?accessmode=direct&lt;br /&gt; http://ports.marllus.com/2016/02/15/xenmotion-no-xenserver-6-5&lt;br /&gt; http://store.vmware.com/store/vmware/en_US/pd/productID.284281000?src=WWW_eBIZ_productpage_vSphere_EnterprisePlus_Buy_US&lt;br /&gt; https://en.wikipedia.org/wiki/Desktop_virtualization&lt;br /&gt; &lt;/a&gt;&lt;/p&gt;

&lt;p&gt;¬†&lt;/p&gt;

&lt;p style=&quot;text-align: center;&quot;&gt;
  &lt;a href=&quot;http://creativecommons.org/licenses/by-sa/4.0/&quot; rel=&quot;license&quot;&gt;&lt;img style=&quot;border-width: 0;&quot; src=&quot;https://i.creativecommons.org/l/by-sa/4.0/88x31.png&quot; alt=&quot;Licen√ßa Creative Commons&quot; /&gt;&lt;/a&gt;&lt;br /&gt; Este trabalho de &lt;a href=&quot;http://ports.marllus.com&quot;&gt;Marllus&lt;/a&gt;, est√° licenciado com uma Licen√ßa &lt;a href=&quot;http://creativecommons.org/licenses/by-sa/4.0/&quot; rel=&quot;license&quot;&gt;Creative Commons &amp;#8211; Atribui√ß√£o-CompartilhaIgual 4.0 Internacional&lt;/a&gt;.
&lt;/p&gt;
</description>
        <pubDate>Wed, 17 Feb 2016 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/tecnologia/2016/02/17/storage-xenmotion-no-xenserver-6-5.html</link>
        <guid isPermaLink="true">http://localhost:4000/tecnologia/2016/02/17/storage-xenmotion-no-xenserver-6-5.html</guid>
        
        
        <category>tecnologia</category>
        
      </item>
    
      <item>
        <title>Snapshots no XenServer 6.5</title>
        <description>&lt;p&gt;E a√≠, tranquilo?&lt;/p&gt;

&lt;p&gt;Mas o que s√£o snapshots? S√£o arquivinhos (vou cham√°-los assim) que possuem informa√ß√µes a respeito de um ponto na vida de uma VM. Essa informa√ß√£o serve para o administrador XenServer, por exemplo, voltar para um momento em que ele fez uma altera√ß√£o na VM, como em uma p√≥s configura√ß√£o de um servi√ßo PHP ou antes de uma tr√°gica atualiza√ß√£o de sistema (kernel panic, huuuuuuu).&lt;/p&gt;

&lt;p&gt;Lembre do ponto de restaura√ß√£o presente no Windows. √â praticamente a mesma l√≥gica.&lt;/p&gt;

&lt;p&gt;Os snapshots ajudam bastante em tarefas como estas, como ‚Äúvoltar‚Äù uma VM no tempo (&lt;del&gt;de volta para o futuro e mart macflein&lt;/del&gt;) al√©m de ser uma m√£o-na-roda para a realiza√ß√£o de backups completos dela.&lt;/p&gt;

&lt;p&gt;Para o caso de backups, eles s√£o usados para complementar o processo de backup √† quente (sem desligar a VM). Um dos m√©todos seria: Primeiro √© tirado o snapshot da VM, depois a partir do snapshot √© realizado uma c√≥pia completa para um arquivo √∫nico de backup (.xva).&lt;/p&gt;

&lt;p&gt;Por√©m, Snapshot, como muita gente acha, n√£o √© backup, de fato. Snapshot √© informa√ß√£o da VM em um momento, ou seja, esse arquivinho grava os metadados da VM (cpu, ram, network, etc.) e o ponteiro que aponta para uma regi√£o do vDisk da VM naquele instante de tempo em que foi tirado o snapshot. Esse arquivo √© realmente pequenininho.&lt;/p&gt;

&lt;p&gt;Se voc√™ excluir sem querer um vDisk de uma VM e tentar recuper√°-lo por meio de um snapshot, sinto muito meu amigo, ele n√£o vai voltar no tempo trazendo o disco de volta, pois neste caso o pr√≥prio disco foi exclu√≠do. Como falei: Snapshot n√£o √© backup. Ele pode complementar um.&lt;/p&gt;

&lt;p&gt;Ent√£o, voc√™ deve estar pensando, como esse arquivinho √© pequeno, vou tirar v√°rios snaphots a cada 2 segundos para ter todos os instantes de tempo da minha VM e voltar na hora que eu precisar!! ahahah&lt;/p&gt;

&lt;p&gt;Maninho, n√£o fa√ßa isso.&lt;/p&gt;

&lt;p&gt;O motivo? Quando voc√™ tira um snapshot, outro disco (VDI ‚Äì Virtual Disk Image) √© criado na sequ√™ncia, gerando uma esp√©cie de √°rvore (com pai, filho, neto‚Ä¶), e caso o seu SR (Storage Repository) seja baseado em volume (LVM) esse novo disco ocupar√° um espa√ßo bem relevante!&lt;/p&gt;

&lt;p&gt;Para melhor explicar, desenhei o que acontece no SR (espa√ßo consumido) em um ambiente XenServer quando se cria um snapshot de uma VM, quando o SR √© iSCSI/FC ou Local LVM (onde os VDIs guardados est√£o em uma estrutura LVM) e quando √© NFS ou Local EXT (onde os VDIs s√£o guardados como arquivos VHD sem LVM).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Para SR‚Äôs baseado em volume (iSCSI/FC, Local LVM):&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://i567.photobucket.com/albums/ss113/marlluslustosa/snapshots_VOlume-based_zpslrk0ifib.png~original&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;&quot; src=&quot;http://i567.photobucket.com/albums/ss113/marlluslustosa/snapshots_VOlume-based_zpslrk0ifib.png~original&quot; alt=&quot;&quot; width=&quot;691&quot; height=&quot;930&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Para SR‚Äôs baseado em arquivo (NFS, Local EXT):&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://i567.photobucket.com/albums/ss113/marlluslustosa/Snapshots_File-based_zpsgbae9gvc.png~original&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;&quot; src=&quot;http://i567.photobucket.com/albums/ss113/marlluslustosa/Snapshots_File-based_zpsgbae9gvc.png~original&quot; alt=&quot;&quot; width=&quot;691&quot; height=&quot;930&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;¬†&lt;/p&gt;

&lt;p&gt;Destas representa√ß√µes gr√°ficas, podemos deduzir, de forma clara, que:&lt;/p&gt;

&lt;p&gt;‚Äì Voc√™ deve se preocupar com o espa√ßo alocado ao criar um snapshot quando estiver utilizando SR‚Äôs baseados em volume (Local LVM, iSCSI/FC).&lt;/p&gt;

&lt;p&gt;Fique sempre ligado na seguinte f√≥rmula do custo para se criar um snapshot:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Custo (espa√ßo gerado no SR ap√≥s snapshot) = Dados escritos no disco atual + Tamanho do disco;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Informa√ß√µes a respeito de cria√ß√£o, gerenciamento, exclus√£o, importa√ß√£o e exporta√ß√£o de snapshots voc√™ pode conferir nestes links:&lt;/p&gt;

&lt;p&gt;(Xencenter GUI)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-vms-snapshots/xs-xc-vms-snapshots-take.html&quot; target=&quot;_blank&quot;&gt;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-vms-snapshots/xs-xc-vms-snapshots-take.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(Linha de comando)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://docs.vmd.citrix.com/XenServer/6.5.0/1.0/en_gb/reference.html#id555786&quot; target=&quot;_blank&quot;&gt;http://docs.vmd.citrix.com/XenServer/6.5.0/1.0/en_gb/reference.html#id555786&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Bem, de forma r√°pida expliquei qual o impacto da cria√ß√£o de snapshots em determinados tipos SR‚Äôs. Com essa informa√ß√£o, voc√™ j√° vai ter uma boa no√ß√£o t√©cnica para trabalhar com esses ‚Äúarquivinhos‚Äù.&lt;/p&gt;

&lt;p&gt;Por√©m, o assunto n√£o acaba por aqui. Se voc√™ quiser aprender mais sobre eles, como o que acontece quando snapshots s√£o exclu√≠dos (coalescing) e o espa√ßo gerado por esta opera√ß√£o, o limite de cria√ß√£o de snapshots e o porqu√™ disso, al√©m de outras informa√ß√µes ‚Äúninjas‚Äù (como o porque de n√£o ser poss√≠vel excluir um snapshot por falta de espa√ßo no xen host) voc√™ pode conferir nos links da refer√™ncia (principalmente &lt;a href=&quot;https://support.citrix.com/servlet/KbServlet/download/21626-102-714437/XenServer_Understanding_Snapshots.pdf&quot; target=&quot;_blank&quot;&gt;aqui&lt;/a&gt; e &lt;a href=&quot;http://xapi-project.github.io/features/snapshots/snapshots.html&quot; target=&quot;_blank&quot;&gt;aqui&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;At√© mais e grande abra√ßo!&lt;/p&gt;

&lt;p&gt;¬†&lt;/p&gt;

&lt;p&gt;Refer√™ncias:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://avpaul.blogspot.com.br/2012/05/xenserver-losing-space-on-sr-and.html&quot; target=&quot;_blank&quot;&gt;http://avpaul.blogspot.com.br/2012/05/xenserver-losing-space-on-sr-and.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://techblog.jeppson.org/2015/02/reclaim-lost-space-xenserver-6-5/&quot; target=&quot;_blank&quot;&gt;https://techblog.jeppson.org/2015/02/reclaim-lost-space-xenserver-6-5/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://community.spiceworks.com/topic/319881-citrix-xenserver-6-0-2-out-of-disk-space&quot; target=&quot;_blank&quot;&gt;https://community.spiceworks.com/topic/319881-citrix-xenserver-6-0-2-out-of-disk-space&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://pt.slideshare.net/davidmcg/top-troubleshooting-tips-and-techniques-for-citrix-xenserver-deployments&quot; target=&quot;_blank&quot;&gt;http://pt.slideshare.net/davidmcg/top-troubleshooting-tips-and-techniques-for-citrix-xenserver-deployments&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://discussions.citrix.com/topic/355832-how-to-reclaim-disk-space-from-deleted-snapshots-on-xenserver-62/&quot; target=&quot;_blank&quot;&gt;http://discussions.citrix.com/topic/355832-how-to-reclaim-disk-space-from-deleted-snapshots-on-xenserver-62/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://support.citrix.com/servlet/KbServlet/download/21626-102-714437/XenServer_Understanding_Snapshots.pdf&quot; target=&quot;_blank&quot;&gt;https://support.citrix.com/servlet/KbServlet/download/21626-102-714437/XenServer_Understanding_Snapshots.pdf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://xapi-project.github.io/features/snapshots/snapshots.html&quot; target=&quot;_blank&quot;&gt;http://xapi-project.github.io/features/snapshots/snapshots.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://docs.vmd.citrix.com/XenServer/6.5.0/1.0/en_gb/reference.html#id555786&quot; target=&quot;_blank&quot;&gt;http://docs.vmd.citrix.com/XenServer/6.5.0/1.0/en_gb/reference.html#id555786&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-vms-snapshots/xs-xc-vms-snapshots-take.html&quot; target=&quot;_blank&quot;&gt;http://docs.citrix.com/en-us/xencenter/6-5/xs-xc-vms-snapshots/xs-xc-vms-snapshots-take.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;¬†&lt;/p&gt;

&lt;p style=&quot;text-align: center;&quot;&gt;
  &lt;a href=&quot;http://creativecommons.org/licenses/by-sa/4.0/&quot; rel=&quot;license&quot;&gt;&lt;img style=&quot;border-width: 0;&quot; src=&quot;https://i.creativecommons.org/l/by-sa/4.0/88x31.png&quot; alt=&quot;Licen√ßa Creative Commons&quot; /&gt;&lt;/a&gt;&lt;br /&gt; Este trabalho de &lt;a href=&quot;http://ports.marllus.com&quot;&gt;Marllus&lt;/a&gt;, est√° licenciado com uma Licen√ßa &lt;a href=&quot;http://creativecommons.org/licenses/by-sa/4.0/&quot; rel=&quot;license&quot;&gt;Creative Commons &amp;#8211; Atribui√ß√£o-CompartilhaIgual 4.0 Internacional&lt;/a&gt;.
&lt;/p&gt;
</description>
        <pubDate>Wed, 17 Feb 2016 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/tecnologia/2016/02/17/snapshots-no-xenserver-6-5.html</link>
        <guid isPermaLink="true">http://localhost:4000/tecnologia/2016/02/17/snapshots-no-xenserver-6-5.html</guid>
        
        
        <category>tecnologia</category>
        
      </item>
    
  </channel>
</rss>
